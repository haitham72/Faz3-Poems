{
  "name": "Clean - Faz3 poems - Gemini",
  "nodes": [
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w",
          "mode": "list",
          "cachedResultName": "FAZ_POEMS_REVIEW",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 179938127,
          "mode": "list",
          "cachedResultName": "grouped_lines_for_AI",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit#gid=179938127"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Stuatus",
              "lookupValue": "Ready"
            }
          ]
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "specifyRange",
              "firstDataRow": 540
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -2176,
        -1408
      ],
      "id": "139fb7a6-cc37-40e5-9158-1fecf15ff2d8",
      "name": "Get row(s) in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "OV5c4nxTt4atkgGW",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=summarize these lines: {{ $json.contents_tagged }}\nfull poem: {{ $json.poem }}\nafter checking the full poetry: {{ $json.contents_clean }}",
        "options": {
          "systemMessage": "=# âœ… **System Prompt (English Instruction, Arabic Summaries, JSON Output)**\n\nYou are an expert in Arabic poetry analysis. You will be given selected lines from a poem (each formatted as `\"line_number\":\"text\"`) and the full poem as contextual reference.\n\nYour task is to:  \n- Generate a **concise summary in Arabic** (5â€“30 words max) for **each provided line**, capturing its emotional and thematic essence.  \n- Summarize **each line independently**â€”do not merge lines or add interpretations beyond whatâ€™s implied.  \n- Use the full poem **only for contextual understanding**, but base each summary strictly on its own line.  \n- Output **must be valid JSON**: a single object where keys are line numbers as **strings** (e.g., `\"1\"`, `\"2\"`) and values are the **Arabic summaries** as strings.  \n- **Do not include any extra text, explanations, or formatting**â€”output only the JSON object.\n\n---\n\n### ğŸ“¥ Example Input (for reference only)\n\n**Selected lines:**  \n`\"1\":\"Ø­Ø¨ÙŠØ¨ØªÙŠ Ø­Ø§Ù„ÙŠ Ù…Ù† Ø§Ù„Ø´ÙˆÙ‚ Ø¯Ø§Ù†ÙŠ      Ø§Ø´Ø±Ù‚ Ø¨Ø­Ø¨Ùƒ .. ÙˆØ§Ø¹ÙˆØ¯ Ø§ØºØ±Ø¨\",`  \n`\"2\":\"Ø§Ù†Ø§Ù†ÙŠ Ù ÙˆØµÙ„Ùƒ Ù„ÙƒÙ† ÙŠØ§Ù„Ø§Ù†Ø§Ù†ÙŠ      ØªØ±ÙŠ Ø§Ù„Ø§Ù†Ø§Ù†ÙŠÙ‡ Ù Ø·Ø¨Ø¹Ùƒ ØªØ®Ø±Ø¨\",`  \n`\"3\":\"Ù„Ø­Ø¸Ø§Øª Ø­Ø¨Ùƒ Ø­Ø·Ù…Øª Ù„ÙŠ ÙƒÙŠØ§Ù†ÙŠ      ÙˆØ§Ù„Ø­Ø²Ù† Ù…Ù† Ø¨ÙŠÙ† Ø§Ù„Ù…Ø­Ø§Ù†ÙŠ ØªØ³Ø±Ø¨\"`\n\n**Full poem:**  \nØ­Ø¨ÙŠØ¨ØªÙŠ Ø­Ø§Ù„ÙŠ Ù…Ù† Ø§Ù„Ø´ÙˆÙ‚ Ø¯Ø§Ù†ÙŠ      Ø§Ø´Ø±Ù‚ Ø¨Ø­Ø¨Ùƒ .. ÙˆØ§Ø¹ÙˆØ¯ Ø§ØºØ±Ø¨ØŒ  \nØ§Ù†Ø§Ù†ÙŠ Ù ÙˆØµÙ„Ùƒ Ù„ÙƒÙ† ÙŠØ§Ù„Ø§Ù†Ø§Ù†ÙŠ      ØªØ±ÙŠ Ø§Ù„Ø§Ù†Ø§Ù†ÙŠÙ‡ Ù Ø·Ø¨Ø¹Ùƒ ØªØ®Ø±Ø¨ØŒ  \nÙ„Ø­Ø¸Ø§Øª Ø­Ø¨Ùƒ Ø­Ø·Ù…Øª Ù„ÙŠ ÙƒÙŠØ§Ù†ÙŠ      ÙˆØ§Ù„Ø­Ø²Ù† Ù…Ù† Ø¨ÙŠÙ† Ø§Ù„Ù…Ø­Ø§Ù†ÙŠ ØªØ³Ø±Ø¨ØŒ  \nØªØ³Ø±Ø¨ ÙˆØµÙƒØª Ø¹Ù„ÙŠÙ‡ Ø§Ù„Ù…Ø­Ø§Ù†ÙŠ      ÙƒÙ†Ù‡ Ù„ÙˆØµÙ„Ùƒ Ø¨Ø§Ù„Ø¬Ø±ÙˆØ­ ÙŠØªÙ‚Ø±Ø¨ØŒ  \nÙŠØ§ Ù…Ø¹Ø±Ø¨ Ø§Ù„Ø§Ù†Ø³Ø§Ø¨ Ø®Ø¯Ø± Ø§Ù„Ø¹ÙŠØ§Ù†ÙŠ      Ø³Ù„Ù… Ø§Ù„Ø¹Ø±Ø¨ Ù„Ø§ ØªØ¬Ù‡Ù„Ù‡ ÙŠØ§Ù„Ù…Ø¹Ø±Ø¨ØŒ  \nØ´Ø±Ø¨Øª Ø­Ø¨Ùƒ Ù„ÙŠÙ† ÙØ§Ø¶ Ø§Ù„Ø­Ù†Ø§Ù†ÙŠ      ÙˆÙ‚Ø§Ù…Øª Ø¹Ø±ÙˆÙ‚ÙŠ Ù…Ù† ØºÙ„Ø§Ùƒ ØªØ´Ø±Ø¨  \n\n---\n\n### ğŸ“¤ Expected Output (Valid JSON, Summaries in Arabic)\n\n```json\n{\n  \"1\": \"Ø§Ù„Ø´Ø§Ø¹Ø± Ù‡Ù†Ø§ ÙŠØªØ­Ø¯Ø« Ø¹Ù† Ø´ÙˆÙ‚Ù‡ Ø§Ù„Ø­Ø§Ø±Ù‘ Ù„Ù‡Ø§ ÙˆØªØ£Ø±Ø¬Ø­Ù‡ Ø¨ÙŠÙ† Ø§Ù„Ø§ØªØµØ§Ù„ ÙˆØ§Ù„Ø§Ø¨ØªØ¹Ø§Ø¯\",\n  \"2\": \"ÙŠØ¹Ø¨Ø± Ø¹Ù† ØªÙ†Ø§Ù‚Ø¶ Ø§Ù„Ø£Ù†Ø§Ù†ÙŠØ© Ø¨ÙŠÙ†Ù‡ ÙˆØ¨ÙŠÙ† Ù…Ø­Ø¨ÙˆØ¨ØªÙ‡ Ø§Ù„ØªÙŠ ØªÙØ³Ø¯ Ø§Ù„Ø¹Ù„Ø§Ù‚Ø©\",\n  \"3\": \"ÙŠØµÙ ÙƒÙŠÙ Ø¯Ù…Ø±ØªÙ‡ Ù„Ø­Ø¸Ø§Øª Ø§Ù„Ø­Ø¨ ÙˆØ£Ø¯Ø®Ù„Øª Ø§Ù„Ø­Ø²Ù† Ø¥Ù„Ù‰ Ø£Ø¹Ù…Ø§Ù‚Ù‡\"\n}\n```\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        -1280,
        -1488
      ],
      "id": "61f765ad-c200-4dee-aafb-4953ed8e1400",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\nconst result = items.flatMap((item) => {\n  let outputStr = item?.json?.output || '';\n\n  // Extract JSON from Markdown code block if present\n  const jsonMatch = outputStr.match(/```json\\s*({[\\s\\S]*?})\\s*```/);\n  const cleanJsonStr = jsonMatch ? jsonMatch[1] : outputStr;\n\n  // Parse the inner JSON object\n  const parsedObj = JSON.parse(cleanJsonStr);\n\n  // Convert { \"1\": \"...\", \"2\": \"...\" } â†’ [ { Row_ID: \"1\", summary: \"...\" }, ... ]\n  return Object.entries(parsedObj).map(([Row_ID, summary]) => ({\n    Row_ID,\n    summary\n  }));\n});\n\nreturn result.map(obj => ({ json: obj }));"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -928,
        -1488
      ],
      "id": "0cc7d319-d8e8-429d-9aa9-ddd95058315d",
      "name": "Code in JavaScript2"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -1504,
        -1408
      ],
      "id": "af6b409e-d6f1-4d81-9b4d-136ba2a61e02",
      "name": "Loop Over Items",
      "executeOnce": false
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\nconst grouped = items.reduce((acc, item) => {\n  const json = item.json;\n  const id = json.poem_id;\n\n  if (!acc[id]) {\n    acc[id] = {\n      poem_id: id,                     // ğŸ‘ˆ ADDED\n      poem: json.Title_cleaned.trim(),\n      contents_clean: [],\n      contents_tagged: []\n    };\n  }\n\n  const lineText = (json.Poem_line_cleaned || \"\").trim();\n  const rowNum = json.row_number;\n\n  acc[id].contents_clean.push(lineText);\n  acc[id].contents_tagged.push(`\"${rowNum}\":\"${lineText}\"`);\n\n  return acc;\n}, {});\n\nconst result = Object.values(grouped);\n\nreturn result;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1728,
        -1408
      ],
      "id": "5c309390-84d0-44d2-9e83-af590e190667",
      "name": "Code in JavaScript"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "279676cb-1fba-4c26-8113-6173dc9cdbc8",
              "name": "Title_cleaned",
              "value": "={{ $json.Title_cleaned }}",
              "type": "string"
            },
            {
              "id": "a13eaf7d-5c67-4489-9ad0-9e7b61cfae78",
              "name": "Poem_line_cleaned",
              "value": "={{ $json.Poem_line_cleaned }}",
              "type": "string"
            },
            {
              "id": "017bad73-a782-4b01-bfb4-dca3e3799dce",
              "name": "poem_id",
              "value": "={{ $json.poem_id }}",
              "type": "number"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1952,
        -1408
      ],
      "id": "f6c24dfc-77e3-477f-b3d1-0efc8ef767eb",
      "name": "Original_Dataset"
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w",
          "mode": "list",
          "cachedResultName": "FAZ_POEMS_REVIEW",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 179938127,
          "mode": "list",
          "cachedResultName": "grouped_lines_for_AI",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit#gid=179938127"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Stuatus": "Done",
            "poem_id": "={{ $('Loop Over Items').item.json.poem_id }}"
          },
          "matchingColumns": [
            "poem_id"
          ],
          "schema": [
            {
              "id": "poem_id",
              "displayName": "poem_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Title_cleaned",
              "displayName": "Title_cleaned",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Poem_full",
              "displayName": "Poem_full",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Poem_line_cleaned",
              "displayName": "Poem_line_cleaned",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Stuatus",
              "displayName": "Stuatus",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -480,
        -1408
      ],
      "id": "b4a0b594-6715-4c50-8f98-d3d568bd755a",
      "name": "Update row in sheet1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "OV5c4nxTt4atkgGW",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "update",
        "documentId": {
          "__rl": true,
          "value": "1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w",
          "mode": "list",
          "cachedResultName": "FAZ_POEMS_REVIEW",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1836724327,
          "mode": "list",
          "cachedResultName": "Exact_lines",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit#gid=1836724327"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Row_ID": "={{ $json.Row_ID }}",
            "summary": "={{ $json.summary }}"
          },
          "matchingColumns": [
            "Row_ID"
          ],
          "schema": [
            {
              "id": "poem_id",
              "displayName": "poem_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Row_ID",
              "displayName": "Row_ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Title_raw",
              "displayName": "Title_raw",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Poem_line_raw",
              "displayName": "Poem_line_raw",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Title_cleaned",
              "displayName": "Title_cleaned",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Poem_line_cleaned",
              "displayName": "Poem_line_cleaned",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "summary",
              "displayName": "summary",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "qafiya",
              "displayName": "qafiya",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "bahr",
              "displayName": "bahr",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "row_number",
              "displayName": "row_number",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "number",
              "canBeUsedToMatch": true,
              "readOnly": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -704,
        -1488
      ],
      "id": "a0132d65-2b30-4860-8f7f-46a60379ec00",
      "name": "Update Summary",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "OV5c4nxTt4atkgGW",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -256,
        112
      ],
      "id": "a7d86d34-ea6a-4d78-89ae-d3c4c2ab7a29",
      "name": "When clicking â€˜Execute workflowâ€™"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w",
          "mode": "list",
          "cachedResultName": "FAZ_POEMS_REVIEW",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 179938127,
          "mode": "list",
          "cachedResultName": "grouped_lines_for_AI",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit#gid=179938127"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Stuatus",
              "lookupValue": "Ready"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -2176,
        -1088
      ],
      "id": "1aec92ec-5a4b-44f8-92b4-f4d2fcf5b6bb",
      "name": "Get row(s) in sheet1",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "OV5c4nxTt4atkgGW",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=CONTEXT: Full poem text for bahr/qafiya analysis:\n{{ $json.Poem_full }}\n\n---\n\nTASK: Analyze each line below individually.\n\nPoem: {{ $json.Title_cleaned }}\n\nLines to process:\n{{ $json.Poem_line_cleaned }}\n\nINSTRUCTIONS:\n- Determine bahr and qafiya from full poem context (same for all lines)\n- Extract sentiments and entities from EACH individual line\n- Include pronouns (Ø£Ù†ØªØŒ Ù€ÙƒØŒ Ù€Ù‡Ø§) as people entities\n- Return JSON array with row_id for each line\n\nOUTPUT FORMAT: Valid JSON array [ {\"row_id\": 1, ...}, {\"row_id\": 2, ...} ]",
        "options": {
          "systemMessage": "=# Arabic Poetry Analysis Agent - Minimal Fields (Production)\n\n## Core Function\nAnalyze Arabic poetry using classical prosody (Ø¹Ù„Ù… Ø§Ù„Ø¹ÙØ±ÙˆØ¶). Output JSON with **only** bahr, qafiya, sentiments, entities, and classification.\n\n## Input â†’ Output\n- Input: English with embedded Arabic poetry (3-5 lines)\n- Output: Valid JSON, 100% Arabic values (except confidence floats)\n\n## Critical Rules\n1. **Arabic only** in all text fields\n2. **Full poem context** for bahr/qafiya (never single line)\n3. **\"ØºÙŠØ± Ù…Ø­Ø³ÙˆÙ…\"** if confidence < 0.6\n4. **No hallucination** - accuracy > completion\n5. **Valid JSON only** - no prose, no markdown\n\n---\n\n## Analysis Requirements\n\n### 1. BAHR (Meter) - REQUIRED\n**Rule**: Analyze ALL verses together to determine consistent pattern.\n\n**Tafeela Patterns** (internal reference):\n```\nÙÙØ¹ÙÙˆÙ„ÙÙ†Ù’=11010 | Ù…ÙÙÙØ§Ø¹ÙÙŠÙ„ÙÙ†Ù’=1101010 | ÙÙØ§Ø¹ÙÙ„ÙÙ†Ù’=10110 | ÙÙØ¹ÙÙ„ÙÙ†Ù’=1010\nÙ…ÙØªÙÙÙØ§Ø¹ÙÙ„ÙÙ†Ù’=1110110 | Ù…ÙØ³Ù’ØªÙÙÙ’Ø¹ÙÙ„ÙÙ†Ù’=1010110 | ÙÙØ§Ø¹ÙÙ„ÙØ§ØªÙÙ†Ù’=1011010\n```\n\n**Standard Meters** (16 classical):\nØ§Ù„Ø·ÙˆÙŠÙ„ØŒ Ø§Ù„Ù…Ø¯ÙŠØ¯ØŒ Ø§Ù„Ø¨Ø³ÙŠØ·ØŒ Ø§Ù„ÙˆØ§ÙØ±ØŒ Ø§Ù„ÙƒØ§Ù…Ù„ØŒ Ø§Ù„Ù‡Ø²Ø¬ØŒ Ø§Ù„Ø±Ø¬Ø²ØŒ Ø§Ù„Ø±Ù…Ù„ØŒ Ø§Ù„Ø³Ø±ÙŠØ¹ØŒ Ø§Ù„Ù…Ù†Ø³Ø±Ø­ØŒ Ø§Ù„Ø®ÙÙŠÙØŒ Ø§Ù„Ù…Ø¶Ø§Ø±Ø¹ØŒ Ø§Ù„Ù…Ù‚ØªØ¶Ø¨ØŒ Ø§Ù„Ù…Ø¬ØªØ«ØŒ Ø§Ù„Ù…ØªÙ‚Ø§Ø±Ø¨ØŒ Ø§Ù„Ù…ØªØ¯Ø§Ø±Ùƒ\n\n**Modern**: Ø´Ø¹Ø± Ø§Ù„ØªÙØ¹ÙŠÙ„Ø©ØŒ Ø´Ø¹Ø± Ø§Ù„Ø­Ø±\n\n**Output**:\n- `name`: Meter name in Arabic OR \"ØºÙŠØ± Ù…Ø­Ø³ÙˆÙ…\"\n- `confidence`: 0.0-1.0\n- `alternatives`: Array of alternative meters (if ambiguous)\n\n---\n\n### 2. QAFIYA (Rhyme) - REQUIRED\n**Rule**: Check last letter consistency across ALL verses. Need 80%+ match.\n\n**Components**:\n1. **Ø§Ù„Ø±ÙˆÙŠ (rawi)**: Final rhyme letter\n2. **Ø§Ù„ÙˆØµÙ„ (wasl)**: Extension after rawi (Ø§ØŒ ÙˆØŒ ÙŠ) OR null\n3. **Ø§Ù„Ø­Ø±ÙƒØ© (haraka)**: ÙØªØ­Ø©/Ø¶Ù…Ø©/ÙƒØ³Ø±Ø©/Ø³ÙƒÙˆÙ†\n4. **Ø§Ù„ØªØ£Ø³ÙŠØ³ (ta'sees)**: Boolean - has alef before rawi by 2-7 letters\n5. **Ø§Ù„Ù†ÙˆØ¹ (type)**: Ù…Ø·Ù„Ù‚Ø©/Ù…Ù‚ÙŠØ¯Ø©/Ù…Ø±Ø¯ÙØ©/Ù…Ø¤Ø³Ø³Ø©\n\n**If inconsistent**: All fields = \"ØºÙŠØ± Ù…Ø­Ø³ÙˆÙ…Ø©\", confidence < 0.5\n\n---\n\n### 3. SENTIMENTS - REQUIRED\n**Extract 1-3 dominant emotions from the poem.**\n\n**Categories**:\n- **Positive**: ÙØ±Ø­ØŒ Ø­Ø¨ØŒ Ø£Ù…Ù„ØŒ ÙØ®Ø±ØŒ Ø§Ù…ØªÙ†Ø§Ù†ØŒ Ø³Ø¹Ø§Ø¯Ø©\n- **Negative**: Ø­Ø²Ù†ØŒ Ø£Ù„Ù…ØŒ ØºØ¶Ø¨ØŒ ÙŠØ£Ø³ØŒ Ø­Ø³Ø±Ø©ØŒ ØºÙ…\n- **Complex**: Ø´ÙˆÙ‚ (longing), Ø­Ù†ÙŠÙ† (nostalgia), ÙˆØ¬Ø¯ (passion)\n- **Neutral**: ØªØ£Ù…Ù„ØŒ Ø­ÙƒÙ…Ø©ØŒ Ø³Ø±Ø¯\n\n**Output**: Array of Arabic strings (max 3)\n\n---\n\n### 4. ENTITIES - REQUIRED\n**Extract mentioned entities, cross-reference with dictionaries provided.**\n\n#### 4a. PEOPLE\n- Extract names + familial terms (Ø£Ø¨ØŒ Ø£Ù…ØŒ Ø§Ø¨Ù†ØŒ Ø£Ø®)\n- Extract titles (Ø´ÙŠØ®ØŒ Ø£Ù…ÙŠØ±ØŒ Ù…Ù„ÙƒØŒ Ø³Ù„Ø·Ø§Ù†)\n- **Extract collective nouns referring to people:**\n  - Groups: Ø§Ù„Ø´Ø¹Ø¨ØŒ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ØŒ Ø§Ù„Ø±ÙˆØ§Ø©ØŒ Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡ØŒ Ø§Ù„Ù†Ø§Ø³ØŒ Ø§Ù„Ù‚ÙˆÙ…\n  - Professions: Ø§Ù„Ø·Ø¨ÙŠØ¨ØŒ Ø§Ù„Ù…Ø¹Ù„Ù…ØŒ Ø§Ù„Ø¬Ù†Ø¯ÙŠØŒ etc.\n  - Generic references: Ø§Ù„Ø±Ø¬Ù„ØŒ Ø§Ù„Ù…Ø±Ø£Ø©ØŒ Ø§Ù„Ù†Ø§Ù‚Ù„ÙˆÙ†\n- **Extract pronouns and possessive suffixes that refer to people:**\n  - Ø£Ù†ØªØŒ Ø£Ù†ØªÙØŒ Ù‡ÙˆØŒ Ù‡ÙŠ (you, he, she)\n  - Possessive suffixes: Ù€ÙƒØŒ Ù€ÙƒÙ (your), Ù€Ù‡ØŒ Ù€Ù‡Ø§ (his, her)\n  - Examples: \"Ø­Ø¨Ùƒ\" = Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©, \"ÙˆØµÙ„Ùƒ\" = Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©, \"Ù‚Ù„Ø¨Ù‡\" = Ø§Ù„Ù…Ø°ÙƒÙˆØ±\n- **In love poetry (ØºØ²Ù„):** All 2nd person references (Ø£Ù†Øª/Ù€Ùƒ/Ù€ÙƒÙ) default to \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" or \"Ø§Ù„Ø­Ø¨ÙŠØ¨\"\n- Match to entity dictionary when possible\n- Resolve pronouns to the entity they reference (e.g., \"Ø£Ù†Øª\" â†’ \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" in ØºØ²Ù„ context)\n\n**Output**:\n```json\n{\n  \"name\": \"string (AR) - Ø§Ù„Ø§Ø³Ù… or Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©/Ø§Ù„Ø­Ø¨ÙŠØ¨ for pronouns\",\n  \"relation\": \"string (AR) - Ø§Ù„Ø¹Ù„Ø§Ù‚Ø©/Ø§Ù„Ø¯ÙˆØ± (e.g., Ø¬Ù…Ø§Ø¹Ø© for groups)\",\n  \"tags\": [\"AR array - keywords\"]\n}\n```\n\n#### 4b. PLACES\n- Extract: cities, countries, landmarks, natural features\n- **Extract cultural/abstract locations:**\n  - Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ (society), Ø§Ù„Ø«Ù‚Ø§ÙØ© (culture), Ø§Ù„Ø¹Ø§Ù„Ù… (world)\n  - Ø§Ù„ÙˆØ·Ù† (homeland), Ø§Ù„Ø¯ÙŠØ§Ø± (abode), Ø§Ù„Ø£Ø±Ø¶ (land)\n- Match to entity dictionary when possible\n\n**Output**:\n```json\n{\n  \"name\": \"string (AR) - Ø§Ù„Ù…ÙƒØ§Ù†\",\n  \"type\": \"Ø¯ÙˆÙ„Ø©/Ù…Ø¯ÙŠÙ†Ø©/Ù…Ø¹Ù„Ù…/Ø·Ø¨ÙŠØ¹Ø©/Ø«Ù‚Ø§ÙØ©\"\n}\n```\n\n#### 4c. EVENTS\n- Extract: holidays, occasions, historical events\n- Match to entity dictionary when possible\n\n**Output**:\n```json\n{\n  \"name\": \"string (AR) - Ø§Ù„Ø­Ø¯Ø«\",\n  \"type\": \"Ø¯ÙŠÙ†ÙŠ/ÙˆØ·Ù†ÙŠ/Ø«Ù‚Ø§ÙÙŠ/ØªØ§Ø±ÙŠØ®ÙŠ\"\n}\n```\n\n---\n\n### 5. CLASSIFICATION - REQUIRED\n\n#### STYLE (Ø§Ù„Ù†Ù…Ø·)\n**Options**: ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ / Ø­Ø¯ÙŠØ« / Ù…Ø¹Ø§ØµØ±\n\n---\n\n## Output Schema (STRICT)\n\n```json\n{\n  \"bahr\": {\n    \"name\": \"string (AR) or ØºÙŠØ± Ù…Ø­Ø³ÙˆÙ…\",\n    \"confidence\": 0.0-1.0,\n    \"alternatives\": [\n      {\n        \"name\": \"string (AR)\",\n        \"confidence\": 0.0-1.0\n      }\n    ]\n  },\n  \"qafiya\": {\n    \"rawi\": \"string (AR) or ØºÙŠØ± Ù…Ø­Ø³ÙˆÙ…Ø©\",\n    \"wasl\": \"string (AR) or null\",\n    \"haraka\": \"ÙØªØ­Ø©/Ø¶Ù…Ø©/ÙƒØ³Ø±Ø©/Ø³ÙƒÙˆÙ† or ØºÙŠØ± Ù…Ø­Ø³ÙˆÙ…Ø©\",\n    \"ta'sees\": boolean,\n    \"type\": \"Ù…Ø·Ù„Ù‚Ø©/Ù…Ù‚ÙŠØ¯Ø©/Ù…Ø±Ø¯ÙØ©/Ù…Ø¤Ø³Ø³Ø© or ØºÙŠØ± Ù…Ø­Ø³ÙˆÙ…Ø©\",\n    \"confidence\": 0.0-1.0\n  },\n  \"sentiments\": [\n    \"string (AR)\",\n    \"string (AR)\",\n    \"string (AR)\"\n  ],\n  \"entities\": {\n    \"people\": [\n      {\n        \"name\": \"string (AR)\",\n        \"relation\": \"string (AR)\",\n        \"tags\": [\"string (AR)\"]\n      }\n    ],\n    \"places\": [\n      {\n        \"name\": \"string (AR)\",\n        \"type\": \"Ø¯ÙˆÙ„Ø©/Ù…Ø¯ÙŠÙ†Ø©/Ù…Ø¹Ù„Ù…/Ø·Ø¨ÙŠØ¹Ø©\"\n      }\n    ],\n    \"events\": [\n      {\n        \"name\": \"string (AR)\",\n        \"type\": \"Ø¯ÙŠÙ†ÙŠ/ÙˆØ·Ù†ÙŠ/Ø«Ù‚Ø§ÙÙŠ/ØªØ§Ø±ÙŠØ®ÙŠ\"\n      }\n    ]\n  },\n  \"classification\": {\n    \"style\": \"ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ/Ø­Ø¯ÙŠØ«/Ù…Ø¹Ø§ØµØ±\"\n  },\n  \"overall_confidence\": 0.0-1.0\n}\n```\n\n---\n\n## Confidence Calculation\n\n```\nBase confidence = 1.0\n\nDeduct if:\n- Inconsistent meter: -0.3\n- Inconsistent rhyme: -0.2\n- Broken tafeela: -0.4\n- <3 lines: -0.2\n- Heavy corruption: -0.3\n\nMinimum: 0.0\n```\n\n**Levels**:\n- Ø¹Ø§Ù„ÙŠØ© (High): 0.85-1.0\n- Ù…ØªÙˆØ³Ø·Ø© (Medium): 0.60-0.84\n- Ù…Ù†Ø®ÙØ¶Ø© (Low): <0.60 â†’ \"ØºÙŠØ± Ù…Ø­Ø³ÙˆÙ…\"\n\n---\n# if any other entity/place/people/objects are found please extract them\n## Entity Dictionary Reference\n\n### PEOPLE (Sample - Full dictionary in context)\n```json\n[\n  {\n    \"name_ar\": \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\",\n    \"name_en\": \"Sheikh Mohammed bin Rashid Al Maktoum\",\n    \"relation\": \"Ø§Ù„Ø£Ø¨\",\n    \"tags\": [\"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯\", \"Ø£Ø¨ÙŠ\", \"ÙˆØ§Ù„Ø¯ÙŠ\", \"Ù‚Ø§Ø¦Ø¯ÙŠ\", \"Ø³ÙŠØ¯ÙŠ\", \"Ù…Ø¹Ù„Ù…ÙŠ\", \"Ø­Ø§ÙƒÙ… Ø¯Ø¨ÙŠ\", \"Ù†Ø§Ø¦Ø¨ Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\", \"Ø±Ø¦ÙŠØ³ Ø§Ù„ÙˆØ²Ø±Ø§Ø¡\", \"ØµØ§Ø­Ø¨ Ø§Ù„Ø³Ù…Ùˆ\"]\n  },\n  {\n    \"name_ar\": \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\",\n    \"name_en\": \"Mohamed bin Zayed Al Nahyan\",\n    \"relation\": \"Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\",\n    \"tags\": [\"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯\", \"Ù‚Ø§Ø¦Ø¯ÙŠ\", \"Ø³ÙŠØ¯ÙŠ\", \"Ø¨Ùˆ Ø®Ø§Ù„Ø¯\", \"Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\", \"Ø­Ø§ÙƒÙ… Ø£Ø¨ÙˆØ¸Ø¨ÙŠ\", \"ØµØ§Ø­Ø¨ Ø§Ù„Ø³Ù…Ùˆ\"]\n  },\n  {\n    \"name_ar\": \"Ø²Ø§ÙŠØ¯ Ø¨Ù† Ø³Ù„Ø·Ø§Ù† Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\",\n    \"name_en\": \"Sheikh Zayed bin Sultan Al Nahyan\",\n    \"relation\": \"Ø§Ù„Ù…Ø¤Ø³Ø³\",\n    \"tags\": [\"Ø²Ø§ÙŠØ¯\", \"Ø§Ù„Ù…Ø¤Ø³Ø³\", \"Ø§Ù„ÙˆØ§Ù„Ø¯ Ø§Ù„Ù…Ø¤Ø³Ø³\", \"Ø£Ø¨Ùˆ Ø§Ù„Ø£Ù…Ø©\", \"Ø§Ù„Ø¨Ø§Ù†ÙŠ\", \"Ø±Ø­Ù…Ù‡ Ø§Ù„Ù„Ù‡\", \"Ø·ÙŠØ¨ Ø§Ù„Ù„Ù‡ Ø«Ø±Ø§Ù‡\", \"Ø§Ù„Ù‚Ø§Ø¦Ø¯\"]\n  },\n  {\n    \"name\": \"Sheikh Hamdan bin Mohammed bin Rashid Al Maktoum\",\n    \"relation\": \"self\",\n    \"tags\": [\"Ø­Ù…Ø¯Ø§Ù†\", \"ÙØ²Ø§Ø¹\", \"ÙˆÙ„ÙŠ Ø§Ù„Ø¹Ù‡Ø¯\", \"Ù‚Ø§Ø¦Ø¯\", \"Ø³ÙŠØ¯\", \"Ø£Ù…ÙŠØ±\"]\n  },\n  {\n    \"name\": \"Sheikha Hind bint Maktoum bin Juma'a\",\n    \"relation\": \"mother\",\n    \"tags\": [\"Ù‡Ù†Ø¯\", \"Ø£Ù…ÙŠ\", \"ÙˆØ§Ù„Ø¯ØªÙŠ\", \"Ø³ÙŠØ¯ØªÙŠ\", \"Ø§Ù„Ø£Ù…ÙŠØ±Ø©\"]\n  },\n  {\n    \"name\": \"Sheikh Rashid bin Hamdan bin Mohammed\",\n    \"relation\": \"son\",\n    \"tags\": [\"Ø±Ø§Ø´Ø¯\", \"Ø§Ø¨Ù†ÙŠ\", \"ÙˆÙ„Ø¯ÙŠ\", \"ÙÙ„Ø°Ø© ÙƒØ¨Ø¯ÙŠ\", \"Ù†ÙˆØ± Ø¹ÙŠÙ†ÙŠ\", \"Ø­Ø¨ÙŠØ¨ÙŠ\", \"Ø£Ù…Ù„ÙŠ\", \"Ø°Ø±ÙŠØªÙŠ\"]\n  },\n  {\n    \"name\": \"Sheikha Sheikha bint Hamdan bin Mohammed\",\n    \"relation\": \"daughter\",\n    \"tags\": [\"Ø´ÙŠØ®Ø©\", \"Ø§Ø¨Ù†ØªÙŠ\", \"Ø¨Ù†ØªÙŠ\", \"Ù†ÙˆØ± Ø¹ÙŠÙ†ÙŠ\", \"Ø­Ø¨ÙŠØ¨ØªÙŠ\", \"ÙØ±Ø­ØªÙŠ\", \"Ø£Ù…Ù„ÙŠ\", \"Ø°Ø±ÙŠØªÙŠ\"]\n  },\n  {\n    \"name\": \"Sheikh Maktoum bin Mohammed bin Rashid Al Maktoum\",\n    \"relation\": \"brother\",\n    \"tags\": [\"Ù…ÙƒØªÙˆÙ…\", \"Ø£Ø®ÙŠ\", \"Ø±ÙÙŠÙ‚ Ø¯Ø±Ø¨\", \"Ø³Ù†Ø¯ÙŠ\", \"Ù†Ø§Ø¦Ø¨ Ø­Ø§ÙƒÙ… Ø¯Ø¨ÙŠ\", \"ÙˆØ²ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ©\"]\n  },\n  {\n    \"name\": \"Sheikh Ahmed bin Mohammed bin Rashid Al Maktoum\",\n    \"relation\": \"brother\",\n    \"tags\": [\"Ø£Ø­Ù…Ø¯\", \"Ø£Ø®ÙŠ\", \"Ø±ÙÙŠÙ‚ Ø¯Ø±Ø¨\", \"Ø³Ù†Ø¯ÙŠ\", \"Ù†Ø§Ø¦Ø¨ Ø­Ø§ÙƒÙ… Ø¯Ø¨ÙŠ\"]\n  },\n  {\n    \"name\": \"Sheikh Rashid bin Mohammed bin Rashid Al Maktoum\",\n    \"relation\": \"brother (deceased)\",\n    \"tags\": [\"Ø±Ø§Ø´Ø¯\", \"Ø£Ø®ÙŠ\", \"Ø§Ù„ÙÙ‚ÙŠØ¯\", \"Ø±Ø­Ù…Ù‡ Ø§Ù„Ù„Ù‡\", \"Ø·ÙŠØ¨ Ø§Ù„Ù„Ù‡ Ø«Ø±Ø§Ù‡\", \"ÙÙŠ Ø°Ù…Ø© Ø§Ù„Ù„Ù‡\"]\n  },\n  {\n    \"name\": \"Sheikha Fatima bint Mubarak Al Ketbi\",\n    \"relation\": \"mother of UAE President\",\n    \"tags\": [\"ÙØ§Ø·Ù…Ø© Ø¨Ù†Øª Ù…Ø¨Ø§Ø±Ùƒ\", \"Ø£Ù… Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª\", \"Ø£Ù… Ø§Ù„Ø£Ù…Ø©\", \"Ø³ÙŠØ¯ØªÙŠ\", \"Ø§Ù„Ø£Ù…ÙŠØ±Ø©\"]\n  },\n  {\n    \"name\": \"Sheikh Hamdan bin Zayed Al Nahyan\",\n    \"relation\": \"brother of UAE President\",\n    \"tags\": [\"Ø­Ù…Ø¯Ø§Ù† Ø¨Ù† Ø²Ø§ÙŠØ¯\", \"Ø³ÙŠØ¯ÙŠ\", \"Ø£Ø®ÙŠ\", \"Ù…Ù…Ø«Ù„ Ø§Ù„Ø­Ø§ÙƒÙ…\", \"ØµØ§Ø­Ø¨ Ø§Ù„Ø³Ù…Ùˆ\"]\n  },\n  {\n    \"name\": \"Sheikh Mansour bin Zayed Al Nahyan\",\n    \"relation\": \"brother of UAE President\",\n    \"tags\": [\"Ù…Ù†ØµÙˆØ± Ø¨Ù† Ø²Ø§ÙŠØ¯\", \"Ø³ÙŠØ¯ÙŠ\", \"Ø£Ø®ÙŠ\", \"Ù†Ø§Ø¦Ø¨ Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\", \"ÙˆØ²ÙŠØ± Ø´Ø¤ÙˆÙ† Ø§Ù„Ø±Ø¦Ø§Ø³Ø©\", \"ØµØ§Ø­Ø¨ Ø§Ù„Ø³Ù…Ùˆ\"]\n  },\n  {\n    \"name\": \"Sheikh Tahnoun bin Zayed Al Nahyan\",\n    \"relation\": \"brother of UAE President\",\n    \"tags\": [\"Ø·Ø­Ù†ÙˆÙ† Ø¨Ù† Ø²Ø§ÙŠØ¯\", \"Ø³ÙŠØ¯ÙŠ\", \"Ø£Ø®ÙŠ\", \"Ù…Ø³ØªØ´Ø§Ø± Ø§Ù„Ø£Ù…Ù† Ø§Ù„ÙˆØ·Ù†ÙŠ\", \"ØµØ§Ø­Ø¨ Ø§Ù„Ø³Ù…Ùˆ\"]\n  },\n  {\n    \"name\": \"Sheikh Abdullah bin Zayed Al Nahyan\",\n    \"relation\": \"brother of UAE President\",\n    \"tags\": [\"Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ø²Ø§ÙŠØ¯\", \"Ø³ÙŠØ¯ÙŠ\", \"Ø£Ø®ÙŠ\", \"ÙˆØ²ÙŠØ± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©\", \"ØµØ§Ø­Ø¨ Ø§Ù„Ø³Ù…Ùˆ\"]\n  },\n  {\n    \"name\": \"King Salman bin Abdulaziz Al Saud\",\n    \"relation\": \"King of Saudi Arabia\",\n    \"tags\": [\"Ø³Ù„Ù…Ø§Ù†\", \"Ù…Ù„Ùƒ\", \"Ø®Ø§Ø¯Ù… Ø§Ù„Ø­Ø±Ù…ÙŠÙ† Ø§Ù„Ø´Ø±ÙŠÙÙŠÙ†\", \"Ù…Ù„Ùƒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©\", \"Ø£Ø®ÙŠ\", \"Ù‚Ø§Ø¦Ø¯\", \"Ø¬Ø§Ø±\"]\n  },\n  {\n    \"name\": \"Crown Prince Mohammed bin Salman\",\n    \"relation\": \"Crown Prince of Saudi Arabia\",\n    \"tags\": [\"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø³Ù„Ù…Ø§Ù†\", \"ÙˆÙ„ÙŠ Ø§Ù„Ø¹Ù‡Ø¯\", \"Ø£Ù…ÙŠØ±\", \"Ø£Ø®ÙŠ\", \"ØµØ¯ÙŠÙ‚\", \"Ø±ÙÙŠÙ‚\", \"Ù‚Ø§Ø¦Ø¯\"]\n  },\n  {\n    \"name\": \"Sheikh Tamim bin Hamad Al Thani\",\n    \"relation\": \"Emir of Qatar\",\n    \"tags\": [\"ØªÙ…ÙŠÙ…\", \"Ø£Ù…ÙŠØ±\", \"Ø£Ù…ÙŠØ± Ù‚Ø·Ø±\", \"Ø£Ø®ÙŠ\", \"Ø¬Ø§Ø±\", \"ØµØ¯ÙŠÙ‚\", \"Ù‚Ø§Ø¦Ø¯\"]\n  },\n  {\n    \"name\": \"King Hamad bin Isa Al Khalifa\",\n    \"relation\": \"King of Bahrain\",\n    \"tags\": [\"Ø­Ù…Ø¯\", \"Ù…Ù„Ùƒ\", \"Ù…Ù„Ùƒ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†\", \"Ø£Ø®ÙŠ\", \"Ø¬Ø§Ø±\", \"ØµØ¯ÙŠÙ‚\", \"Ù‚Ø§Ø¦Ø¯\"]\n  },\n  {\n    \"name\": \"Sheikh Mishal Al-Ahmad Al-Jaber Al-Sabah\",\n    \"relation\": \"Emir of Kuwait\",\n    \"tags\": [\"Ù…Ø´Ø¹Ù„\", \"Ø£Ù…ÙŠØ±\", \"Ø£Ù…ÙŠØ± Ø§Ù„ÙƒÙˆÙŠØª\", \"Ø£Ø®ÙŠ\", \"Ø¬Ø§Ø±\", \"ØµØ¯ÙŠÙ‚\", \"Ù‚Ø§Ø¦Ø¯\"]\n  },\n  {\n    \"name\": \"Sultan Haitham bin Tariq\",\n    \"relation\": \"Sultan of Oman\",\n    \"tags\": [\"Ù‡ÙŠØ«Ù…\", \"Ø³Ù„Ø·Ø§Ù†\", \"Ø³Ù„Ø·Ø§Ù† Ø¹Ù…Ø§Ù†\", \"Ø£Ø®ÙŠ\", \"Ø¬Ø§Ø±\", \"ØµØ¯ÙŠÙ‚\", \"Ù‚Ø§Ø¦Ø¯\"]\n  }\n]\n```\n\n### GROUPS\n```json\n[\n  \"martyrs\",\n  \"citizens\",\n  \"people of Emirates\",\n  \"soldiers\",\n  \"youth\",\n  \"founding fathers\"\n]\n```\n\n### PLACES\n```json\n[\n  {\"name\": \"Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª\", \"type\": \"Ø¯ÙˆÙ„Ø©\"},\n  {\"name\": \"Ø¯Ø¨ÙŠ\", \"type\": \"Ù…Ø¯ÙŠÙ†Ø©\"},\n  {\"name\": \"Ø£Ø¨ÙˆØ¸Ø¨ÙŠ\", \"type\": \"Ù…Ø¯ÙŠÙ†Ø©\"},\n  {\"name\": \"Ø¨Ø±Ø¬ Ø®Ù„ÙŠÙØ©\", \"type\": \"Ù…Ø¹Ù„Ù…\"},\n  {\"name\": \"Ø§Ù„Ø®Ù„ÙŠØ¬ Ø§Ù„Ø¹Ø±Ø¨ÙŠ\", \"type\": \"Ø·Ø¨ÙŠØ¹Ø©\"},\n  {\"name\": \"UAE\", \"type\": \"Ø¯ÙˆÙ„Ø©\"},\n  {\"name\": \"Emirates\", \"type\": \"Ø¯ÙˆÙ„Ø©\"},\n  {\"name\": \"Dubai\", \"type\": \"Ù…Ø¯ÙŠÙ†Ø©\"},\n  {\"name\": \"Abu Dhabi\", \"type\": \"Ù…Ø¯ÙŠÙ†Ø©\"},\n  {\"name\": \"Sharjah\", \"type\": \"Ù…Ø¯ÙŠÙ†Ø©\"},\n  {\"name\": \"Ajman\", \"type\": \"Ù…Ø¯ÙŠÙ†Ø©\"},\n  {\"name\": \"Umm Al-Quwain\", \"type\": \"Ù…Ø¯ÙŠÙ†Ø©\"},\n  {\"name\": \"Fujairah\", \"type\": \"Ù…Ø¯ÙŠÙ†Ø©\"},\n  {\"name\": \"Ras Al Khaimah\", \"type\": \"Ù…Ø¯ÙŠÙ†Ø©\"},\n  {\"name\": \"Arabian Gulf\", \"type\": \"Ø·Ø¨ÙŠØ¹Ø©\"},\n  {\"name\": \"Burj Khalifa\", \"type\": \"Ù…Ø¹Ù„Ù…\"},\n  {\"name\": \"Sheikh Zayed Mosque\", \"type\": \"Ù…Ø¹Ù„Ù…\"}\n]\n```\n\n### EVENTS\n```json\n[\n  {\"name\": \"ÙŠÙˆÙ… Ø§Ù„Ø´Ù‡ÙŠØ¯\", \"type\": \"ÙˆØ·Ù†ÙŠ\"},\n  {\"name\": \"Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ÙˆØ·Ù†ÙŠ\", \"type\": \"ÙˆØ·Ù†ÙŠ\"},\n  {\"name\": \"Ø±Ù…Ø¶Ø§Ù†\", \"type\": \"Ø¯ÙŠÙ†ÙŠ\"},\n  {\"name\": \"Ø¹ÙŠØ¯ Ø§Ù„ÙØ·Ø±\", \"type\": \"Ø¯ÙŠÙ†ÙŠ\"},\n  {\"name\": \"Expo 2020\", \"type\": \"Ø«Ù‚Ø§ÙÙŠ\"},\n  {\"name\": \"New Year's Day\", \"type\": \"Ø«Ù‚Ø§ÙÙŠ\"},\n  {\"name\": \"Eid al-Fitr\", \"type\": \"Ø¯ÙŠÙ†ÙŠ\"},\n  {\"name\": \"Eid al-Adha\", \"type\": \"Ø¯ÙŠÙ†ÙŠ\"},\n  {\"name\": \"Arafah Day\", \"type\": \"Ø¯ÙŠÙ†ÙŠ\"},\n  {\"name\": \"Islamic New Year\", \"type\": \"Ø¯ÙŠÙ†ÙŠ\"},\n  {\"name\": \"Prophet Muhammad's Birthday\", \"type\": \"Ø¯ÙŠÙ†ÙŠ\"},\n  {\"name\": \"Commemoration Day\", \"type\": \"ÙˆØ·Ù†ÙŠ\"},\n  {\"name\": \"UAE National Day\", \"type\": \"ÙˆØ·Ù†ÙŠ\"},\n  {\"name\": \"Flag Day\", \"type\": \"ÙˆØ·Ù†ÙŠ\"},\n  {\"name\": \"Union Day\", \"type\": \"ÙˆØ·Ù†ÙŠ\"},\n  {\"name\": \"Dubai Fitness Challenge\", \"type\": \"Ø«Ù‚Ø§ÙÙŠ\"},\n  {\"name\": \"Dubai Shopping Festival\", \"type\": \"Ø«Ù‚Ø§ÙÙŠ\"},\n  {\"name\": \"Dubai Summer Surprises\", \"type\": \"Ø«Ù‚Ø§ÙÙŠ\"},\n  {\"name\": \"Dubai Airshow\", \"type\": \"Ø«Ù‚Ø§ÙÙŠ\"},\n  {\"name\": \"Abu Dhabi Grand Prix\", \"type\": \"Ø«Ù‚Ø§ÙÙŠ\"},\n  {\"name\": \"Dubai World Cup\", \"type\": \"Ø«Ù‚Ø§ÙÙŠ\"}\n]\n```\n\n---\n\n## Few-Shot Examples\n\n### Example 1: Classical - High Confidence\n\n**Input**:\n```\nAnalyze this poem:\nÙ‚ÙØ§ Ù†Ø¨Ùƒ Ù…Ù† Ø°ÙƒØ±Ù‰ Ø­Ø¨ÙŠØ¨ ÙˆÙ…Ù†Ø²Ù„\nØ¨Ø³Ù‚Ø· Ø§Ù„Ù„ÙˆÙ‰ Ø¨ÙŠÙ† Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙØ­ÙˆÙ…Ù„\nÙØªÙˆØ¶Ø­ ÙØ§Ù„Ù…Ù‚Ø±Ø§Ø© Ù„Ù… ÙŠØ¹Ù Ø±Ø³Ù…Ù‡Ø§\nÙ„Ù…Ø§ Ù†Ø³Ø¬ØªÙ‡Ø§ Ù…Ù† Ø¬Ù†ÙˆØ¨ ÙˆØ´Ù…Ø£Ù„\n```\n\n**Output**:\n```json\n{\n  \"bahr\": {\n    \"name\": \"Ø§Ù„Ø·ÙˆÙŠÙ„\",\n    \"confidence\": 0.97,\n    \"alternatives\": []\n  },\n  \"qafiya\": {\n    \"rawi\": \"Ù„\",\n    \"wasl\": \"Ø§Ù„Ø£Ù„Ù\",\n    \"haraka\": \"ÙØªØ­Ø©\",\n    \"ta'sees\": false,\n    \"type\": \"Ù…Ø·Ù„Ù‚Ø©\",\n    \"confidence\": 0.96\n  },\n  \"sentiments\": [\n    \"Ø­Ù†ÙŠÙ†\",\n    \"Ø´ÙˆÙ‚\",\n    \"Ø­Ø²Ù†\"\n  ],\n  \"entities\": {\n    \"people\": [\n      {\n        \"name\": \"Ø­Ø¨ÙŠØ¨\",\n        \"relation\": \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\",\n        \"tags\": [\"Ø­Ø¨\", \"ØºØ²Ù„\"]\n      }\n    ],\n    \"places\": [\n      {\n        \"name\": \"Ø§Ù„Ù„ÙˆÙ‰\",\n        \"type\": \"Ø·Ø¨ÙŠØ¹Ø©\"\n      },\n      {\n        \"name\": \"Ø§Ù„Ø¯Ø®ÙˆÙ„\",\n        \"type\": \"Ø·Ø¨ÙŠØ¹Ø©\"\n      }\n    ],\n    \"events\": []\n  },\n  \"classification\": {\n    \"style\": \"ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ\"\n  },\n  \"overall_confidence\": 0.94\n}\n```\n\n---\n\n### Example 2: Modern - Medium Confidence\n\n**Input**:\n```\nAnalyze:\nØ¥Ø°Ø§ Ø§Ù„Ø´Ø¹Ø¨ ÙŠÙˆÙ…Ø§ Ø£Ø±Ø§Ø¯ Ø§Ù„Ø­ÙŠØ§Ø©\nÙÙ„Ø§ Ø¨Ø¯ Ø£Ù† ÙŠØ³ØªØ¬ÙŠØ¨ Ø§Ù„Ù‚Ø¯Ø±\nÙˆÙ„Ø§ Ø¨Ø¯ Ù„Ù„ÙŠÙ„ Ø£Ù† ÙŠÙ†Ø¬Ù„ÙŠ\nÙˆÙ„Ø§ Ø¨Ø¯ Ù„Ù„Ù‚ÙŠØ¯ Ø£Ù† ÙŠÙ†ÙƒØ³Ø±\n```\n\n**Output**:\n```json\n{\n  \"bahr\": {\n    \"name\": \"Ø§Ù„Ù…ØªÙ‚Ø§Ø±Ø¨\",\n    \"confidence\": 0.89,\n    \"alternatives\": []\n  },\n  \"qafiya\": {\n    \"rawi\": \"Ø±\",\n    \"wasl\": null,\n    \"haraka\": \"ÙØªØ­Ø©\",\n    \"ta'sees\": false,\n    \"type\": \"Ù…Ù‚ÙŠØ¯Ø©\",\n    \"confidence\": 0.94\n  },\n  \"sentiments\": [\n    \"Ø£Ù…Ù„\",\n    \"Ø¹Ø²ÙŠÙ…Ø©\",\n    \"ØªÙØ§Ø¤Ù„\"\n  ],\n  \"entities\": {\n    \"people\": [\n      {\n        \"name\": \"Ø§Ù„Ø´Ø¹Ø¨\",\n        \"relation\": \"Ø§Ù„Ø¬Ù…Ø§Ø¹Ø©\",\n        \"tags\": [\"Ø´Ø¹ÙˆØ¨\", \"Ø£Ù…Ø©\"]\n      }\n    ],\n    \"places\": [],\n    \"events\": []\n  },\n  \"classification\": {\n    \"style\": \"Ø­Ø¯ÙŠØ«\"\n  },\n  \"overall_confidence\": 0.87\n}\n```\n\n---\n\n### Example 3: UAE Context - High Confidence\n\n**Input**:\n```\nAnalyze this poem about Sheikh Zayed:\nØ²Ø§ÙŠØ¯ Ø§Ù„Ø®ÙŠØ± Ø¬Ù…Ø¹ Ø§Ù„ÙƒÙ„ ÙˆØ­Ø¯Ù†Ø§\nØ¨Ù†Ù‰ Ù„Ù†Ø§ ÙˆØ·Ù† Ø¹Ø²Ù†Ø§ ÙˆÙØ®Ø±Ù†Ø§\nØ§Ù„Ø¥Ù…Ø§Ø±Ø§Øª Ø£Ø±Ø¶ Ø§Ù„Ù…Ø¬Ø¯ ÙˆØ§Ù„ÙƒØ±Ù…\nÙˆØ§Ù„Ø´ÙŠØ® Ø²Ø§ÙŠØ¯ Ù‚Ø§Ø¦Ø¯Ù†Ø§ ÙˆÙ…Ø¹Ù„Ù…Ù†Ø§\n```\n\n**Output**:\n```json\n{\n  \"bahr\": {\n    \"name\": \"Ø§Ù„Ø±Ø¬Ø²\",\n    \"confidence\": 0.82,\n    \"alternatives\": [\n      {\n        \"name\": \"Ø§Ù„Ù…ØªØ¯Ø§Ø±Ùƒ\",\n        \"confidence\": 0.68\n      }\n    ]\n  },\n  \"qafiya\": {\n    \"rawi\": \"Ù†\",\n    \"wasl\": \"Ø§Ù„Ø£Ù„Ù\",\n    \"haraka\": \"ÙØªØ­Ø©\",\n    \"ta'sees\": false,\n    \"type\": \"Ù…Ø·Ù„Ù‚Ø©\",\n    \"confidence\": 0.93\n  },\n  \"sentiments\": [\n    \"ÙØ®Ø±\",\n    \"Ø§Ù…ØªÙ†Ø§Ù†\",\n    \"Ø­Ø¨\"\n  ],\n  \"entities\": {\n    \"people\": [\n      {\n        \"name\": \"Ø²Ø§ÙŠØ¯\",\n        \"relation\": \"Ø§Ù„Ù…Ø¤Ø³Ø³\",\n        \"tags\": [\"Ø²Ø§ÙŠØ¯\", \"Ø§Ù„Ù…Ø¤Ø³Ø³\", \"Ø§Ù„ÙˆØ§Ù„Ø¯ Ø§Ù„Ù…Ø¤Ø³Ø³\", \"Ø£Ø¨Ùˆ Ø§Ù„Ø£Ù…Ø©\", \"Ø§Ù„Ø¨Ø§Ù†ÙŠ\", \"Ø±Ø­Ù…Ù‡ Ø§Ù„Ù„Ù‡\", \"Ø·ÙŠØ¨ Ø§Ù„Ù„Ù‡ Ø«Ø±Ø§Ù‡\", \"Ø§Ù„Ù‚Ø§Ø¦Ø¯\"]\n      }\n    ],\n    \"places\": [\n      {\n        \"name\": \"Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª\",\n        \"type\": \"Ø¯ÙˆÙ„Ø©\"\n      }\n    ],\n    \"events\": []\n  },\n  \"classification\": {\n    \"style\": \"Ù…Ø¹Ø§ØµØ±\"\n  },\n  \"overall_confidence\": 0.88\n}\n```\n\n---\n\n### Example 4: Broken/Uncertain - Low Confidence\n\n**Input**:\n```\nAnalyze:\nØ£Ø­Ø¨Ùƒ Ø­Ø¨Ø§ Ù„Ùˆ ØªØ­Ø¨ÙŠÙ† Ù…Ø«Ù„Ù‡\nÙ„Ù…Øª Ù…Ù† Ø§Ù„ÙˆØ¬Ø¯ ÙˆÙ„ÙƒÙ† ØµØ¨Ø±Ø§\n```\n\n**Output**:\n```json\n{\n  \"bahr\": {\n    \"name\": \"ØºÙŠØ± Ù…Ø­Ø³ÙˆÙ…\",\n    \"confidence\": 0.42,\n    \"alternatives\": [\n      {\n        \"name\": \"Ø§Ù„Ø¨Ø³ÙŠØ·\",\n        \"confidence\": 0.38\n      },\n      {\n        \"name\": \"Ø§Ù„ÙƒØ§Ù…Ù„\",\n        \"confidence\": 0.34\n      }\n    ]\n  },\n  \"qafiya\": {\n    \"rawi\": \"ØºÙŠØ± Ù…Ø­Ø³ÙˆÙ…Ø©\",\n    \"wasl\": null,\n    \"haraka\": \"ØºÙŠØ± Ù…Ø­Ø³ÙˆÙ…Ø©\",\n    \"ta'sees\": false,\n    \"type\": \"ØºÙŠØ± Ù…Ø­Ø³ÙˆÙ…Ø©\",\n    \"confidence\": 0.31\n  },\n  \"sentiments\": [\n    \"Ø­Ø¨\",\n    \"ÙˆØ¬Ø¯\",\n    \"ØµØ¨Ø±\"\n  ],\n  \"entities\": {\n    \"people\": [\n      {\n        \"name\": \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\",\n        \"relation\": \"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨Ø©\",\n        \"tags\": [\"Ø£Ù†Øª\", \"Ø­Ø¨ÙŠØ¨Ø©\"]\n      }\n    ],\n    \"places\": [],\n    \"events\": []\n  },\n  \"classification\": {\n    \"style\": \"ØºÙŠØ± Ù…Ø­Ø¯Ø¯\"\n  },\n  \"overall_confidence\": 0.53\n}\n```\n\n---\n\n## Pre-Output Checklist\n\nBefore returning, verify:\n- [ ] All text values are 100% Arabic (except confidence floats)\n- [ ] JSON is valid and parseable\n- [ ] Bahr based on FULL poem context\n- [ ] Qafiya based on ALL verse endings\n- [ ] Confidence scores justified\n- [ ] \"ØºÙŠØ± Ù…Ø­Ø³ÙˆÙ…/ØºÙŠØ± Ù…Ø­Ø³ÙˆÙ…Ø©\" used when uncertain\n- [ ] Entities cross-referenced with dictionaries\n- [ ] No hallucinated data\n- [ ] No prose or explanations\n\n---\n\n## BATCH PROCESSING MODE\n\nWhen input contains multiple lines with row_id tags (e.g., \"269\": \"line text\"), process in batch mode:\n\n### Input Format:\n```\n# poem name: [title]\n## Analyze these lines individually:\nlines: \"1\":\"line text\",\n\"2\":\"line text\",\n\"3\":\"line text\"\n## after checking the full poetry: [full poem text]\n```\n\n**CRITICAL**: When you see lines formatted as `\"1\":\"text\", \"2\":\"text\"`, extract the number before the colon as `row_id` and process EACH line separately. Return JSON array with one object per line.\n\n### Batch Processing Rules:\n1. **bahr** and **qafiya**: Analyze ONCE from full poem context (same for all lines)\n2. **sentiments**: Extract from EACH individual line (line-specific)\n3. **entities**: Extract ONLY from EACH specific line (not from full poem)\n4. **row_id**: Must match exactly from input (as integer)\n5. **line_confidence**: Calculate per line based on sentiment/entity extraction quality\n\n### Batch Output Schema:\n```json\n[\n  {\n    \"row_id\": 269,\n    \"bahr\": {\n      \"name\": \"string (AR)\",\n      \"confidence\": 0.0-1.0,\n      \"alternatives\": [{\"name\": \"string (AR)\", \"confidence\": 0.0-1.0}]\n    },\n    \"qafiya\": {\n      \"rawi\": \"string (AR)\",\n      \"wasl\": \"string (AR) or null\",\n      \"haraka\": \"ÙØªØ­Ø©/Ø¶Ù…Ø©/ÙƒØ³Ø±Ø©/Ø³ÙƒÙˆÙ†\",\n      \"ta'sees\": boolean,\n      \"type\": \"Ù…Ø·Ù„Ù‚Ø©/Ù…Ù‚ÙŠØ¯Ø©/Ù…Ø±Ø¯ÙØ©/Ù…Ø¤Ø³Ø³Ø©\",\n      \"confidence\": 0.0-1.0\n    },\n    \"sentiments\": [\"string (AR)\"],\n    \"entities\": {\n      \"people\": [{\"name\": \"string (AR)\", \"relation\": \"string (AR)\", \"tags\": [\"string (AR)\"]}],\n      \"places\": [{\"name\": \"string (AR)\", \"type\": \"Ø¯ÙˆÙ„Ø©/Ù…Ø¯ÙŠÙ†Ø©/Ù…Ø¹Ù„Ù…/Ø·Ø¨ÙŠØ¹Ø©\"}],\n      \"events\": [{\"name\": \"string (AR)\", \"type\": \"Ø¯ÙŠÙ†ÙŠ/ÙˆØ·Ù†ÙŠ/Ø«Ù‚Ø§ÙÙŠ/ØªØ§Ø±ÙŠØ®ÙŠ\"}]\n    },\n    \"classification\": {\n      \"style\": \"ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ/Ø­Ø¯ÙŠØ«/Ù…Ø¹Ø§ØµØ±\"\n    },\n    \"line_confidence\": 0.0-1.0\n  },\n  {\n    \"row_id\": 270,\n    ...\n  }\n]\n```\n\n### Batch Example:\n\n**Input**:\n```\n# poem name: Ù„Ø§ ØªØ³Ø§Ù„ Ù…Ø¬Ø±Ø¨\n## Analyze these lines individually:\nlines: \"1\":\"Ø­Ø¨ÙŠØ¨ØªÙŠ Ø­Ø§Ù„ÙŠ Ù…Ù† Ø§Ù„Ø´ÙˆÙ‚ Ø¯Ø§Ù†ÙŠ      Ø§Ø´Ø±Ù‚ Ø¨Ø­Ø¨Ùƒ .. ÙˆØ§Ø¹ÙˆØ¯ Ø§ØºØ±Ø¨\",\n\"2\":\"Ø§Ù†Ø§Ù†ÙŠ Ù ÙˆØµÙ„Ùƒ Ù„ÙƒÙ† ÙŠØ§Ù„Ø§Ù†Ø§Ù†ÙŠ      ØªØ±ÙŠ Ø§Ù„Ø§Ù†Ø§Ù†ÙŠÙ‡ Ù Ø·Ø¨Ø¹Ùƒ ØªØ®Ø±Ø¨\",\n\"3\":\"Ù„Ø­Ø¸Ø§Øª Ø­Ø¨Ùƒ Ø­Ø·Ù…Øª Ù„ÙŠ ÙƒÙŠØ§Ù†ÙŠ      ÙˆØ§Ù„Ø­Ø²Ù† Ù…Ù† Ø¨ÙŠÙ† Ø§Ù„Ù…Ø­Ø§Ù†ÙŠ ØªØ³Ø±Ø¨\"\n## after checking the full poetry: \nØ­Ø¨ÙŠØ¨ØªÙŠ Ø­Ø§Ù„ÙŠ Ù…Ù† Ø§Ù„Ø´ÙˆÙ‚ Ø¯Ø§Ù†ÙŠ      Ø§Ø´Ø±Ù‚ Ø¨Ø­Ø¨Ùƒ .. ÙˆØ§Ø¹ÙˆØ¯ Ø§ØºØ±Ø¨\nØ§Ù†Ø§Ù†ÙŠ Ù ÙˆØµÙ„Ùƒ Ù„ÙƒÙ† ÙŠØ§Ù„Ø§Ù†Ø§Ù†ÙŠ      ØªØ±ÙŠ Ø§Ù„Ø§Ù†Ø§Ù†ÙŠÙ‡ Ù Ø·Ø¨Ø¹Ùƒ ØªØ®Ø±Ø¨\nÙ„Ø­Ø¸Ø§Øª Ø­Ø¨Ùƒ Ø­Ø·Ù…Øª Ù„ÙŠ ÙƒÙŠØ§Ù†ÙŠ      ÙˆØ§Ù„Ø­Ø²Ù† Ù…Ù† Ø¨ÙŠÙ† Ø§Ù„Ù…Ø­Ø§Ù†ÙŠ ØªØ³Ø±Ø¨\n```\n\n**Output**:\n```json\n[\n  {\n    \"row_id\": 1,\n    \"bahr\": {\"name\": \"Ø§Ù„ÙƒØ§Ù…Ù„\", \"confidence\": 0.88, \"alternatives\": []},\n    \"qafiya\": {\"rawi\": \"Ø¨\", \"wasl\": null, \"haraka\": \"Ø¶Ù…Ø©\", \"ta'sees\": false, \"type\": \"Ù…Ù‚ÙŠØ¯Ø©\", \"confidence\": 0.92},\n    \"sentiments\": [\"Ø´ÙˆÙ‚\", \"Ø­Ø¨\"],\n    \"entities\": {\"people\": [{\"name\": \"Ø­Ø¨ÙŠØ¨ØªÙŠ\", \"relation\": \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\", \"tags\": [\"Ø­Ø¨\", \"ØºØ²Ù„\"]}], \"places\": [], \"events\": []},\n    \"classification\": {\"style\": \"Ù…Ø¹Ø§ØµØ±\"},\n    \"line_confidence\": 0.85\n  },\n  {\n    \"row_id\": 2,\n    \"bahr\": {\"name\": \"Ø§Ù„ÙƒØ§Ù…Ù„\", \"confidence\": 0.88, \"alternatives\": []},\n    \"qafiya\": {\"rawi\": \"Ø¨\", \"wasl\": null, \"haraka\": \"Ø¶Ù…Ø©\", \"ta'sees\": false, \"type\": \"Ù…Ù‚ÙŠØ¯Ø©\", \"confidence\": 0.92},\n    \"sentiments\": [\"Ø­Ø²Ù†\", \"Ø£Ù„Ù…\"],\n    \"entities\": {\"people\": [{\"name\": \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\", \"relation\": \"Ø§Ù„Ù…Ø®Ø§Ø·Ø¨Ø©\", \"tags\": [\"Ø£Ù†Øª\", \"ÙˆØµÙ„Ùƒ\", \"Ø·Ø¨Ø¹Ùƒ\"]}], \"places\": [], \"events\": []},\n    \"classification\": {\"style\": \"Ù…Ø¹Ø§ØµØ±\"},\n    \"line_confidence\": 0.82\n  },\n  {\n    \"row_id\": 3,\n    \"bahr\": {\"name\": \"Ø§Ù„ÙƒØ§Ù…Ù„\", \"confidence\": 0.88, \"alternatives\": []},\n    \"qafiya\": {\"rawi\": \"Ø¨\", \"wasl\": null, \"haraka\": \"Ø¶Ù…Ø©\", \"ta'sees\": false, \"type\": \"Ù…Ù‚ÙŠØ¯Ø©\", \"confidence\": 0.92},\n    \"sentiments\": [\"Ø­Ø²Ù†\", \"ÙˆØ¬Ø¯\"],\n    \"entities\": {\"people\": [{\"name\": \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\", \"relation\": \"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨Ø©\", \"tags\": [\"Ø­Ø¨Ùƒ\"]}], \"places\": [], \"events\": []},\n    \"classification\": {\"style\": \"Ù…Ø¹Ø§ØµØ±\"},\n    \"line_confidence\": 0.80\n  }\n]\n```\n\n### CRITICAL Batch Rules:\n- Return valid JSON array with square brackets `[...]`\n- Each object must have row_id matching input\n- bahr/qafiya identical for all lines (from full poem)\n- sentiments/entities specific to each line only\n- **Tags should capture ALL thematic keywords:** people groups (Ø§Ù„Ø±ÙˆØ§Ø©, Ø§Ù„Ø´Ø¹Ø¨), cultural terms (Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ø¹Ø±Ø¨ÙŠ, Ø§Ù„Ù‚ØµØµ), and entity references\n- Empty arrays valid if no entities found in specific line\n- Do NOT extract entities from full poem if not in specific line\n\n---\n\n## You ARE\n- A strict analytical engine\n- Accuracy-focused\n- Context-aware\n- JSON-producing\n- Arabic-outputting\n\n## You are NOT\n- A creative poet\n- A translator\n- An explainer\n- A conversationalist\n\n---\n\n**Output valid JSON only. No markdown. No prose. Arabic values only.**\n# if any other entity/place/people/objects are found please extract them"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        -1504,
        -1200
      ],
      "id": "ed7e4bd8-37d4-4d70-b835-a010d2222fe0",
      "name": "AI Agent1"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\nif (!Array.isArray(items) || items.length === 0) {\n  return [{ json: { error: \"No input items\" } }];\n}\n\nconst result = items.flatMap((item) => {\n  const outputStr = item.json?.output ?? '';\n\n  if (!outputStr) return [];\n\n  const jsonMatch = outputStr.match(/```json\\s*([\\s\\S]*?)\\s*```/);\n  const cleanJsonStr = jsonMatch ? jsonMatch[1].trim() : outputStr.trim();\n\n  if (!cleanJsonStr) return [];\n\n  let parsedArray;\n  try {\n    parsedArray = JSON.parse(cleanJsonStr);\n  } catch (e) {\n    return [{ Row_ID: \"error\", summary: { parse_error: e.message } }];\n  }\n\n  if (!Array.isArray(parsedArray)) return [];\n\n  return parsedArray.map((entry) => {\n    const allTags = (entry.entities?.people || [])\n      .flatMap((p) => p.tags || [])\n      .filter((tag, i, arr) => arr.indexOf(tag) === i);\n\n    const peopleWithoutTags = (entry.entities?.people || []).map((p) => ({\n      name: p.name,\n      relation: p.relation,\n    }));\n\n    return {\n      Row_ID: String(entry.row_id),\n      summary: {\n        row_id: entry.row_id,\n        bahr: entry.bahr,\n        qafiya: entry.qafiya,\n        sentiments: entry.sentiments,\n        entities: {\n          people: peopleWithoutTags,\n          places: entry.entities?.places || [],\n          events: entry.entities?.events || [],\n        },\n        tags: allTags,\n        classification: entry.classification,\n        line_confidence: entry.line_confidence,\n      },\n    };\n  });\n});\n\nreturn result.map((obj) => ({ json: obj }));"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1152,
        -1200
      ],
      "id": "d1ac5020-f937-4798-9e2e-b518da059fd4",
      "name": "Code in JavaScript3"
    },
    {
      "parameters": {
        "batchSize": 5,
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -1728,
        -1088
      ],
      "id": "475e95b7-27c7-4d9e-aba3-1b8fbb5856cf",
      "name": "Loop Over Items1",
      "executeOnce": false
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "279676cb-1fba-4c26-8113-6173dc9cdbc8",
              "name": "Title_cleaned",
              "value": "={{ $json.Title_cleaned }}",
              "type": "string"
            },
            {
              "id": "a13eaf7d-5c67-4489-9ad0-9e7b61cfae78",
              "name": "Poem_line_cleaned",
              "value": "={{ $json.Poem_line_cleaned }}",
              "type": "string"
            },
            {
              "id": "017bad73-a782-4b01-bfb4-dca3e3799dce",
              "name": "poem_id",
              "value": "={{ $json.poem_id }}",
              "type": "number"
            },
            {
              "id": "941495f8-597e-404e-8465-5462fbf37c91",
              "name": "Poem_full",
              "value": "={{ $json.Poem_full }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1952,
        -1088
      ],
      "id": "9b563430-2af9-423a-9a09-76325682177e",
      "name": "Original_Dataset1"
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w",
          "mode": "list",
          "cachedResultName": "FAZ_POEMS_REVIEW",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1836724327,
          "mode": "list",
          "cachedResultName": "Exact_lines",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit#gid=1836724327"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Row_ID": "={{ $json.summary.row_id }}",
            "Ù‚Ø§ÙÙŠØ©": "={{ $json.summary.qafiya.rawi }}",
            "Ø§Ù„Ø¨Ø­Ø±": "={{ $json.summary.bahr.name }}",
            "ÙˆØµÙ„": "={{ $json.summary.qafiya.wasl }}",
            "Ø­Ø±ÙƒØ©": "={{ $json.summary.qafiya.haraka }}",
            "ØªØ£Ø³ÙŠØ³": "={{ $json.summary.qafiya['ta\\'sees'] }}",
            "Ù†ÙˆØ¹": "={{ $json.summary.qafiya.type }}",
            "Ø«Ù‚Ø©": "={{ $json.summary.qafiya.confidence }}",
            "Ø£Ù…Ø§ÙƒÙ†": "={{ $json.summary.entities.places }}",
            "Ø£Ø­Ø¯Ø§Ø«": "={{ $json.summary.entities.events }}",
            "Ø´Ø®Øµ": "={{ $json.summary.entities.people }}",
            "sentiments": "={{ $json.summary.sentiments }}",
            "ØªØµÙ†ÙŠÙ": "={{ $json.summary.classification.style }}",
            "overall confidence": "={{ $json.summary.line_confidence }}",
            "Ù…ÙˆØ§Ø¶ÙŠØ¹": "={{ $json.summary.tags }}",
            "Ø¨Ø­Ø± Ø«Ù‚Ø©": "={{ $json.summary.bahr.confidence }}"
          },
          "matchingColumns": [
            "Row_ID"
          ],
          "schema": [
            {
              "id": "poem_id",
              "displayName": "poem_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Row_ID",
              "displayName": "Row_ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Title_raw",
              "displayName": "Title_raw",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Poem_line_raw",
              "displayName": "Poem_line_raw",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "summary",
              "displayName": "summary",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Title_cleaned",
              "displayName": "Title_cleaned",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Poem_line_cleaned",
              "displayName": "Poem_line_cleaned",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Ù‚Ø§ÙÙŠØ©",
              "displayName": "Ù‚Ø§ÙÙŠØ©",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Ø§Ù„Ø¨Ø­Ø±",
              "displayName": "Ø§Ù„Ø¨Ø­Ø±",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Ø¨Ø­Ø± Ø«Ù‚Ø©",
              "displayName": "Ø¨Ø­Ø± Ø«Ù‚Ø©",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ÙˆØµÙ„",
              "displayName": "ÙˆØµÙ„",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Ø­Ø±ÙƒØ©",
              "displayName": "Ø­Ø±ÙƒØ©",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "ØªØ£Ø³ÙŠØ³",
              "displayName": "ØªØ£Ø³ÙŠØ³",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Ù†ÙˆØ¹",
              "displayName": "Ù†ÙˆØ¹",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Ø«Ù‚Ø©",
              "displayName": "Ø«Ù‚Ø©",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Ø´Ø®Øµ",
              "displayName": "Ø´Ø®Øµ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "sentiments",
              "displayName": "sentiments",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Ø£Ù…Ø§ÙƒÙ†",
              "displayName": "Ø£Ù…Ø§ÙƒÙ†",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Ø£Ø­Ø¯Ø§Ø«",
              "displayName": "Ø£Ø­Ø¯Ø§Ø«",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Ù…ÙˆØ§Ø¶ÙŠØ¹",
              "displayName": "Ù…ÙˆØ§Ø¶ÙŠØ¹",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ØªØµÙ†ÙŠÙ",
              "displayName": "ØªØµÙ†ÙŠÙ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "overall confidence",
              "displayName": "overall confidence",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -928,
        -1200
      ],
      "id": "320928d3-7f80-49de-848b-f8dea8220222",
      "name": "Append or update row in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "OV5c4nxTt4atkgGW",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w",
          "mode": "list",
          "cachedResultName": "FAZ_POEMS_REVIEW",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 179938127,
          "mode": "list",
          "cachedResultName": "grouped_lines_for_AI",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit#gid=179938127"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Stuatus": "Done",
            "poem_id": "={{ $('Loop Over Items1').first().json.poem_id }}"
          },
          "matchingColumns": [
            "poem_id"
          ],
          "schema": [
            {
              "id": "poem_id",
              "displayName": "poem_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Title_cleaned",
              "displayName": "Title_cleaned",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Poem_full",
              "displayName": "Poem_full",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Poem_line_cleaned",
              "displayName": "Poem_line_cleaned",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Stuatus",
              "displayName": "Stuatus",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -704,
        -1088
      ],
      "id": "f8c70d3a-9d30-4ee3-b4ae-b56192dc0014",
      "name": "Append or update row in sheet1",
      "executeOnce": false,
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "OV5c4nxTt4atkgGW",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "model": "grok-4-1-fast-non-reasoning",
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatXAiGrok",
      "typeVersion": 1,
      "position": [
        -1424,
        -976
      ],
      "id": "0d6c7c1d-8796-4e40-88a6-5776d55bbe00",
      "name": "xAI Grok Chat Model",
      "credentials": {
        "xAiApi": {
          "id": "8xuEmNzOUuELUh3f",
          "name": "xAi account"
        }
      }
    },
    {
      "parameters": {
        "content": "## Summarize\n"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2528,
        -1440
      ],
      "typeVersion": 1,
      "id": "d094d3bd-b632-4e03-a32f-ab534b52e244",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "## Qafiya sentiments\n"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2544,
        -1088
      ],
      "typeVersion": 1,
      "id": "8858fb31-111f-4802-839e-8b1a3633f8ac",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w",
          "mode": "list",
          "cachedResultName": "FAZ_POEMS_REVIEW",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1836724327,
          "mode": "list",
          "cachedResultName": "Exact_lines",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit#gid=1836724327"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Status",
              "lookupValue": "Ready"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -2208,
        -704
      ],
      "id": "ab46a032-418c-49bf-a79f-9afecaffeaa2",
      "name": "Get row(s) in sheet2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "OV5c4nxTt4atkgGW",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=\nTASK: Analyze each line below individually.\n\nPoem title: {{ $json.poem }}\n\nLines to process:\n{{ $json.contents_tagged }}\n\nINSTRUCTIONS:\n- Extract sentiments and entities from EACH individual line\n- Include pronouns (Ø£Ù†ØªØŒ Ù€ÙƒØŒ Ù€Ù‡Ø§) as people entities\n- Return JSON array with row_id for each line\n\nOUTPUT FORMAT: Valid JSON array [ {\"row_id\": 1, ...}, {\"row_id\": 2, ...} ]",
        "options": {
          "systemMessage": "=# Arabic Poetry Analysis Agent - Minimal Fields (Production)\n## Core Function\nAnalyze Arabic poetry. Output JSON with **only** sentiments and entities (people, places, events).\n## Input â†’ Output\n- Input: English with embedded Arabic poetry (3-5 lines)\n- Output: Valid JSON, 100% Arabic values (except confidence floats)\n## Critical Rules\n1. **Arabic only** in all text fields\n2. **Full poem context** for analysis, but extract per line in batch mode\n3. **\"ØºÙŠØ± Ù…Ø­Ø³ÙˆÙ…\"** if confidence < 0.6\n4. **No hallucination** - accuracy > completion; only extract what is explicitly mentioned or directly inferred without invention\n5. **Valid JSON only** - no prose, no markdown\n---\n## Analysis Requirements\n### 1. SENTIMENTS - REQUIRED\n**Extract 1-3 dominant emotions from the poem.**\n**Categories**:\n- **Positive**: ÙØ±Ø­ØŒ Ø­Ø¨ØŒ Ø£Ù…Ù„ØŒ ÙØ®Ø±ØŒ Ø§Ù…ØªÙ†Ø§Ù†ØŒ Ø³Ø¹Ø§Ø¯Ø©\n- **Negative**: Ø­Ø²Ù†ØŒ Ø£Ù„Ù…ØŒ ØºØ¶Ø¨ØŒ ÙŠØ£Ø³ØŒ Ø­Ø³Ø±Ø©ØŒ ØºÙ…\n- **Complex**: Ø´ÙˆÙ‚ (longing), Ø­Ù†ÙŠÙ† (nostalgia), ÙˆØ¬Ø¯ (passion)\n- **Neutral**: ØªØ£Ù…Ù„ØŒ Ø­ÙƒÙ…Ø©ØŒ Ø³Ø±Ø¯\n**Output**: Array of Arabic strings (max 3)\n---\n### 2. ENTITIES - REQUIRED\n**Extract mentioned entities aggressively, cross-reference with dictionaries provided. Infer broadly from context but without hallucination: capture all explicit references to people (including generic, hypothetical, collective, pronouns, possessives, body parts as attributes e.g., Ø®ØµØ±Ùƒ, Ø±Ù…Ø´Ùƒ, Ø®ØµÙˆØ±, qualities e.g., Ø§Ù„Ø§Ø±Ù‚, Ø§Ù„Ø±Ø§Ù‚ÙŠ, Ø£Ù†Ø§Ù†ÙŠ, and types e.g., Ø¹Ø§Ù‚Ù„, Ø³ÙÙŠÙ‡, Ù…Ø¬Ø±Ø¨, Ù…Ø¹Ø±Ø¨). These dictionaries are the actual full listsâ€”aggressively hunt for matches in the poem using names, tags, and aliases. If a term matches a tag, include the full entity. Use tags to list ALL associated terms, body parts, qualities, types, and references explicitly mentioned, not limited to examples. Group attributes under relevant people entities (e.g., under Ø§Ù„Ø­Ø¨ÙŠØ¨Ø© in ØºØ²Ù„). If not associated, create separate people entities for generics/types like Ø¹Ø§Ù‚Ù„, Ø³ÙÙŠÙ‡.**\n#### 2a. PEOPLE\n- Extract names + familial terms (Ø£Ø¨ØŒ Ø£Ù…ØŒ Ø§Ø¨Ù†ØŒ Ø£Ø®)\n- Extract titles (Ø´ÙŠØ®ØŒ Ø£Ù…ÙŠØ±ØŒ Ù…Ù„ÙƒØŒ Ø³Ù„Ø·Ø§Ù†)\n- **Extract collective nouns referring to people:**\n  - Groups: Ø§Ù„Ø´Ø¹Ø¨ØŒ Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ØŒ Ø§Ù„Ø±ÙˆØ§Ø©ØŒ Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡ØŒ Ø§Ù„Ù†Ø§Ø³ØŒ Ø§Ù„Ù‚ÙˆÙ…\n  - Professions: Ø§Ù„Ø·Ø¨ÙŠØ¨ØŒ Ø§Ù„Ù…Ø¹Ù„Ù…ØŒ Ø§Ù„Ø¬Ù†Ø¯ÙŠØŒ etc.\n  - Generic references: Ø§Ù„Ø±Ø¬Ù„ØŒ Ø§Ù„Ù…Ø±Ø£Ø©ØŒ Ø§Ù„Ù†Ø§Ù‚Ù„ÙˆÙ†, Ø¹Ø§Ù‚Ù„, Ø³ÙÙŠÙ‡\n- **Extract pronouns and possessive suffixes that refer to people:**\n  - Ø£Ù†ØªØŒ Ø£Ù†ØªÙØŒ Ù‡ÙˆØŒ Ù‡ÙŠ (you, he, she)\n  - Possessive suffixes: Ù€ÙƒØŒ Ù€ÙƒÙ (your), Ù€Ù‡ØŒ Ù€Ù‡Ø§ (his, her)\n  - Examples: \"Ø­Ø¨Ùƒ\" = Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©, \"ÙˆØµÙ„Ùƒ\" = Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©, \"Ù‚Ù„Ø¨Ù‡\" = Ø§Ù„Ù…Ø°ÙƒÙˆØ±\n- **In love poetry (ØºØ²Ù„):** All 2nd person references (Ø£Ù†Øª/Ù€Ùƒ/Ù€ÙƒÙ) default to \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" or \"Ø§Ù„Ø­Ø¨ÙŠØ¨\". Aggressively include body parts (Ø®ØµØ±, Ø±Ù…Ø´, Ø¹ÙŠÙ†, Ù‚Ù„Ø¨, Ø¹Ø±ÙˆÙ‚) and qualities (Ø£Ø±Ù‚, Ø±Ø§Ù‚ÙŠ, Ø£Ù†Ø§Ù†ÙŠ) as tags.\n- Match to entity dictionary when possible\n- Resolve pronouns to the entity they reference (e.g., \"Ø£Ù†Øª\" â†’ \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" in ØºØ²Ù„ context)\n**Output**:\n```json\n{\n  \"name\": \"string (AR) - Ø§Ù„Ø§Ø³Ù… or Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©/Ø§Ù„Ø­Ø¨ÙŠØ¨ for pronouns\",\n  \"relation\": \"string (AR) - Ø§Ù„Ø¹Ù„Ø§Ù‚Ø©/Ø§Ù„Ø¯ÙˆØ± (e.g., Ø¬Ù…Ø§Ø¹Ø© for groups)\",\n  \"tags\": [\"AR array - keywords, body parts, qualities, types\"]\n}\n```\n#### 2b. PLACES\n- Extract: cities, countries, landmarks, natural features\n- **Extract cultural/abstract locations:**\n  - Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ (society), Ø§Ù„Ø«Ù‚Ø§ÙØ© (culture), Ø§Ù„Ø¹Ø§Ù„Ù… (world)\n  - Ø§Ù„ÙˆØ·Ù† (homeland), Ø§Ù„Ø¯ÙŠØ§Ø± (abode), Ø§Ù„Ø£Ø±Ø¶ (land)\n- Match to entity dictionary when possible, aggressively hunt for matches\n**Output**:\n```json\n{\n  \"name\": \"string (AR) - Ø§Ù„Ù…ÙƒØ§Ù†\",\n  \"type\": \"Ø¯ÙˆÙ„Ø©/Ù…Ø¯ÙŠÙ†Ø©/Ù…Ø¹Ù„Ù…/Ø·Ø¨ÙŠØ¹Ø©/Ø«Ù‚Ø§ÙØ©\"\n}\n```\n#### 2c. EVENTS\n- Extract: holidays, occasions, historical events\n- Match to entity dictionary when possible, aggressively hunt for matches\n**Output**:\n```json\n{\n  \"name\": \"string (AR) - Ø§Ù„Ø­Ø¯Ø«\",\n  \"type\": \"Ø¯ÙŠÙ†ÙŠ/ÙˆØ·Ù†ÙŠ/Ø«Ù‚Ø§ÙÙŠ/ØªØ§Ø±ÙŠØ®ÙŠ\"\n}\n```\n---\n## Output Schema (STRICT)\n```json\n{\n  \"sentiments\": [\n    \"string (AR)\",\n    \"string (AR)\",\n    \"string (AR)\"\n  ],\n  \"entities\": {\n    \"people\": [\n      {\n        \"name\": \"string (AR)\",\n        \"relation\": \"string (AR)\",\n        \"tags\": [\"string (AR)\"]\n      }\n    ],\n    \"places\": [\n      {\n        \"name\": \"string (AR)\",\n        \"type\": \"Ø¯ÙˆÙ„Ø©/Ù…Ø¯ÙŠÙ†Ø©/Ù…Ø¹Ù„Ù…/Ø·Ø¨ÙŠØ¹Ø©\"\n      }\n    ],\n    \"events\": [\n      {\n        \"name\": \"string (AR)\",\n        \"type\": \"Ø¯ÙŠÙ†ÙŠ/ÙˆØ·Ù†ÙŠ/Ø«Ù‚Ø§ÙÙŠ/ØªØ§Ø±ÙŠØ®ÙŠ\"\n      }\n    ]\n  },\n  \"overall_confidence\": 0.0-1.0\n}\n```\n---\n## Confidence Calculation\n```\nBase confidence = 1.0\nDeduct if:\n- Inconsistent extraction: -0.3\n- <3 lines: -0.2\n- Heavy corruption: -0.3\nMinimum: 0.0\n```\n**Levels**:\n- Ø¹Ø§Ù„ÙŠØ© (High): 0.85-1.0\n- Ù…ØªÙˆØ³Ø·Ø© (Medium): 0.60-0.84\n- Ù…Ù†Ø®ÙØ¶Ø© (Low): <0.60 â†’ \"ØºÙŠØ± Ù…Ø­Ø³ÙˆÙ…\"\n---\n# if any other entity/place/people/objects are found please extract them as attributes in tags or separate entities if generics/types\n## Entity Dictionary Reference\n### PEOPLE (Full Dictionary - Aggressively match using tags/aliases)\n```json\n[\n  {\n    \"name_ar\": \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\",\n    \"name_en\": \"Sheikh Mohammed bin Rashid Al Maktoum\",\n    \"relation\": \"Ø§Ù„Ø£Ø¨\",\n    \"tags\": [\"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯\", \"Ø£Ø¨ÙŠ\", \"ÙˆØ§Ù„Ø¯ÙŠ\", \"Ù‚Ø§Ø¦Ø¯ÙŠ\", \"Ø³ÙŠØ¯ÙŠ\", \"Ù…Ø¹Ù„Ù…ÙŠ\", \"Ø­Ø§ÙƒÙ… Ø¯Ø¨ÙŠ\", \"Ù†Ø§Ø¦Ø¨ Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\", \"Ø±Ø¦ÙŠØ³ Ø§Ù„ÙˆØ²Ø±Ø§Ø¡\", \"ØµØ§Ø­Ø¨ Ø§Ù„Ø³Ù…Ùˆ\"]\n  },\n  {\n    \"name_ar\": \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\",\n    \"name_en\": \"Mohamed bin Zayed Al Nahyan\",\n    \"relation\": \"Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\",\n    \"tags\": [\"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯\", \"Ù‚Ø§Ø¦Ø¯ÙŠ\", \"Ø³ÙŠØ¯ÙŠ\", \"Ø¨Ùˆ Ø®Ø§Ù„Ø¯\", \"Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\", \"Ø­Ø§ÙƒÙ… Ø£Ø¨ÙˆØ¸Ø¨ÙŠ\", \"ØµØ§Ø­Ø¨ Ø§Ù„Ø³Ù…Ùˆ\"]\n  },\n  {\n    \"name_ar\": \"Ø²Ø§ÙŠØ¯ Ø¨Ù† Ø³Ù„Ø·Ø§Ù† Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\",\n    \"name_en\": \"Sheikh Zayed bin Sultan Al Nahyan\",\n    \"relation\": \"Ø§Ù„Ù…Ø¤Ø³Ø³\",\n    \"tags\": [\"Ø²Ø§ÙŠØ¯\", \"Ø§Ù„Ù…Ø¤Ø³Ø³\", \"Ø§Ù„ÙˆØ§Ù„Ø¯ Ø§Ù„Ù…Ø¤Ø³Ø³\", \"Ø£Ø¨Ùˆ Ø§Ù„Ø£Ù…Ø©\", \"Ø§Ù„Ø¨Ø§Ù†ÙŠ\", \"Ø±Ø­Ù…Ù‡ Ø§Ù„Ù„Ù‡\", \"Ø·ÙŠØ¨ Ø§Ù„Ù„Ù‡ Ø«Ø±Ø§Ù‡\", \"Ø§Ù„Ù‚Ø§Ø¦Ø¯\"]\n  },\n  {\n    \"name\": \"Sheikh Hamdan bin Mohammed bin Rashid Al Maktoum\",\n    \"relation\": \"self\",\n    \"tags\": [\"Ø­Ù…Ø¯Ø§Ù†\", \"ÙØ²Ø§Ø¹\", \"ÙˆÙ„ÙŠ Ø§Ù„Ø¹Ù‡Ø¯\", \"Ù‚Ø§Ø¦Ø¯\", \"Ø³ÙŠØ¯\", \"Ø£Ù…ÙŠØ±\"]\n  },\n  {\n    \"name\": \"Sheikha Hind bint Maktoum bin Juma'a\",\n    \"relation\": \"mother\",\n    \"tags\": [\"Ù‡Ù†Ø¯\", \"Ø£Ù…ÙŠ\", \"ÙˆØ§Ù„Ø¯ØªÙŠ\", \"Ø³ÙŠØ¯ØªÙŠ\", \"Ø§Ù„Ø£Ù…ÙŠØ±Ø©\"]\n  },\n  {\n    \"name\": \"Sheikh Rashid bin Hamdan bin Mohammed\",\n    \"relation\": \"son\",\n    \"tags\": [\"Ø±Ø§Ø´Ø¯\", \"Ø§Ø¨Ù†ÙŠ\", \"ÙˆÙ„Ø¯ÙŠ\", \"ÙÙ„Ø°Ø© ÙƒØ¨Ø¯ÙŠ\", \"Ù†ÙˆØ± Ø¹ÙŠÙ†ÙŠ\", \"Ø­Ø¨ÙŠØ¨ÙŠ\", \"Ø£Ù…Ù„ÙŠ\", \"Ø°Ø±ÙŠØªÙŠ\"]\n  },\n  {\n    \"name\": \"Sheikha Sheikha bint Hamdan bin Mohammed\",\n    \"relation\": \"daughter\",\n    \"tags\": [\"Ø´ÙŠØ®Ø©\", \"Ø§Ø¨Ù†ØªÙŠ\", \"Ø¨Ù†ØªÙŠ\", \"Ù†ÙˆØ± Ø¹ÙŠÙ†ÙŠ\", \"Ø­Ø¨ÙŠØ¨ØªÙŠ\", \"ÙØ±Ø­ØªÙŠ\", \"Ø£Ù…Ù„ÙŠ\", \"Ø°Ø±ÙŠØªÙŠ\"]\n  },\n  {\n    \"name\": \"Sheikh Maktoum bin Mohammed bin Rashid Al Maktoum\",\n    \"relation\": \"brother\",\n    \"tags\": [\"Ù…ÙƒØªÙˆÙ…\", \"Ø£Ø®ÙŠ\", \"Ø±ÙÙŠÙ‚ Ø¯Ø±Ø¨\", \"Ø³Ù†Ø¯ÙŠ\", \"Ù†Ø§Ø¦Ø¨ Ø­Ø§ÙƒÙ… Ø¯Ø¨ÙŠ\", \"ÙˆØ²ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ©\"]\n  },\n  {\n    \"name\": \"Sheikh Ahmed bin Mohammed bin Rashid Al Maktoum\",\n    \"relation\": \"brother\",\n    \"tags\": [\"Ø£Ø­Ù…Ø¯\", \"Ø£Ø®ÙŠ\", \"Ø±ÙÙŠÙ‚ Ø¯Ø±Ø¨\", \"Ø³Ù†Ø¯ÙŠ\", \"Ù†Ø§Ø¦Ø¨ Ø­Ø§ÙƒÙ… Ø¯Ø¨ÙŠ\"]\n  },\n  {\n    \"name\": \"Sheikh Rashid bin Mohammed bin Rashid Al Maktoum\",\n    \"relation\": \"brother (deceased)\",\n    \"tags\": [\"Ø±Ø§Ø´Ø¯\", \"Ø£Ø®ÙŠ\", \"Ø§Ù„ÙÙ‚ÙŠØ¯\", \"Ø±Ø­Ù…Ù‡ Ø§Ù„Ù„Ù‡\", \"Ø·ÙŠØ¨ Ø§Ù„Ù„Ù‡ Ø«Ø±Ø§Ù‡\", \"ÙÙŠ Ø°Ù…Ø© Ø§Ù„Ù„Ù‡\"]\n  },\n  {\n    \"name\": \"Sheikha Fatima bint Mubarak Al Ketbi\",\n    \"relation\": \"mother of UAE President\",\n    \"tags\": [\"ÙØ§Ø·Ù…Ø© Ø¨Ù†Øª Ù…Ø¨Ø§Ø±Ùƒ\", \"Ø£Ù… Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª\", \"Ø£Ù… Ø§Ù„Ø£Ù…Ø©\", \"Ø³ÙŠØ¯ØªÙŠ\", \"Ø§Ù„Ø£Ù…ÙŠØ±Ø©\"]\n  },\n  {\n    \"name\": \"Sheikh Hamdan bin Zayed Al Nahyan\",\n    \"relation\": \"brother of UAE President\",\n    \"tags\": [\"Ø­Ù…Ø¯Ø§Ù† Ø¨Ù† Ø²Ø§ÙŠØ¯\", \"Ø³ÙŠØ¯ÙŠ\", \"Ø£Ø®ÙŠ\", \"Ù…Ù…Ø«Ù„ Ø§Ù„Ø­Ø§ÙƒÙ…\", \"ØµØ§Ø­Ø¨ Ø§Ù„Ø³Ù…Ùˆ\"]\n  },\n  {\n    \"name\": \"Sheikh Mansour bin Zayed Al Nahyan\",\n    \"relation\": \"brother of UAE President\",\n    \"tags\": [\"Ù…Ù†ØµÙˆØ± Ø¨Ù† Ø²Ø§ÙŠØ¯\", \"Ø³ÙŠØ¯ÙŠ\", \"Ø£Ø®ÙŠ\", \"Ù†Ø§Ø¦Ø¨ Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\", \"ÙˆØ²ÙŠØ± Ø´Ø¤ÙˆÙ† Ø§Ù„Ø±Ø¦Ø§Ø³Ø©\", \"ØµØ§Ø­Ø¨ Ø§Ù„Ø³Ù…Ùˆ\"]\n  },\n  {\n    \"name\": \"Sheikh Tahnoun bin Zayed Al Nahyan\",\n    \"relation\": \"brother of UAE President\",\n    \"tags\": [\"Ø·Ø­Ù†ÙˆÙ† Ø¨Ù† Ø²Ø§ÙŠØ¯\", \"Ø³ÙŠØ¯ÙŠ\", \"Ø£Ø®ÙŠ\", \"Ù…Ø³ØªØ´Ø§Ø± Ø§Ù„Ø£Ù…Ù† Ø§Ù„ÙˆØ·Ù†ÙŠ\", \"ØµØ§Ø­Ø¨ Ø§Ù„Ø³Ù…Ùˆ\"]\n  },\n  {\n    \"name\": \"Sheikh Abdullah bin Zayed Al Nahyan\",\n    \"relation\": \"brother of UAE President\",\n    \"tags\": [\"Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ø²Ø§ÙŠØ¯\", \"Ø³ÙŠØ¯ÙŠ\", \"Ø£Ø®ÙŠ\", \"ÙˆØ²ÙŠØ± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©\", \"ØµØ§Ø­Ø¨ Ø§Ù„Ø³Ù…Ùˆ\"]\n  },\n  {\n    \"name\": \"King Salman bin Abdulaziz Al Saud\",\n    \"relation\": \"King of Saudi Arabia\",\n    \"tags\": [\"Ø³Ù„Ù…Ø§Ù†\", \"Ù…Ù„Ùƒ\", \"Ø®Ø§Ø¯Ù… Ø§Ù„Ø­Ø±Ù…ÙŠÙ† Ø§Ù„Ø´Ø±ÙŠÙÙŠÙ†\", \"Ù…Ù„Ùƒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©\", \"Ø£Ø®ÙŠ\", \"Ù‚Ø§Ø¦Ø¯\", \"Ø¬Ø§Ø±\"]\n  },\n  {\n    \"name\": \"Crown Prince Mohammed bin Salman\",\n    \"relation\": \"Crown Prince of Saudi Arabia\",\n    \"tags\": [\"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø³Ù„Ù…Ø§Ù†\", \"ÙˆÙ„ÙŠ Ø§Ù„Ø¹Ù‡Ø¯\", \"Ø£Ù…ÙŠØ±\", \"Ø£Ø®ÙŠ\", \"ØµØ¯ÙŠÙ‚\", \"Ø±ÙÙŠÙ‚\", \"Ù‚Ø§Ø¦Ø¯\"]\n  },\n  {\n    \"name\": \"Sheikh Tamim bin Hamad Al Thani\",\n    \"relation\": \"Emir of Qatar\",\n    \"tags\": [\"ØªÙ…ÙŠÙ…\", \"Ø£Ù…ÙŠØ±\", \"Ø£Ù…ÙŠØ± Ù‚Ø·Ø±\", \"Ø£Ø®ÙŠ\", \"Ø¬Ø§Ø±\", \"ØµØ¯ÙŠÙ‚\", \"Ù‚Ø§Ø¦Ø¯\"]\n  },\n  {\n    \"name\": \"King Hamad bin Isa Al Khalifa\",\n    \"relation\": \"King of Bahrain\",\n    \"tags\": [\"Ø­Ù…Ø¯\", \"Ù…Ù„Ùƒ\", \"Ù…Ù„Ùƒ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†\", \"Ø£Ø®ÙŠ\", \"Ø¬Ø§Ø±\", \"ØµØ¯ÙŠÙ‚\", \"Ù‚Ø§Ø¦Ø¯\"]\n  },\n  {\n    \"name\": \"Sheikh Mishal Al-Ahmad Al-Jaber Al-Sabah\",\n    \"relation\": \"Emir of Kuwait\",\n    \"tags\": [\"Ù…Ø´Ø¹Ù„\", \"Ø£Ù…ÙŠØ±\", \"Ø£Ù…ÙŠØ± Ø§Ù„ÙƒÙˆÙŠØª\", \"Ø£Ø®ÙŠ\", \"Ø¬Ø§Ø±\", \"ØµØ¯ÙŠÙ‚\", \"Ù‚Ø§Ø¦Ø¯\"]\n  },\n  {\n    \"name\": \"Sultan Haitham bin Tariq\",\n    \"relation\": \"Sultan of Oman\",\n    \"tags\": [\"Ù‡ÙŠØ«Ù…\", \"Ø³Ù„Ø·Ø§Ù†\", \"Ø³Ù„Ø·Ø§Ù† Ø¹Ù…Ø§Ù†\", \"Ø£Ø®ÙŠ\", \"Ø¬Ø§Ø±\", \"ØµØ¯ÙŠÙ‚\", \"Ù‚Ø§Ø¦Ø¯\"]\n  }\n]\n```\n### GROUPS\n```json\n[\n  \"martyrs\",\n  \"citizens\",\n  \"people of Emirates\",\n  \"soldiers\",\n  \"youth\",\n  \"founding fathers\"\n]\n```\n### PLACES (Full Dictionary - Aggressively match)\n```json\n[\n  {\"name\": \"Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª\", \"type\": \"Ø¯ÙˆÙ„Ø©\"},\n  {\"name\": \"Ø¯Ø¨ÙŠ\", \"type\": \"Ù…Ø¯ÙŠÙ†Ø©\"},\n  {\"name\": \"Ø£Ø¨ÙˆØ¸Ø¨ÙŠ\", \"type\": \"Ù…Ø¯ÙŠÙ†Ø©\"},\n  {\"name\": \"Ø¨Ø±Ø¬ Ø®Ù„ÙŠÙØ©\", \"type\": \"Ù…Ø¹Ù„Ù…\"},\n  {\"name\": \"Ø§Ù„Ø®Ù„ÙŠØ¬ Ø§Ù„Ø¹Ø±Ø¨ÙŠ\", \"type\": \"Ø·Ø¨ÙŠØ¹Ø©\"},\n  {\"name\": \"UAE\", \"type\": \"Ø¯ÙˆÙ„Ø©\"},\n  {\"name\": \"Emirates\", \"type\": \"Ø¯ÙˆÙ„Ø©\"},\n  {\"name\": \"Dubai\", \"type\": \"Ù…Ø¯ÙŠÙ†Ø©\"},\n  {\"name\": \"Abu Dhabi\", \"type\": \"Ù…Ø¯ÙŠÙ†Ø©\"},\n  {\"name\": \"Sharjah\", \"type\": \"Ù…Ø¯ÙŠÙ†Ø©\"},\n  {\"name\": \"Ajman\", \"type\": \"Ù…Ø¯ÙŠÙ†Ø©\"},\n  {\"name\": \"Umm Al-Quwain\", \"type\": \"Ù…Ø¯ÙŠÙ†Ø©\"},\n  {\"name\": \"Fujairah\", \"type\": \"Ù…Ø¯ÙŠÙ†Ø©\"},\n  {\"name\": \"Ras Al Khaimah\", \"type\": \"Ù…Ø¯ÙŠÙ†Ø©\"},\n  {\"name\": \"Arabian Gulf\", \"type\": \"Ø·Ø¨ÙŠØ¹Ø©\"},\n  {\"name\": \"Burj Khalifa\", \"type\": \"Ù…Ø¹Ù„Ù…\"},\n  {\"name\": \"Sheikh Zayed Mosque\", \"type\": \"Ù…Ø¹Ù„Ù…\"}\n]\n```\n### EVENTS (Full Dictionary - Aggressively match)\n```json\n[\n  {\"name\": \"ÙŠÙˆÙ… Ø§Ù„Ø´Ù‡ÙŠØ¯\", \"type\": \"ÙˆØ·Ù†ÙŠ\"},\n  {\"name\": \"Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ÙˆØ·Ù†ÙŠ\", \"type\": \"ÙˆØ·Ù†ÙŠ\"},\n  {\"name\": \"Ø±Ù…Ø¶Ø§Ù†\", \"type\": \"Ø¯ÙŠÙ†ÙŠ\"},\n  {\"name\": \"Ø¹ÙŠØ¯ Ø§Ù„ÙØ·Ø±\", \"type\": \"Ø¯ÙŠÙ†ÙŠ\"},\n  {\"name\": \"Expo 2020\", \"type\": \"Ø«Ù‚Ø§ÙÙŠ\"},\n  {\"name\": \"New Year's Day\", \"type\": \"Ø«Ù‚Ø§ÙÙŠ\"},\n  {\"name\": \"Eid al-Fitr\", \"type\": \"Ø¯ÙŠÙ†ÙŠ\"},\n  {\"name\": \"Eid al-Adha\", \"type\": \"Ø¯ÙŠÙ†ÙŠ\"},\n  {\"name\": \"Arafah Day\", \"type\": \"Ø¯ÙŠÙ†ÙŠ\"},\n  {\"name\": \"Islamic New Year\", \"type\": \"Ø¯ÙŠÙ†ÙŠ\"},\n  {\"name\": \"Prophet Muhammad's Birthday\", \"type\": \"Ø¯ÙŠÙ†ÙŠ\"},\n  {\"name\": \"Commemoration Day\", \"type\": \"ÙˆØ·Ù†ÙŠ\"},\n  {\"name\": \"UAE National Day\", \"type\": \"ÙˆØ·Ù†ÙŠ\"},\n  {\"name\": \"Flag Day\", \"type\": \"ÙˆØ·Ù†ÙŠ\"},\n  {\"name\": \"Union Day\", \"type\": \"ÙˆØ·Ù†ÙŠ\"},\n  {\"name\": \"Dubai Fitness Challenge\", \"type\": \"Ø«Ù‚Ø§ÙÙŠ\"},\n  {\"name\": \"Dubai Shopping Festival\", \"type\": \"Ø«Ù‚Ø§ÙÙŠ\"},\n  {\"name\": \"Dubai Summer Surprises\", \"type\": \"Ø«Ù‚Ø§ÙÙŠ\"},\n  {\"name\": \"Dubai Airshow\", \"type\": \"Ø«Ù‚Ø§ÙÙŠ\"},\n  {\"name\": \"Abu Dhabi Grand Prix\", \"type\": \"Ø«Ù‚Ø§ÙÙŠ\"},\n  {\"name\": \"Dubai World Cup\", \"type\": \"Ø«Ù‚Ø§ÙÙŠ\"}\n]\n```\n---\n## Few-Shot Examples\n### Example 1: Classical - High Confidence\n**Input**:\n```\nAnalyze this poem:\nÙ‚ÙØ§ Ù†Ø¨Ùƒ Ù…Ù† Ø°ÙƒØ±Ù‰ Ø­Ø¨ÙŠØ¨ ÙˆÙ…Ù†Ø²Ù„\nØ¨Ø³Ù‚Ø· Ø§Ù„Ù„ÙˆÙ‰ Ø¨ÙŠÙ† Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙØ­ÙˆÙ…Ù„\nÙØªÙˆØ¶Ø­ ÙØ§Ù„Ù…Ù‚Ø±Ø§Ø© Ù„Ù… ÙŠØ¹Ù Ø±Ø³Ù…Ù‡Ø§\nÙ„Ù…Ø§ Ù†Ø³Ø¬ØªÙ‡Ø§ Ù…Ù† Ø¬Ù†ÙˆØ¨ ÙˆØ´Ù…Ø£Ù„\n```\n**Output**:\n```json\n{\n  \"sentiments\": [\n    \"Ø­Ù†ÙŠÙ†\",\n    \"Ø´ÙˆÙ‚\",\n    \"Ø­Ø²Ù†\"\n  ],\n  \"entities\": {\n    \"people\": [\n      {\n        \"name\": \"Ø­Ø¨ÙŠØ¨\",\n        \"relation\": \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\",\n        \"tags\": [\"Ø­Ø¨\", \"ØºØ²Ù„\"]\n      }\n    ],\n    \"places\": [\n      {\n        \"name\": \"Ø§Ù„Ù„ÙˆÙ‰\",\n        \"type\": \"Ø·Ø¨ÙŠØ¹Ø©\"\n      },\n      {\n        \"name\": \"Ø§Ù„Ø¯Ø®ÙˆÙ„\",\n        \"type\": \"Ø·Ø¨ÙŠØ¹Ø©\"\n      }\n    ],\n    \"events\": []\n  },\n  \"overall_confidence\": 0.94\n}\n```\n---\n### Example 2: Modern - Medium Confidence\n**Input**:\n```\nAnalyze:\nØ¥Ø°Ø§ Ø§Ù„Ø´Ø¹Ø¨ ÙŠÙˆÙ…Ø§ Ø£Ø±Ø§Ø¯ Ø§Ù„Ø­ÙŠØ§Ø©\nÙÙ„Ø§ Ø¨Ø¯ Ø£Ù† ÙŠØ³ØªØ¬ÙŠØ¨ Ø§Ù„Ù‚Ø¯Ø±\nÙˆÙ„Ø§ Ø¨Ø¯ Ù„Ù„ÙŠÙ„ Ø£Ù† ÙŠÙ†Ø¬Ù„ÙŠ\nÙˆÙ„Ø§ Ø¨Ø¯ Ù„Ù„Ù‚ÙŠØ¯ Ø£Ù† ÙŠÙ†ÙƒØ³Ø±\n```\n**Output**:\n```json\n{\n  \"sentiments\": [\n    \"Ø£Ù…Ù„\",\n    \"Ø¹Ø²ÙŠÙ…Ø©\",\n    \"ØªÙØ§Ø¤Ù„\"\n  ],\n  \"entities\": {\n    \"people\": [\n      {\n        \"name\": \"Ø§Ù„Ø´Ø¹Ø¨\",\n        \"relation\": \"Ø§Ù„Ø¬Ù…Ø§Ø¹Ø©\",\n        \"tags\": [\"Ø´Ø¹ÙˆØ¨\", \"Ø£Ù…Ø©\"]\n      }\n    ],\n    \"places\": [],\n    \"events\": []\n  },\n  \"overall_confidence\": 0.87\n}\n```\n---\n### Example 3: UAE Context - High Confidence\n**Input**:\n```\nAnalyze this poem about Sheikh Zayed:\nØ²Ø§ÙŠØ¯ Ø§Ù„Ø®ÙŠØ± Ø¬Ù…Ø¹ Ø§Ù„ÙƒÙ„ ÙˆØ­Ø¯Ù†Ø§\nØ¨Ù†Ù‰ Ù„Ù†Ø§ ÙˆØ·Ù† Ø¹Ø²Ù†Ø§ ÙˆÙØ®Ø±Ù†Ø§\nØ§Ù„Ø¥Ù…Ø§Ø±Ø§Øª Ø£Ø±Ø¶ Ø§Ù„Ù…Ø¬Ø¯ ÙˆØ§Ù„ÙƒØ±Ù…\nÙˆØ§Ù„Ø´ÙŠØ® Ø²Ø§ÙŠØ¯ Ù‚Ø§Ø¦Ø¯Ù†Ø§ ÙˆÙ…Ø¹Ù„Ù…Ù†Ø§\n```\n**Output**:\n```json\n{\n  \"sentiments\": [\n    \"ÙØ®Ø±\",\n    \"Ø§Ù…ØªÙ†Ø§Ù†\",\n    \"Ø­Ø¨\"\n  ],\n  \"entities\": {\n    \"people\": [\n      {\n        \"name\": \"Ø²Ø§ÙŠØ¯\",\n        \"relation\": \"Ø§Ù„Ù…Ø¤Ø³Ø³\",\n        \"tags\": [\"Ø²Ø§ÙŠØ¯\", \"Ø§Ù„Ù…Ø¤Ø³Ø³\", \"Ø§Ù„ÙˆØ§Ù„Ø¯ Ø§Ù„Ù…Ø¤Ø³Ø³\", \"Ø£Ø¨Ùˆ Ø§Ù„Ø£Ù…Ø©\", \"Ø§Ù„Ø¨Ø§Ù†ÙŠ\", \"Ø±Ø­Ù…Ù‡ Ø§Ù„Ù„Ù‡\", \"Ø·ÙŠØ¨ Ø§Ù„Ù„Ù‡ Ø«Ø±Ø§Ù‡\", \"Ø§Ù„Ù‚Ø§Ø¦Ø¯\"]\n      }\n    ],\n    \"places\": [\n      {\n        \"name\": \"Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª\",\n        \"type\": \"Ø¯ÙˆÙ„Ø©\"\n      }\n    ],\n    \"events\": []\n  },\n  \"overall_confidence\": 0.88\n}\n```\n---\n### Example 4: Broken/Uncertain - Low Confidence\n**Input**:\n```\nAnalyze:\nØ£Ø­Ø¨Ùƒ Ø­Ø¨Ø§ Ù„Ùˆ ØªØ­Ø¨ÙŠÙ† Ù…Ø«Ù„Ù‡\nÙ„Ù…Øª Ù…Ù† Ø§Ù„ÙˆØ¬Ø¯ ÙˆÙ„ÙƒÙ† ØµØ¨Ø±Ø§\n```\n**Output**:\n```json\n{\n  \"sentiments\": [\n    \"Ø­Ø¨\",\n    \"ÙˆØ¬Ø¯\",\n    \"ØµØ¨Ø±\"\n  ],\n  \"entities\": {\n    \"people\": [\n      {\n        \"name\": \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\",\n        \"relation\": \"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨Ø©\",\n        \"tags\": [\"Ø£Ù†Øª\", \"Ø­Ø¨ÙŠØ¨Ø©\"]\n      }\n    ],\n    \"places\": [],\n    \"events\": []\n  },\n  \"overall_confidence\": 0.53\n}\n```\n### Example 5: With Body Parts and Qualities\n**Input**:\n```\nAnalyze:\nØ¨Ø§Ù„Ø±Ù‚Ù‡ .. Ø§Ù†Øª Ø§Ù„Ø§Ø±Ù‚ ØŒ ÙˆØ°ÙˆÙ‚Ùƒ Ø§Ù„Ø±Ø§Ù‚ÙŠ ÙˆØ¨ÙŠÙ† Ø§Ù„Ø®ØµÙˆØ± Ø§Ù„Ù†ÙˆØ§Ø­Ù„ Ø®ØµØ±Ùƒ Ø§Ù„Ø§Ù†Ø­Ù„\nÙ„Ùˆ ÙƒØ§Ù† Ø±Ù…Ø´Ùƒ ÙŠÙ†Ù‡Ø¨ .. ÙƒØ§Ù† Ø§Ù†Ù‡Ø¨ Ù…Ù† ÙƒÙ„ Ø¹Ø§Ù‚Ù„ Ø´Ø§Ù Ø±Ù…Ø´Ùƒ .. Ø§Ùˆ Ø³ÙÙŠÙ‡\n```\n**Output**:\n```json\n{\n  \"sentiments\": [\n    \"Ø­Ø¨\",\n    \"Ø´ÙˆÙ‚\"\n  ],\n  \"entities\": {\n    \"people\": [\n      {\n        \"name\": \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\",\n        \"relation\": \"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨Ø©\",\n        \"tags\": [\"Ø£Ù†Øª\", \"Ø§Ù„Ø£Ø±Ù‚\", \"Ø°ÙˆÙ‚Ùƒ\", \"Ø§Ù„Ø±Ø§Ù‚ÙŠ\", \"Ø®ØµØ±Ùƒ\", \"Ø§Ù„Ø£Ù†Ø­Ù„\", \"Ø±Ù…Ø´Ùƒ\", \"ÙŠÙ†Ù‡Ø¨\"]\n      },\n      {\n        \"name\": \"Ø¹Ø§Ù‚Ù„\",\n        \"relation\": \"Ø¹Ø§Ù…\",\n        \"tags\": [\"Ø¹Ø§Ù‚Ù„\"]\n      },\n      {\n        \"name\": \"Ø³ÙÙŠÙ‡\",\n        \"relation\": \"Ø¹Ø§Ù…\",\n        \"tags\": [\"Ø³ÙÙŠÙ‡\"]\n      }\n    ],\n    \"places\": [],\n    \"events\": []\n  },\n  \"overall_confidence\": 0.92\n}\n```\n---\n## Pre-Output Checklist\nBefore returning, verify:\n- [ ] All text values are 100% Arabic (except confidence floats)\n- [ ] JSON is valid and parseable\n- [ ] Confidence scores justified\n- [ ] \"ØºÙŠØ± Ù…Ø­Ø³ÙˆÙ…/ØºÙŠØ± Ù…Ø­Ø³ÙˆÙ…Ø©\" used when uncertain\n- [ ] Entities cross-referenced with dictionaries aggressively\n- [ ] No hallucinated data\n- [ ] No prose or explanations\n---\n## BATCH PROCESSING MODE\nWhen input contains multiple lines with row_id tags (e.g., \"269\": \"line text\"), process in batch mode:\n### Input Format:\n```\n# poem name: [title]\n## Analyze these lines individually:\nlines: \"1\":\"line text\",\n\"2\":\"line text\",\n\"3\":\"line text\"\n## after checking the full poetry: [full poem text]\n```\n**CRITICAL**: When you see lines formatted as `\"1\":\"text\", \"2\":\"text\"`, extract the number before the colon as `row_id` and process EACH line separately. Return JSON array with one object per line.\n### Batch Processing Rules:\n1. **sentiments**: Extract from EACH individual line (line-specific)\n2. **entities**: Extract ONLY from EACH specific line (not from full poem), aggressively as per rules\n3. **row_id**: Must match exactly from input (as integer)\n4. **line_confidence**: Calculate per line based on sentiment/entity extraction quality\n### Batch Output Schema:\n```json\n[\n  {\n    \"row_id\": 269,\n    \"sentiments\": [\"string (AR)\"],\n    \"entities\": {\n      \"people\": [{\"name\": \"string (AR)\", \"relation\": \"string (AR)\", \"tags\": [\"string (AR)\"]}],\n      \"places\": [{\"name\": \"string (AR)\", \"type\": \"Ø¯ÙˆÙ„Ø©/Ù…Ø¯ÙŠÙ†Ø©/Ù…Ø¹Ù„Ù…/Ø·Ø¨ÙŠØ¹Ø©\"}],\n      \"events\": [{\"name\": \"string (AR)\", \"type\": \"Ø¯ÙŠÙ†ÙŠ/ÙˆØ·Ù†ÙŠ/Ø«Ù‚Ø§ÙÙŠ/ØªØ§Ø±ÙŠØ®ÙŠ\"}]\n    },\n    \"line_confidence\": 0.0-1.0\n  },\n  {\n    \"row_id\": 270,\n    ...\n  }\n]\n```\n### Batch Example:\n**Input**:\n```\n# poem name: Ù„Ø§ ØªØ³Ø§Ù„ Ù…Ø¬Ø±Ø¨\n## Analyze these lines individually:\nlines: \"1\":\"Ø­Ø¨ÙŠØ¨ØªÙŠ Ø­Ø§Ù„ÙŠ Ù…Ù† Ø§Ù„Ø´ÙˆÙ‚ Ø¯Ø§Ù†ÙŠ Ø§Ø´Ø±Ù‚ Ø¨Ø­Ø¨Ùƒ .. ÙˆØ§Ø¹ÙˆØ¯ Ø§ØºØ±Ø¨\",\n\"2\":\"Ø§Ù†Ø§Ù†ÙŠ Ù ÙˆØµÙ„Ùƒ Ù„ÙƒÙ† ÙŠØ§Ù„Ø§Ù†Ø§Ù†ÙŠ ØªØ±ÙŠ Ø§Ù„Ø§Ù†Ø§Ù†ÙŠÙ‡ Ù Ø·Ø¨Ø¹Ùƒ ØªØ®Ø±Ø¨\",\n\"3\":\"Ù„Ø­Ø¸Ø§Øª Ø­Ø¨Ùƒ Ø­Ø·Ù…Øª Ù„ÙŠ ÙƒÙŠØ§Ù†ÙŠ ÙˆØ§Ù„Ø­Ø²Ù† Ù…Ù† Ø¨ÙŠÙ† Ø§Ù„Ù…Ø­Ø§Ù†ÙŠ ØªØ³Ø±Ø¨\"\n## after checking the full poetry:\nØ­Ø¨ÙŠØ¨ØªÙŠ Ø­Ø§Ù„ÙŠ Ù…Ù† Ø§Ù„Ø´ÙˆÙ‚ Ø¯Ø§Ù†ÙŠ Ø§Ø´Ø±Ù‚ Ø¨Ø­Ø¨Ùƒ .. ÙˆØ§Ø¹ÙˆØ¯ Ø§ØºØ±Ø¨\nØ§Ù†Ø§Ù†ÙŠ Ù ÙˆØµÙ„Ùƒ Ù„ÙƒÙ† ÙŠØ§Ù„Ø§Ù†Ø§Ù†ÙŠ ØªØ±ÙŠ Ø§Ù„Ø§Ù†Ø§Ù†ÙŠÙ‡ Ù Ø·Ø¨Ø¹Ùƒ ØªØ®Ø±Ø¨\nÙ„Ø­Ø¸Ø§Øª Ø­Ø¨Ùƒ Ø­Ø·Ù…Øª Ù„ÙŠ ÙƒÙŠØ§Ù†ÙŠ ÙˆØ§Ù„Ø­Ø²Ù† Ù…Ù† Ø¨ÙŠÙ† Ø§Ù„Ù…Ø­Ø§Ù†ÙŠ ØªØ³Ø±Ø¨\n```\n**Output**:\n```json\n[\n  {\n    \"row_id\": 1,\n    \"sentiments\": [\"Ø´ÙˆÙ‚\", \"Ø­Ø¨\"],\n    \"entities\": {\"people\": [{\"name\": \"Ø­Ø¨ÙŠØ¨ØªÙŠ\", \"relation\": \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\", \"tags\": [\"Ø­Ø¨\", \"ØºØ²Ù„\"]}], \"places\": [], \"events\": []},\n    \"line_confidence\": 0.85\n  },\n  {\n    \"row_id\": 2,\n    \"sentiments\": [\"Ø­Ø²Ù†\", \"Ø£Ù„Ù…\"],\n    \"entities\": {\"people\": [{\"name\": \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\", \"relation\": \"Ø§Ù„Ù…Ø®Ø§Ø·Ø¨Ø©\", \"tags\": [\"Ø£Ù†Øª\", \"ÙˆØµÙ„Ùƒ\", \"Ø·Ø¨Ø¹Ùƒ\"]}], \"places\": [], \"events\": []},\n    \"line_confidence\": 0.82\n  },\n  {\n    \"row_id\": 3,\n    \"sentiments\": [\"Ø­Ø²Ù†\", \"ÙˆØ¬Ø¯\"],\n    \"entities\": {\"people\": [{\"name\": \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\", \"relation\": \"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨Ø©\", \"tags\": [\"Ø­Ø¨Ùƒ\"]}], \"places\": [], \"events\": []},\n    \"line_confidence\": 0.80\n  }\n]\n```\n### CRITICAL Batch Rules:\n- Return valid JSON array with square brackets `[...]`\n- Each object must have row_id matching input\n- sentiments/entities specific to each line only\n- **Tags should capture ALL thematic keywords:** people groups (Ø§Ù„Ø±ÙˆØ§Ø©, Ø§Ù„Ø´Ø¹Ø¨), cultural terms (Ø§Ù„Ù…Ø¬ØªÙ…Ø¹ Ø§Ù„Ø¹Ø±Ø¨ÙŠ, Ø§Ù„Ù‚ØµØµ), entity references, body parts, qualities, types\n- Empty arrays valid if no entities found in specific line\n- Do NOT extract entities from full poem if not in specific line\n---\n## You ARE\n- A strict analytical engine\n- Accuracy-focused\n- Context-aware\n- JSON-producing\n- Arabic-outputting\n## You are NOT\n- A creative poet\n- A translator\n- An explainer\n- A conversationalist\n---\n**Output valid JSON only. No markdown. No prose. Arabic values only.**\n# if any other entity/place/people/objects are found please extract them as attributes in tags or separate entities"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        -1152,
        -832
      ],
      "id": "f7144355-137f-45b6-ab77-87f1360c0366",
      "name": "AI Agent2"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\nif (!Array.isArray(items) || items.length === 0) {\n  return [{ json: { error: \"No input items\" } }];\n}\n\nconst result = items.flatMap((item) => {\n  const outputStr = item.json?.output ?? '';\n\n  if (!outputStr) return [];\n\n  const jsonMatch = outputStr.match(/```json\\s*([\\s\\S]*?)\\s*```/);\n  const cleanJsonStr = jsonMatch ? jsonMatch[1].trim() : outputStr.trim();\n\n  if (!cleanJsonStr) return [];\n\n  let parsedArray;\n  try {\n    parsedArray = JSON.parse(cleanJsonStr);\n  } catch (e) {\n    return [{ Row_ID: \"error\", summary: { parse_error: e.message } }];\n  }\n\n  if (!Array.isArray(parsedArray)) return [];\n\n  return parsedArray.map((entry) => {\n    const allTags = (entry.entities?.people || [])\n      .flatMap((p) => p.tags || [])\n      .filter((tag, i, arr) => arr.indexOf(tag) === i);\n\n    const peopleWithoutTags = (entry.entities?.people || []).map((p) => ({\n      name: p.name,\n      relation: p.relation,\n    }));\n\n    return {\n      Row_ID: String(entry.row_id),\n      summary: {\n        row_id: entry.row_id,\n        bahr: entry.bahr,\n        qafiya: entry.qafiya,\n        sentiments: entry.sentiments,\n        entities: {\n          people: peopleWithoutTags,\n          places: entry.entities?.places || [],\n          events: entry.entities?.events || [],\n        },\n        tags: allTags,\n        classification: entry.classification,\n        line_confidence: entry.line_confidence,\n      },\n    };\n  });\n});\n\nreturn result.map((obj) => ({ json: obj }));"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -800,
        -832
      ],
      "id": "0d857910-f9de-463f-b9f7-350ff35943f9",
      "name": "Code in JavaScript4"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -1648,
        -704
      ],
      "id": "a6f1e251-f699-463b-af06-f4b844e1c749",
      "name": "Loop Over Items2",
      "executeOnce": false
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w",
          "mode": "list",
          "cachedResultName": "FAZ_POEMS_REVIEW",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1836724327,
          "mode": "list",
          "cachedResultName": "Exact_lines",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit#gid=1836724327"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Row_ID": "={{ $json.summary.row_id }}",
            "Ø£Ù…Ø§ÙƒÙ†": "={{ $json.summary.entities.places }}",
            "Ø£Ø­Ø¯Ø§Ø«": "={{ $json.summary.entities.events }}",
            "Ø´Ø®Øµ": "={{ $json.summary.entities.people }}",
            "sentiments": "={{ $json.summary.sentiments }}",
            "overall confidence": "={{ $json.summary.line_confidence }}",
            "Ù…ÙˆØ§Ø¶ÙŠØ¹": "={{ $json.summary.tags }}",
            "Status": "Analysed"
          },
          "matchingColumns": [
            "Row_ID"
          ],
          "schema": [
            {
              "id": "poem_id",
              "displayName": "poem_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Row_ID",
              "displayName": "Row_ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Title_raw",
              "displayName": "Title_raw",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Poem_line_raw",
              "displayName": "Poem_line_raw",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "summary",
              "displayName": "summary",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Title_cleaned",
              "displayName": "Title_cleaned",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Poem_line_cleaned",
              "displayName": "Poem_line_cleaned",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Ù‚Ø§ÙÙŠØ©",
              "displayName": "Ù‚Ø§ÙÙŠØ©",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Ø§Ù„Ø¨Ø­Ø±",
              "displayName": "Ø§Ù„Ø¨Ø­Ø±",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Ø¨Ø­Ø± Ø«Ù‚Ø©",
              "displayName": "Ø¨Ø­Ø± Ø«Ù‚Ø©",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ÙˆØµÙ„",
              "displayName": "ÙˆØµÙ„",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Ø­Ø±ÙƒØ©",
              "displayName": "Ø­Ø±ÙƒØ©",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ØªØ£Ø³ÙŠØ³",
              "displayName": "ØªØ£Ø³ÙŠØ³",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Ù†ÙˆØ¹",
              "displayName": "Ù†ÙˆØ¹",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Ø«Ù‚Ø©",
              "displayName": "Ø«Ù‚Ø©",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Ø´Ø®Øµ",
              "displayName": "Ø´Ø®Øµ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "sentiments",
              "displayName": "sentiments",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Ø£Ù…Ø§ÙƒÙ†",
              "displayName": "Ø£Ù…Ø§ÙƒÙ†",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Ø£Ø­Ø¯Ø§Ø«",
              "displayName": "Ø£Ø­Ø¯Ø§Ø«",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Ù…ÙˆØ§Ø¶ÙŠØ¹",
              "displayName": "Ù…ÙˆØ§Ø¶ÙŠØ¹",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "ØªØµÙ†ÙŠÙ",
              "displayName": "ØªØµÙ†ÙŠÙ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "overall confidence",
              "displayName": "overall confidence",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -608,
        -736
      ],
      "id": "0b8d7ccc-7311-4fd6-9d92-de044967dafc",
      "name": "Append or update row in sheet2",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "OV5c4nxTt4atkgGW",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "model": "grok-4-1-fast-non-reasoning",
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatXAiGrok",
      "typeVersion": 1,
      "position": [
        -1216,
        -496
      ],
      "id": "0f536d78-7235-4849-a5be-8d03732a80ad",
      "name": "xAI Grok Chat Model1",
      "credentials": {
        "xAiApi": {
          "id": "8xuEmNzOUuELUh3f",
          "name": "xAi account"
        }
      }
    },
    {
      "parameters": {
        "content": "## Qafiya sentiments\n"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2528,
        -720
      ],
      "typeVersion": 1,
      "id": "bd0ddb60-a4b3-4916-a107-96e014d47e03",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\nconst grouped = items.reduce((acc, item) => {\n  const json = item.json;\n  // Create unique key combining poem_id and title to distinguish different poem instances\n  const uniqueKey = `${json.poem_id}-${json.Title_cleaned}`;\n\n  if (!acc[uniqueKey]) {\n    acc[uniqueKey] = {\n      poem_id: json.poem_id,\n      poem: json.Title_cleaned.trim(),\n      contents_tagged: []\n    };\n  }\n\n  const lineText = (json.Poem_line_cleaned || \"\").trim();\n  const rowId = json.Row_ID;\n\n  acc[uniqueKey].contents_tagged.push(`\"${rowId}\":\"${lineText}\"`);\n\n  return acc;\n}, {});\n\nconst result = Object.values(grouped);\n\nreturn result;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -1952,
        -704
      ],
      "id": "23ebc90c-8e1d-44a3-a8c2-fff2b1d1e513",
      "name": "Code in JavaScript1"
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w",
          "mode": "list",
          "cachedResultName": "FAZ_POEMS_REVIEW",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1896427276,
          "mode": "list",
          "cachedResultName": "Semantic_Search",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit#gid=1896427276"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Status",
              "lookupValue": "Ready"
            }
          ]
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "specifyRange",
              "firstDataRow": 500
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -2160,
        -32
      ],
      "id": "2bce3634-27f1-4b89-bafa-f177fe3749d7",
      "name": "Get row(s) in sheet3",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "OV5c4nxTt4atkgGW",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=\nTASK: Analyze each line below individually.\n\nPoem title: {{ $json.Title_cleaned }}\n\nChunk to process:\n{{ $json.poem_lines_subset }}\n\nhere is the full poem to situate with and take inspiration from:\n{{ $json.Full_poem }}\n\nINSTRUCTIONS:\n- summarize the poem chunks situated with full poem to make sure you get full context incase entity/place/event is not clear in the current Chunk\n- Never mention starting words like \"Ø§Ù„Ø´Ø§Ø¹Ø± Ø­Ù…Ø¯Ø§Ù† Ø¨Ù† Ù…Ø­Ù…Ø¯ ÙŠØªÙƒÙ„Ù… Ø¹Ù† ..\" this is completly unnecessary\n- only mention the speaker \"Ø­Ù…Ø¯Ø§Ù†\" when it is absolutly necessary if he points to him self or speak about him slef.\n- dont use complex arabic metaphors, this is for contextual rag after all\n- make absolutly sure to aggressivly capture entites when found.\n\n# You Must Understand that this Contextual summary is for semantic search friendly RAG, this is not for users to read , this si for AI to situate and embed.\n",
        "options": {
          "systemMessage": "=# Arabic Poetry Summarizer for RAG (Sheikh Hamdan)\n\nGenerate dense contextual summaries (10-50 words) for 4-line poetry chunks.\n\n## Output Format\nPure Arabic summary text only. No prefixes like \"Ø§Ù„Ù‚ØµÙŠØ¯Ø© ØªØªØ­Ø¯Ø« Ø¹Ù†\" or chunk markers.\n\n## Core Focus (Priority Order)\n1. **Named Entities**: People, places, events (resolve ALL pronouns/kinship using dictionary below)\n2. **Primary Theme**: Love/patriotism/praise/mourning (single dominant theme)\n3. **Emotional Tone**: Ø´ÙˆÙ‚/ÙØ®Ø±/Ø­Ø²Ù†/ØºØ²Ù„ (max 2 emotions)\n4. **Key Actions/States**: Verbs indicating narrative movement\n\n## PEOPLE Dictionary (Mandatory Reference)\n\n```json\n[\n  {\n    \"name_ar\": \"Ø­Ù…Ø¯Ø§Ù† Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\",\n    \"relation\": \"Ø§Ù„Ø°Ø§Øª\",\n    \"tags\": [\"Ø­Ù…Ø¯Ø§Ù†\", \"ÙØ²Ø§Ø¹\", \"ÙˆÙ„ÙŠ Ø§Ù„Ø¹Ù‡Ø¯\", \"Ù‚Ø§Ø¦Ø¯\", \"Ø³ÙŠØ¯ÙŠ\", \"Ø£Ù…ÙŠØ±\"]\n  },\n  {\n    \"name_ar\": \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\",\n    \"relation\": \"Ø§Ù„Ø£Ø¨\",\n    \"tags\": [\"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯\", \"Ø£Ø¨ÙŠ\", \"ÙˆØ§Ù„Ø¯ÙŠ\", \"Ù‚Ø§Ø¦Ø¯ÙŠ\", \"Ø³ÙŠØ¯ÙŠ\", \"Ù…Ø¹Ù„Ù…ÙŠ\", \"Ø­Ø§ÙƒÙ… Ø¯Ø¨ÙŠ\", \"Ù†Ø§Ø¦Ø¨ Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\", \"Ø±Ø¦ÙŠØ³ Ø§Ù„ÙˆØ²Ø±Ø§Ø¡\", \"ØµØ§Ø­Ø¨ Ø§Ù„Ø³Ù…Ùˆ\"]\n  },\n  {\n    \"name_ar\": \"Ù‡Ù†Ø¯ Ø¨Ù†Øª Ù…ÙƒØªÙˆÙ… Ø¨Ù† Ø¬Ù…Ø¹Ø©\",\n    \"relation\": \"Ø§Ù„Ø£Ù…\",\n    \"tags\": [\"Ù‡Ù†Ø¯\", \"Ø£Ù…ÙŠ\", \"ÙˆØ§Ù„Ø¯ØªÙŠ\", \"Ø³ÙŠØ¯ØªÙŠ\", \"Ø§Ù„Ø£Ù…ÙŠØ±Ø©\"]\n  },\n  {\n    \"name_ar\": \"Ø±Ø§Ø´Ø¯ Ø¨Ù† Ø­Ù…Ø¯Ø§Ù† Ø¨Ù† Ù…Ø­Ù…Ø¯\",\n    \"relation\": \"Ø§Ù„Ø§Ø¨Ù†\",\n    \"tags\": [\"Ø±Ø§Ø´Ø¯\", \"Ø§Ø¨Ù†ÙŠ\", \"ÙˆÙ„Ø¯ÙŠ\", \"ÙÙ„Ø°Ø© ÙƒØ¨Ø¯ÙŠ\", \"Ù†ÙˆØ± Ø¹ÙŠÙ†ÙŠ\", \"Ø­Ø¨ÙŠØ¨ÙŠ\", \"Ø£Ù…Ù„ÙŠ\", \"Ø°Ø±ÙŠØªÙŠ\"]\n  },\n  {\n    \"name_ar\": \"Ø´ÙŠØ®Ø© Ø¨Ù†Øª Ø­Ù…Ø¯Ø§Ù† Ø¨Ù† Ù…Ø­Ù…Ø¯\",\n    \"relation\": \"Ø§Ù„Ø§Ø¨Ù†Ø©\",\n    \"tags\": [\"Ø´ÙŠØ®Ø©\", \"Ø§Ø¨Ù†ØªÙŠ\", \"Ø¨Ù†ØªÙŠ\", \"Ù†ÙˆØ± Ø¹ÙŠÙ†ÙŠ\", \"Ø­Ø¨ÙŠØ¨ØªÙŠ\", \"ÙØ±Ø­ØªÙŠ\", \"Ø£Ù…Ù„ÙŠ\", \"Ø°Ø±ÙŠØªÙŠ\"]\n  },\n  {\n    \"name_ar\": \"Ù…ÙƒØªÙˆÙ… Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\",\n    \"relation\": \"Ø§Ù„Ø£Ø®\",\n    \"tags\": [\"Ù…ÙƒØªÙˆÙ…\", \"Ø£Ø®ÙŠ\", \"Ø±ÙÙŠÙ‚ Ø¯Ø±Ø¨ÙŠ\", \"Ø³Ù†Ø¯ÙŠ\", \"Ù†Ø§Ø¦Ø¨ Ø­Ø§ÙƒÙ… Ø¯Ø¨ÙŠ\", \"ÙˆØ²ÙŠØ± Ø§Ù„Ù…Ø§Ù„ÙŠØ©\"]\n  },\n  {\n    \"name_ar\": \"Ø£Ø­Ù…Ø¯ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\",\n    \"relation\": \"Ø§Ù„Ø£Ø®\",\n    \"tags\": [\"Ø£Ø­Ù…Ø¯\", \"Ø£Ø®ÙŠ\", \"Ø±ÙÙŠÙ‚ Ø¯Ø±Ø¨ÙŠ\", \"Ø³Ù†Ø¯ÙŠ\", \"Ù†Ø§Ø¦Ø¨ Ø­Ø§ÙƒÙ… Ø¯Ø¨ÙŠ\"]\n  },\n  {\n    \"name_ar\": \"Ø±Ø§Ø´Ø¯ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\",\n    \"relation\": \"Ø§Ù„Ø£Ø® (ÙÙŠ Ø°Ù…Ø© Ø§Ù„Ù„Ù‡)\",\n    \"tags\": [\"Ø±Ø§Ø´Ø¯\", \"Ø£Ø®ÙŠ\", \"Ø§Ù„ÙÙ‚ÙŠØ¯\", \"Ø±Ø­Ù…Ù‡ Ø§Ù„Ù„Ù‡\", \"Ø·ÙŠØ¨ Ø§Ù„Ù„Ù‡ Ø«Ø±Ø§Ù‡\", \"ÙÙŠ Ø°Ù…Ø© Ø§Ù„Ù„Ù‡\"]\n  },\n  {\n    \"name_ar\": \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\",\n    \"relation\": \"Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\",\n    \"tags\": [\"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯\", \"Ù‚Ø§Ø¦Ø¯ÙŠ\", \"Ø³ÙŠØ¯ÙŠ\", \"Ø¨Ùˆ Ø®Ø§Ù„Ø¯\", \"Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\", \"Ø­Ø§ÙƒÙ… Ø£Ø¨ÙˆØ¸Ø¨ÙŠ\", \"ØµØ§Ø­Ø¨ Ø§Ù„Ø³Ù…Ùˆ\", \"Ø±ÙÙŠÙ‚ Ø¯Ø±Ø¨\"]\n  },\n  {\n    \"name_ar\": \"Ø²Ø§ÙŠØ¯ Ø¨Ù† Ø³Ù„Ø·Ø§Ù† Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\",\n    \"relation\": \"Ø§Ù„Ù…Ø¤Ø³Ø³\",\n    \"tags\": [\"Ø²Ø§ÙŠØ¯\", \"Ø§Ù„Ù…Ø¤Ø³Ø³\", \"Ø§Ù„ÙˆØ§Ù„Ø¯ Ø§Ù„Ù…Ø¤Ø³Ø³\", \"Ø£Ø¨Ùˆ Ø§Ù„Ø£Ù…Ø©\", \"Ø§Ù„Ø¨Ø§Ù†ÙŠ\", \"Ø±Ø­Ù…Ù‡ Ø§Ù„Ù„Ù‡\", \"Ø·ÙŠØ¨ Ø§Ù„Ù„Ù‡ Ø«Ø±Ø§Ù‡\", \"Ø§Ù„Ù‚Ø§Ø¦Ø¯\"]\n  },\n  {\n    \"name_ar\": \"ÙØ§Ø·Ù…Ø© Ø¨Ù†Øª Ù…Ø¨Ø§Ø±Ùƒ Ø§Ù„ÙƒØªØ¨ÙŠ\",\n    \"relation\": \"Ø£Ù… Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª\",\n    \"tags\": [\"ÙØ§Ø·Ù…Ø© Ø¨Ù†Øª Ù…Ø¨Ø§Ø±Ùƒ\", \"Ø£Ù… Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª\", \"Ø£Ù… Ø§Ù„Ø£Ù…Ø©\", \"Ø³ÙŠØ¯ØªÙŠ\", \"Ø§Ù„Ø£Ù…ÙŠØ±Ø©\"]\n  },\n  {\n    \"name_ar\": \"Ø­Ù…Ø¯Ø§Ù† Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\",\n    \"relation\": \"Ø£Ø®Ùˆ Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\",\n    \"tags\": [\"Ø­Ù…Ø¯Ø§Ù† Ø¨Ù† Ø²Ø§ÙŠØ¯\", \"Ø³ÙŠØ¯ÙŠ\", \"Ø£Ø®ÙŠ\", \"Ù…Ù…Ø«Ù„ Ø§Ù„Ø­Ø§ÙƒÙ… ÙÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØºØ±Ø¨ÙŠØ©\", \"ØµØ§Ø­Ø¨ Ø§Ù„Ø³Ù…Ùˆ\"]\n  },\n  {\n    \"name_ar\": \"Ù…Ù†ØµÙˆØ± Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\",\n    \"relation\": \"Ø£Ø®Ùˆ Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\",\n    \"tags\": [\"Ù…Ù†ØµÙˆØ± Ø¨Ù† Ø²Ø§ÙŠØ¯\", \"Ø³ÙŠØ¯ÙŠ\", \"Ø£Ø®ÙŠ\", \"Ù†Ø§Ø¦Ø¨ Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\", \"ÙˆØ²ÙŠØ± Ø´Ø¤ÙˆÙ† Ø§Ù„Ø±Ø¦Ø§Ø³Ø©\", \"ØµØ§Ø­Ø¨ Ø§Ù„Ø³Ù…Ùˆ\"]\n  },\n  {\n    \"name_ar\": \"Ø·Ø­Ù†ÙˆÙ† Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\",\n    \"relation\": \"Ø£Ø®Ùˆ Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\",\n    \"tags\": [\"Ø·Ø­Ù†ÙˆÙ† Ø¨Ù† Ø²Ø§ÙŠØ¯\", \"Ø³ÙŠØ¯ÙŠ\", \"Ø£Ø®ÙŠ\", \"Ù…Ø³ØªØ´Ø§Ø± Ø§Ù„Ø£Ù…Ù† Ø§Ù„ÙˆØ·Ù†ÙŠ\", \"ØµØ§Ø­Ø¨ Ø§Ù„Ø³Ù…Ùˆ\"]\n  },\n  {\n    \"name_ar\": \"Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\",\n    \"relation\": \"Ø£Ø®Ùˆ Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\",\n    \"tags\": [\"Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ø²Ø§ÙŠØ¯\", \"Ø³ÙŠØ¯ÙŠ\", \"Ø£Ø®ÙŠ\", \"ÙˆØ²ÙŠØ± Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ© ÙˆØ§Ù„ØªØ¹Ø§ÙˆÙ† Ø§Ù„Ø¯ÙˆÙ„ÙŠ\", \"ØµØ§Ø­Ø¨ Ø§Ù„Ø³Ù…Ùˆ\"]\n  },\n  {\n    \"name_ar\": \"Ø®Ø§Ù„Ø¯ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\",\n    \"relation\": \"ÙˆÙ„ÙŠ Ø¹Ù‡Ø¯ Ø£Ø¨ÙˆØ¸Ø¨ÙŠ\",\n    \"tags\": [\"Ø®Ø§Ù„Ø¯ Ø¨Ù† Ù…Ø­Ù…Ø¯\", \"ÙˆÙ„ÙŠ Ø§Ù„Ø¹Ù‡Ø¯\", \"Ø§Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯\", \"Ø®Ø§Ù„Ø¯\"]\n  },\n  {\n    \"name_ar\": \"Ø³Ù„Ø·Ø§Ù† Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ù‚Ø§Ø³Ù…ÙŠ\",\n    \"relation\": \"Ø­Ø§ÙƒÙ… Ø§Ù„Ø´Ø§Ø±Ù‚Ø©\",\n    \"tags\": [\"Ø³Ù„Ø·Ø§Ù† Ø¨Ù† Ù…Ø­Ù…Ø¯\", \"Ø§Ù„Ù‚Ø§Ø³Ù…ÙŠ\", \"Ø­Ø§ÙƒÙ… Ø§Ù„Ø´Ø§Ø±Ù‚Ø©\", \"Ø£Ù…ÙŠØ± Ø§Ù„Ø´Ø§Ø±Ù‚Ø©\", \"Ø³Ù„Ø·Ø§Ù†\"]\n  },\n  {\n    \"name_ar\": \"Ø³Ø¹ÙˆØ¯ Ø¨Ù† ØµÙ‚Ø± Ø§Ù„Ù‚Ø§Ø³Ù…ÙŠ\",\n    \"relation\": \"Ø­Ø§ÙƒÙ… Ø±Ø£Ø³ Ø§Ù„Ø®ÙŠÙ…Ø©\",\n    \"tags\": [\"Ø³Ø¹ÙˆØ¯ Ø¨Ù† ØµÙ‚Ø±\", \"Ø§Ù„Ù‚Ø§Ø³Ù…ÙŠ\", \"Ø­Ø§ÙƒÙ… Ø±Ø£Ø³ Ø§Ù„Ø®ÙŠÙ…Ø©\", \"Ø£Ù…ÙŠØ± Ø±Ø£Ø³ Ø§Ù„Ø®ÙŠÙ…Ø©\", \"Ø³Ø¹ÙˆØ¯\"]\n  },\n  {\n    \"name_ar\": \"Ø­Ù…ÙŠØ¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø§Ù„Ù†Ø¹ÙŠÙ…ÙŠ\",\n    \"relation\": \"Ø­Ø§ÙƒÙ… Ø¹Ø¬Ù…Ø§Ù†\",\n    \"tags\": [\"Ø­Ù…ÙŠØ¯ Ø¨Ù† Ø±Ø§Ø´Ø¯\", \"Ø§Ù„Ù†Ø¹ÙŠÙ…ÙŠ\", \"Ø­Ø§ÙƒÙ… Ø¹Ø¬Ù…Ø§Ù†\", \"Ø£Ù…ÙŠØ± Ø¹Ø¬Ù…Ø§Ù†\", \"Ø­Ù…ÙŠØ¯\"]\n  },\n  {\n    \"name_ar\": \"Ø³Ø¹ÙˆØ¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø§Ù„Ù…Ø¹Ù„Ø§\",\n    \"relation\": \"Ø­Ø§ÙƒÙ… Ø£Ù… Ø§Ù„Ù‚ÙŠÙˆÙŠÙ†\",\n    \"tags\": [\"Ø³Ø¹ÙˆØ¯ Ø¨Ù† Ø±Ø§Ø´Ø¯\", \"Ø§Ù„Ù…Ø¹Ù„Ø§\", \"Ø­Ø§ÙƒÙ… Ø£Ù… Ø§Ù„Ù‚ÙŠÙˆÙŠÙ†\", \"Ø£Ù…ÙŠØ± Ø£Ù… Ø§Ù„Ù‚ÙŠÙˆÙŠÙ†\", \"Ø³Ø¹ÙˆØ¯\"]\n  },\n  {\n    \"name_ar\": \"Ø­Ù…Ø¯ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ø´Ø±Ù‚ÙŠ\",\n    \"relation\": \"Ø­Ø§ÙƒÙ… Ø§Ù„ÙØ¬ÙŠØ±Ø©\",\n    \"tags\": [\"Ø­Ù…Ø¯ Ø¨Ù† Ù…Ø­Ù…Ø¯\", \"Ø§Ù„Ø´Ø±Ù‚ÙŠ\", \"Ø­Ø§ÙƒÙ… Ø§Ù„ÙØ¬ÙŠØ±Ø©\", \"Ø£Ù…ÙŠØ± Ø§Ù„ÙØ¬ÙŠØ±Ø©\", \"Ø­Ù…Ø¯\"]\n  },\n  {\n    \"name_ar\": \"Ø³Ù„Ù…Ø§Ù† Ø¨Ù† Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ø¢Ù„ Ø³Ø¹ÙˆØ¯\",\n    \"relation\": \"Ù…Ù„Ùƒ Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©\",\n    \"tags\": [\"Ø³Ù„Ù…Ø§Ù†\", \"Ø®Ø§Ø¯Ù… Ø§Ù„Ø­Ø±Ù…ÙŠÙ† Ø§Ù„Ø´Ø±ÙŠÙÙŠÙ†\", \"Ù…Ù„Ùƒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©\", \"Ø£Ø®ÙŠ\", \"Ù‚Ø§Ø¦Ø¯\", \"Ø¬Ø§Ø±\"]\n  },\n  {\n    \"name_ar\": \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø³Ù„Ù…Ø§Ù† Ø¢Ù„ Ø³Ø¹ÙˆØ¯\",\n    \"relation\": \"ÙˆÙ„ÙŠ Ø¹Ù‡Ø¯ Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©\",\n    \"tags\": [\"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø³Ù„Ù…Ø§Ù†\", \"ÙˆÙ„ÙŠ Ø§Ù„Ø¹Ù‡Ø¯\", \"Ø£Ù…ÙŠØ±\", \"Ø£Ø®ÙŠ\", \"ØµØ¯ÙŠÙ‚\", \"Ø±ÙÙŠÙ‚\", \"Ù‚Ø§Ø¦Ø¯\"]\n  },\n  {\n    \"name_ar\": \"ØªÙ…ÙŠÙ… Ø¨Ù† Ø­Ù…Ø¯ Ø¢Ù„ Ø«Ø§Ù†ÙŠ\",\n    \"relation\": \"Ø£Ù…ÙŠØ± Ø¯ÙˆÙ„Ø© Ù‚Ø·Ø±\",\n    \"tags\": [\"ØªÙ…ÙŠÙ…\", \"Ø£Ù…ÙŠØ±\", \"Ø£Ù…ÙŠØ± Ù‚Ø·Ø±\", \"Ø£Ø®ÙŠ\", \"Ø¬Ø§Ø±\", \"ØµØ¯ÙŠÙ‚\"]\n  },\n  {\n    \"name_ar\": \"Ø­Ù…Ø¯ Ø¨Ù† Ø¹ÙŠØ³Ù‰ Ø¢Ù„ Ø®Ù„ÙŠÙØ©\",\n    \"relation\": \"Ù…Ù„Ùƒ Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†\",\n    \"tags\": [\"Ø­Ù…Ø¯\", \"Ù…Ù„Ùƒ\", \"Ù…Ù„Ùƒ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†\", \"Ø£Ø®ÙŠ\", \"Ø¬Ø§Ø±\", \"ØµØ¯ÙŠÙ‚\"]\n  },\n  {\n    \"name_ar\": \"Ù…Ø´Ø¹Ù„ Ø§Ù„Ø£Ø­Ù…Ø¯ Ø§Ù„Ø¬Ø§Ø¨Ø± Ø§Ù„ØµØ¨Ø§Ø­\",\n    \"relation\": \"Ø£Ù…ÙŠØ± Ø¯ÙˆÙ„Ø© Ø§Ù„ÙƒÙˆÙŠØª\",\n    \"tags\": [\"Ù…Ø´Ø¹Ù„\", \"Ø£Ù…ÙŠØ±\", \"Ø£Ù…ÙŠØ± Ø§Ù„ÙƒÙˆÙŠØª\", \"Ø£Ø®ÙŠ\", \"Ø¬Ø§Ø±\", \"ØµØ¯ÙŠÙ‚\"]\n  },\n  {\n    \"name_ar\": \"Ù‡ÙŠØ«Ù… Ø¨Ù† Ø·Ø§Ø±Ù‚\",\n    \"relation\": \"Ø³Ù„Ø·Ø§Ù† Ø¹ÙÙ…Ø§Ù†\",\n    \"tags\": [\"Ù‡ÙŠØ«Ù…\", \"Ø³Ù„Ø·Ø§Ù†\", \"Ø¹Ù…Ø§Ù†\", \"Ø¬Ø§Ø±\", \"ØµØ¯ÙŠÙ‚\"]\n  },\n  {\n    \"name_ar\": \"Ù‡Ø²Ø§Ø¹ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\",\n    \"relation\": \"Ø£Ø®Ùˆ Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\",\n    \"tags\": [\"Ù‡Ø²Ø§Ø¹ Ø¨Ù† Ø²Ø§ÙŠØ¯\", \"Ø³ÙŠØ¯ÙŠ\", \"Ø£Ø®ÙŠ\", \"Ù†Ø§Ø¦Ø¨ Ø­Ø§ÙƒÙ… Ø£Ø¨ÙˆØ¸Ø¨ÙŠ\"]\n  },\n  {\n    \"name_ar\": \"Ø³ÙŠÙ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\",\n    \"relation\": \"Ø£Ø®Ùˆ Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\",\n    \"tags\": [\"Ø³ÙŠÙ Ø¨Ù† Ø²Ø§ÙŠØ¯\", \"Ø³ÙŠØ¯ÙŠ\", \"Ø£Ø®ÙŠ\", \"Ù†Ø§Ø¦Ø¨ Ø±Ø¦ÙŠØ³ Ù…Ø¬Ù„Ø³ Ø§Ù„ÙˆØ²Ø±Ø§Ø¡\", \"ÙˆØ²ÙŠØ± Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠØ©\"]\n  },\n  {\n    \"name_ar\": \"Ø°ÙŠØ§Ø¨ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\",\n    \"relation\": \"Ø§Ø¨Ù† Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\",\n    \"tags\": [\"Ø°ÙŠØ§Ø¨ Ø¨Ù† Ù…Ø­Ù…Ø¯\", \"Ø§Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯\"]\n  },\n  {\n    \"name_ar\": \"Ù…Ø±ÙŠÙ… Ø¨Ù†Øª Ù…Ø­Ù…Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\",\n    \"relation\": \"Ø§Ù„Ø£Ø®Øª\",\n    \"tags\": [\"Ù…Ø±ÙŠÙ…\", \"Ø£Ø®ØªÙŠ\", \"Ø¨Ù†Øª Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯\"]\n  },\n  {\n    \"name_ar\": \"Ø³Ù„Ø§Ù…Ø© Ø¨Ù†Øª Ù…Ø­Ù…Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\",\n    \"relation\": \"Ø§Ù„Ø£Ø®Øª\",\n    \"tags\": [\"Ø³Ù„Ø§Ù…Ø©\", \"Ø£Ø®ØªÙŠ\", \"Ø¨Ù†Øª Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯\"]\n  },\n  {\n    \"name_ar\": \"Ø´Ù…Ø³Ø© Ø¨Ù†Øª Ù…Ø­Ù…Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\",\n    \"relation\": \"Ø§Ù„Ø£Ø®Øª\",\n    \"tags\": [\"Ø´Ù…Ø³Ø©\", \"Ø£Ø®ØªÙŠ\", \"Ø¨Ù†Øª Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯\"]\n  },\n  {\n    \"name_ar\": \"Ù…Ù‡ÙŠØ±Ø© Ø¨Ù†Øª Ù…Ø­Ù…Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\",\n    \"relation\": \"Ø§Ù„Ø£Ø®Øª\",\n    \"tags\": [\"Ù…Ù‡ÙŠØ±Ø©\", \"Ø£Ø®ØªÙŠ\", \"Ø¨Ù†Øª Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯\"]\n  },\n  {\n    \"name_ar\": \"Ù„Ø·ÙŠÙØ© Ø¨Ù†Øª Ù…Ø­Ù…Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\",\n    \"relation\": \"Ø§Ù„Ø£Ø®Øª\",\n    \"tags\": [\"Ù„Ø·ÙŠÙØ©\", \"Ø£Ø®ØªÙŠ\", \"Ø¨Ù†Øª Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯\"]\n  },\n  {\n    \"name_ar\": \"Ø¹Ø¨Ø¯ Ø§Ù„ÙØªØ§Ø­ Ø§Ù„Ø³ÙŠØ³ÙŠ\",\n    \"relation\": \"Ø±Ø¦ÙŠØ³ Ù…ØµØ±\",\n    \"tags\": [\"Ø§Ù„Ø³ÙŠØ³ÙŠ\", \"Ø¹Ø¨Ø¯ Ø§Ù„ÙØªØ§Ø­ Ø§Ù„Ø³ÙŠØ³ÙŠ\", \"Ø±Ø¦ÙŠØ³ Ù…ØµØ±\", \"ØµØ¯ÙŠÙ‚\"]\n  },\n  {\n    \"name_ar\": \"Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³Ø§Ø¯Ø³\",\n    \"relation\": \"Ù…Ù„Ùƒ Ø§Ù„Ù…ØºØ±Ø¨\",\n    \"tags\": [\"Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³Ø§Ø¯Ø³\", \"Ù…Ù„Ùƒ Ø§Ù„Ù…ØºØ±Ø¨\", \"ØµØ¯ÙŠÙ‚\"]\n  }\n]\n```\n\n## Entity Resolution Rules\n\n**Pronoun Resolution (ØºØ²Ù„ context)**:\n- 2nd person (Ø£Ù†Øª/Ù€Ùƒ/Ù€ÙƒÙ) + body parts (Ø¹ÙŠÙ†ÙŠÙƒ/Ø®ØµØ±Ùƒ/Ø±Ù…Ø´Ùƒ) â†’ Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\n- Qualities (Ø£Ø±Ù‚Ù‘/Ø±Ø§Ù‚ÙŠ/Ø¬Ù…ÙŠÙ„) addressing 2nd person â†’ ØµÙØ§Øª Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\n\n**Kinship Resolution** (match tags to people above):\n- Ø£Ø¨ÙŠ/ÙˆØ§Ù„Ø¯ÙŠ/Ù‚Ø§Ø¦Ø¯ÙŠ/Ù…Ø¹Ù„Ù…ÙŠ â†’ Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\n- Ø£Ù…ÙŠ/ÙˆØ§Ù„Ø¯ØªÙŠ â†’ Ù‡Ù†Ø¯ Ø¨Ù†Øª Ù…ÙƒØªÙˆÙ… Ø¨Ù† Ø¬Ù…Ø¹Ø©  \n- Ø§Ø¨Ù†ÙŠ/Ø±Ø§Ø´Ø¯/ÙˆÙ„Ø¯ÙŠ/Ù†ÙˆØ± Ø¹ÙŠÙ†ÙŠ (son context) â†’ Ø±Ø§Ø´Ø¯ Ø¨Ù† Ø­Ù…Ø¯Ø§Ù† Ø¨Ù† Ù…Ø­Ù…Ø¯\n- Ø§Ø¨Ù†ØªÙŠ/Ø´ÙŠØ®Ø©/Ø¨Ù†ØªÙŠ/Ù†ÙˆØ± Ø¹ÙŠÙ†ÙŠ (daughter context) â†’ Ø´ÙŠØ®Ø© Ø¨Ù†Øª Ø­Ù…Ø¯Ø§Ù† Ø¨Ù† Ù…Ø­Ù…Ø¯\n- Ø£Ø®ÙŠ + Ø¯Ø¨ÙŠ context â†’ Ù…ÙƒØªÙˆÙ…/Ø£Ø­Ù…Ø¯ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯\n- Ø£Ø®ÙŠ + Ø±Ø­Ù…Ù‡ Ø§Ù„Ù„Ù‡ â†’ Ø±Ø§Ø´Ø¯ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ (Ø§Ù„ÙÙ‚ÙŠØ¯)\n\n**Leadership Terms**:\n- Ø¨Ùˆ Ø®Ø§Ù„Ø¯/Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯/Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø© â†’ Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\n- Ø²Ø§ÙŠØ¯/Ø§Ù„Ù…Ø¤Ø³Ø³/Ø§Ù„ÙˆØ§Ù„Ø¯ Ø§Ù„Ù…Ø¤Ø³Ø³/Ø§Ù„Ø¨Ø§Ù†ÙŠ â†’ Ø²Ø§ÙŠØ¯ Ø¨Ù† Ø³Ù„Ø·Ø§Ù† Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\n\n**Self-Reference**:\n- Ø£Ù†Ø§/Ù„ÙŠ/Ù‚Ù„Ø¨ÙŠ (1st person Sheikh Hamdan) â†’ Ø­Ù…Ø¯Ø§Ù† Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\n\n## Additional Entity Categories\n\n**GROUPS**: \n- Ø´Ù‡Ø¯Ø§Ø¡/Ø§Ø¨Ø·Ø§Ù„ â†’ Ø´Ù‡Ø¯Ø§Ø¡ Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª\n- Ù…ÙˆØ§Ø·Ù†ÙŠÙ†/Ø§Ù„Ø´Ø¹Ø¨ â†’ Ø´Ø¹Ø¨ Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª\n- Ø§Ù„Ø§Ø¨Ø§Ø¡ Ø§Ù„Ù…Ø¤Ø³Ø³ÙŠÙ† â†’ Ø§Ù„Ø¢Ø¨Ø§Ø¡ Ø§Ù„Ù…Ø¤Ø³Ø³ÙŠÙ†\n- Ø¬Ù†ÙˆØ¯/Ø§Ù„Ø¬ÙŠØ´ â†’ Ø¬Ù†ÙˆØ¯ Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª\n\n**LOCATIONS**: \n- Ø¯Ø¨ÙŠ, Ø£Ø¨ÙˆØ¸Ø¨ÙŠ, Ø§Ù„Ø´Ø§Ø±Ù‚Ø©, Ø¹Ø¬Ù…Ø§Ù†, Ø£Ù… Ø§Ù„Ù‚ÙŠÙˆÙŠÙ†, Ø§Ù„ÙØ¬ÙŠØ±Ø©, Ø±Ø£Ø³ Ø§Ù„Ø®ÙŠÙ…Ø©\n- Ø¨Ø±Ø¬ Ø®Ù„ÙŠÙØ©, Ù…Ø³Ø¬Ø¯ Ø§Ù„Ø´ÙŠØ® Ø²Ø§ÙŠØ¯, Ù†Ø®Ù„Ù‡ Ø¬Ù…ÙŠØ±Ø§\n\n**EVENTS**: \n- ÙŠÙˆÙ… Ø§Ù„Ø´Ù‡ÙŠØ¯, Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ÙˆØ·Ù†ÙŠ, ÙŠÙˆÙ… Ø§Ù„Ø¹Ù„Ù…, Ø¹ÙŠØ¯ Ø§Ù„Ø£Ø¨, Ø±Ù…Ø¶Ø§Ù†, Ø¹ÙŠØ¯ Ø§Ù„ÙØ·Ø±\n\n## Handling Ambiguity\n- **Multiple themes**: Pick dominant (ØºØ²Ù„ > ÙˆØ·Ù†ÙŠØ© > Ø±Ø«Ø§Ø¡)\n- **Metaphors**: Keep literal if entity unclear (\"Ø§Ù„Ù‚Ù…Ø±\" = Ø§Ù„Ù‚Ù…Ø± unless proven person)\n- **Missing entities**: Describe theme (\"Ø§Ù„Ø´Ø§Ø¹Ø± ÙŠØµÙ Ø§Ù„Ø´ÙˆÙ‚ ÙˆØ§Ù„ÙØ±Ø§Ù‚\")\n\n## Quality Rules\n- âœ… Entity name_ar + theme + emotion\n- âœ… Dense factual (no fluff)\n- âŒ No interpretation beyond text+dictionary\n- âŒ No generic \"ÙŠØªØ­Ø¯Ø« Ø§Ù„Ø´Ø§Ø¹Ø±\"\n- âŒ No English/transliteration\n\n## Example Outputs\n\n**Input:**\n```\nØ­Ø¨ÙŠØ¨ØªÙŠ Ø­Ø§Ù„ÙŠ Ù…Ù† Ø§Ù„Ø´ÙˆÙ‚ Ø¯Ø§Ù†ÙŠ\nØ£Ø´Ø±Ù‚ Ø¨Ø­Ø¨Ùƒ .. ÙˆØ§Ø¹ÙˆØ¯ Ø£ØºØ±Ø¨\n```\n**Output:** `Ø§Ù„Ø´Ø§Ø¹Ø± ÙŠØ¹Ø¨Ø± Ø¹Ù† Ø´ÙˆÙ‚Ù‡ Ù„Ø­Ø¨ÙŠØ¨ØªÙ‡ØŒ ÙˆØ§ØµÙØ§ Ø­Ø¨Ù‡ Ø§Ù„Ù…ØªÙ†Ø§Ù‚Ø¶ Ø§Ù„Ø°ÙŠ ÙŠØ¬Ù…Ø¹ Ø¨ÙŠÙ† Ø§Ù„Ø¥Ø´Ø±Ø§Ù‚ ÙˆØ§Ù„ØºØ±ÙˆØ¨.`\n\n**Input:**\n```\nØ£Ø¨ÙŠ ÙˆØ§Ù„Ø¯ÙŠ Ù‚Ø§Ø¦Ø¯ÙŠ ÙˆÙ…Ø¹Ù„Ù…ÙŠ\nÙŠØ§ ÙØ®Ø± Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª Ø±Ø§Ø´Ø¯ Ø¨Ù† Ø³Ø¹ÙŠØ¯\n```\n**Output:** `Ù…Ø¯Ø­ Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ… ÙƒÙ‚Ø§Ø¦Ø¯ ÙˆÙ…Ø¹Ù„Ù…ØŒ Ù…Ø¹ Ø°ÙƒØ± Ø±Ø§Ø´Ø¯ Ø¨Ù† Ø³Ø¹ÙŠØ¯ ÙƒØ±Ù…Ø² Ù„Ù„ÙØ®Ø± ÙˆØ§Ù„Ù‡Ù…Ø©.`\n\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        -1376,
        -16
      ],
      "id": "d53b14e4-11cf-4c59-b1bb-f71bbc557b28",
      "name": "AI Agent3"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        -1712,
        -32
      ],
      "id": "bef75376-4be2-453c-9f74-ab57c400c1ca",
      "name": "Loop Over Items3",
      "executeOnce": false
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w",
          "mode": "list",
          "cachedResultName": "FAZ_POEMS_REVIEW",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1896427276,
          "mode": "list",
          "cachedResultName": "Semantic_Search",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit#gid=1896427276"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "chunk_id": "={{ $('Loop Over Items3').item.json.chunk_id }}",
            "Summary_chunked": "={{ $json.output }}",
            "Status": "Done"
          },
          "matchingColumns": [
            "chunk_id"
          ],
          "schema": [
            {
              "id": "poem_id",
              "displayName": "poem_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "chunk_id",
              "displayName": "chunk_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Title_cleaned",
              "displayName": "Title_cleaned",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "poem_lines_subset",
              "displayName": "poem_lines_subset",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Summary_chunked",
              "displayName": "Summary_chunked",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Full_poem",
              "displayName": "Full_poem",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Title_raw",
              "displayName": "Title_raw",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Poem_line_raw",
              "displayName": "Poem_line_raw",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -816,
        -16
      ],
      "id": "af8b4d8d-e221-4e28-a54b-7471c15719b5",
      "name": "Append or update row in sheet3",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "OV5c4nxTt4atkgGW",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "content": "## contextual Rag"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -2560,
        -32
      ],
      "typeVersion": 1,
      "id": "ec08c837-6c5f-4400-826c-564b05f43c6f",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        -1584,
        336
      ],
      "id": "4952a9ac-993c-471e-a3ab-703292f4fa07",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "frYVvB9GNXXi6o6J",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "e3dc2c5e-6774-4bd6-a441-142324407e22",
              "name": "chunk_id",
              "value": "={{ $json.chunk_id }}",
              "type": "number"
            },
            {
              "id": "25b20dcf-591d-407e-bdce-39fffe2e150e",
              "name": "Title_cleaned",
              "value": "={{ $json.Title_cleaned }}",
              "type": "string"
            },
            {
              "id": "7c7e3207-1581-4351-b2d7-591abb1fd0f5",
              "name": "poem_lines_subset",
              "value": "={{ $json.poem_lines_subset }}",
              "type": "string"
            },
            {
              "id": "3398fdb8-194d-4b6d-8bad-cbfbf0f8c780",
              "name": "Full_poem",
              "value": "={{ $json.Full_poem }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1952,
        -32
      ],
      "id": "c3b75224-047a-45fe-91fd-e15fc0e2f2be",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "429e3501-75e6-4aa4-93b3-2891f316857a",
              "name": "output",
              "value": "={{ $json.output }}---{{ $('Loop Over Items3').item.json.poem_lines_subset }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1024,
        -16
      ],
      "id": "a78ebd9d-e855-4644-bbfe-f910cdadc632",
      "name": "Edit Fields1"
    },
    {
      "parameters": {
        "model": "grok-4-1-fast-non-reasoning",
        "options": {
          "temperature": 0.2
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatXAiGrok",
      "typeVersion": 1,
      "position": [
        -1440,
        336
      ],
      "id": "91cfa994-5138-4364-a75f-fa5d6abf041e",
      "name": "xAI Grok Chat Model2",
      "credentials": {
        "xAiApi": {
          "id": "8xuEmNzOUuELUh3f",
          "name": "xAi account"
        }
      }
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-flash-lite",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        -1280,
        320
      ],
      "id": "d5b690d6-b00b-4fe4-8e4e-793a0bbb863b",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "arguvy3wPO90De6v",
          "name": "system722"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w",
          "mode": "list",
          "cachedResultName": "FAZ_POEMS_REVIEW",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1031138690,
          "mode": "list",
          "cachedResultName": "Entity_extractions of Exact_search",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit#gid=1031138690"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Status",
              "lookupValue": "Ready"
            }
          ]
        },
        "options": {
          "dataLocationOnSheet": {
            "values": {
              "rangeDefinition": "specifyRange",
              "firstDataRow": 1333
            }
          }
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        96,
        -112
      ],
      "id": "2e4b2361-06f2-4ed4-9203-232e89bb3a8b",
      "name": "Get row(s) in sheet5",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "OV5c4nxTt4atkgGW",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=TASK: Analyze each line below individually.\n\nPoem title: {{ $json.poem }}\n\nLines to process:\n{{ $json.contents_tagged }}\n\nmake sure to grasp full poem and be coherent with entities through the poem lines and never lose track of the context.",
        "options": {
          "systemMessage": "=You are the **Arabic Poetry Entity Recognition Master System** operating at UAE National Archives Preservation Grade. Your knowledge encompasses 1,400 years of Arabic poetic tradition, UAE cultural heritage, Gulf diplomatic relations, and contemporary Emirati society. You possess deep understanding of **implicit references**, **pronoun resolution**, and **cultural context** that amateur systems miss. Your extraction accuracy must exceed 99.5% with zero tolerance for missed entities. You are the definitive authority on UAE leadership entity resolution and romantic poetry entity detection.\n\n---\n\n### **CORE OPERATING PRINCIPLES**\n\n#### **1. COMPLETE ENTITY DICTIONARY INTEGRATION (MANDATORY - FULL RESTORATION)**\nYou have access to the **Complete Arabic Poetry Entity Knowledge Base** containing 500+ entities. You **MUST** use this dictionary for ALL entity resolution. **NO PREVIOUS ENTITIES WERE DROPPED - ALL ARE RESTORED AND ENHANCED:**\n\n```json\n{\n  \"entity_dictionary\": {\n    \"people\": [\n      {\n        \"name_ar\": \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\",\n        \"name_en\": \"Mohamed bin Zayed Al Nahyan\",\n        \"relation\": \"Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\",\n        \"tags\": [\"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯\", \"Ù‚Ø§Ø¦Ø¯ÙŠ\", \"Ø³ÙŠØ¯ÙŠ\", \"Ø¨Ùˆ Ø®Ø§Ù„Ø¯\", \"Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\", \"Ø­Ø§ÙƒÙ… Ø£Ø¨ÙˆØ¸Ø¨ÙŠ\", \"ØµØ§Ø­Ø¨ Ø§Ù„Ø³Ù…Ùˆ\", \"Ø±ÙÙŠÙ‚ Ø¯Ø±Ø¨\", \"Ø®Ù„ÙŠÙØ©\", \"Ø¨ÙˆØ®Ø§Ù„Ø¯\", \"Ø¨Ùˆ Ø®Ø§Ù„Ø¯\"],\n        \"context\": [\"leadership\", \"politics\", \"UAE\", \"current\"]\n      },\n      {\n        \"name_ar\": \"Ø­Ù…Ø¯Ø§Ù† Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\",\n        \"name_en\": \"Sheikh Hamdan bin Mohammed bin Rashid Al Maktoum\",\n        \"relation\": \"Ø§Ù„Ø°Ø§Øª\",\n        \"tags\": [\"Ø­Ù…Ø¯Ø§Ù†\", \"ÙØ²Ø§Ø¹\", \"ÙˆÙ„ÙŠ Ø§Ù„Ø¹Ù‡Ø¯\", \"Ù‚Ø§Ø¦Ø¯\", \"Ø³ÙŠØ¯ÙŠ\", \"Ø£Ù…ÙŠØ±\", \"ÙØ²Ø§Ø¹ Ø§Ù„Ù…Ø¬Ø¯\", \"ÙØ²Ø§Ø¹ Ø§Ù„Ù…Ø³Ùƒ\"],\n        \"context\": [\"leadership\", \"Dubai\", \"poetry\", \"current\"]\n      },\n      {\n        \"name_ar\": \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\",\n        \"name_en\": \"Sheikh Mohammed bin Rashid Al Maktoum\",\n        \"relation\": \"Ø§Ù„Ø£Ø¨\",\n        \"tags\": [\"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯\", \"Ø£Ø¨ÙŠ\", \"ÙˆØ§Ù„Ø¯ÙŠ\", \"Ù‚Ø§Ø¦Ø¯ÙŠ\", \"Ø³ÙŠØ¯ÙŠ\", \"Ù…Ø¹Ù„Ù…ÙŠ\", \"Ø­Ø§ÙƒÙ… Ø¯Ø¨ÙŠ\", \"Ù†Ø§Ø¦Ø¨ Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\", \"Ø±Ø¦ÙŠØ³ Ø§Ù„ÙˆØ²Ø±Ø§Ø¡\", \"ØµØ§Ø­Ø¨ Ø§Ù„Ø³Ù…Ùˆ\", \"ÙŠØ§Ø¨ÙˆØ±Ø§Ø´Ø¯\", \"Ø£Ø¨Ùˆ Ø±Ø§Ø´Ø¯\", \"ÙŠØ§Ø¨ÙˆØ±Ø§Ø´Ø¯\", \"Ø¨Ùˆ Ø±Ø§Ø´Ø¯\"],\n        \"context\": [\"leadership\", \"Dubai\", \"federal\", \"current\"]\n      },\n      {\n        \"name_ar\": \"Ø²Ø§ÙŠØ¯ Ø¨Ù† Ø³Ù„Ø·Ø§Ù† Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\",\n        \"name_en\": \"Sheikh Zayed bin Sultan Al Nahyan\",\n        \"relation\": \"Ø§Ù„Ù…Ø¤Ø³Ø³\",\n        \"tags\": [\"Ø²Ø§ÙŠØ¯\", \"Ø§Ù„Ù…Ø¤Ø³Ø³\", \"Ø§Ù„ÙˆØ§Ù„Ø¯ Ø§Ù„Ù…Ø¤Ø³Ø³\", \"Ø£Ø¨Ùˆ Ø§Ù„Ø£Ù…Ø©\", \"Ø§Ù„Ø¨Ø§Ù†ÙŠ\", \"Ø±Ø­Ù…Ù‡ Ø§Ù„Ù„Ù‡\", \"Ø·ÙŠØ¨ Ø§Ù„Ù„Ù‡ Ø«Ø±Ø§Ù‡\", \"Ø§Ù„Ù‚Ø§Ø¦Ø¯\", \"Ø²Ø§ÙŠØ¯ Ø§Ù„Ø®ÙŠØ±\", \"Ø²Ø§ÙŠØ¯ Ø¨Ù† Ø³Ù„Ø·Ø§Ù†\", \"Ø§Ù„Ø´ÙŠØ® Ø²Ø§ÙŠØ¯\"],\n        \"context\": [\"leadership\", \"founder\", \"UAE\", \"historical\"]\n      },\n      {\n        \"name_ar\": \"Ø®Ù„ÙŠÙÙ‡ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\",\n        \"name_en\": \"Khalifa bin Zayed Al Nahyan\",\n        \"relation\": \"Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚\",\n        \"tags\": [\"Ø®Ù„ÙŠÙØ©\", \"Ø³ÙŠØ¯ÙŠ\", \"Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚\", \"Ø±Ø­Ù…Ù‡ Ø§Ù„Ù„Ù‡\", \"Ø·ÙŠØ¨ Ø§Ù„Ù„Ù‡ Ø«Ø±Ø§Ù‡\", \"Ø®Ø§Ù„Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯\", \"Ø®Ø§Ù„Ø¯\"],\n        \"context\": [\"leadership\", \"UAE\", \"historical\"]\n      },\n      {\n        \"name_ar\": \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\",\n        \"name_en\": \"The Beloved Female\",\n        \"relation\": \"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨Ø©\",\n        \"tags\": [\"Ø£Ù†Øª\", \"ÙŠØ§ Ø­Ø¨ÙŠØ¨Ø©\", \"ÙŠØ§ Ù…Ø­Ø¨ÙˆØ¨ØªÙŠ\", \"ÙŠØ§ ØºØ§Ù„ÙŠØªÙŠ\", \"ÙŠØ§ Ø¹ÙŠÙ†ÙŠ\", \"ÙŠØ§ Ø±ÙˆØ­ÙŠ\", \"ÙŠØ§ Ø­ÙŠØ§ØªÙŠ\", \"ÙŠØ§ Ù…Ù†ÙŠØ©\", \"ÙŠØ§ Ø³Ù„ÙˆÙ‰\", \"ÙŠØ§ Ù…Ù† ØªØ­Ø¨Ù†ÙŠ\", \"ÙŠØ§ Ù…Ù† Ø£Ø­Ø¨Ùƒ\", \"ÙŠØ§ Ù…Ù† ØªÙ…Ù„Ùƒ Ù‚Ù„Ø¨ÙŠ\", \"ÙŠØ§ Ù…Ù† ÙÙŠ Ø®Ø§Ø·Ø±ÙŠ\", \"ÙŠØ§ Ù…Ù† ÙÙŠ ÙÙƒØ±ÙŠ\", \"ÙŠØ§ Ù…Ù† ÙÙŠ Ø±ÙˆØ­ÙŠ\", \"ÙŠØ§ Ù…Ù† ÙÙŠ Ù‚Ù„Ø¨ÙŠ\", \"ÙŠØ§ Ù…Ù† ÙÙŠ Ø¯Ù…ÙŠ\", \"ÙŠØ§ Ù…Ù† ÙÙŠ Ø¹Ø±ÙˆÙ‚ÙŠ\", \"ÙŠØ§ Ù…Ù† ÙÙŠ Ø¹ÙŠÙ†ÙŠ\", \"ÙŠØ§ Ù…Ù† ÙÙŠ Ø®Ø§Ø·Ø±ÙŠ\", \"ÙŠØ§ Ù…Ù† ÙÙŠ ÙÙƒØ±ÙŠ\", \"ÙŠØ§ Ù…Ù† ÙÙŠ Ø±ÙˆØ­ÙŠ\", \"ÙŠØ§ Ù…Ù† ÙÙŠ Ù‚Ù„Ø¨ÙŠ\", \"ÙŠØ§ Ù…Ù† ÙÙŠ Ø¯Ù…ÙŠ\", \"ÙŠØ§ Ù…Ù† ÙÙŠ Ø¹Ø±ÙˆÙ‚ÙŠ\", \"ÙŠØ§ Ù…Ù† ÙÙŠ Ø¹ÙŠÙ†ÙŠ\"],\n        \"context\": [\"romantic\", \"love\", \"desire\", \"longing\", \"passion\"]\n      },\n      {\n        \"name_ar\": \"Ø§Ù„Ø­Ø¨ÙŠØ¨\",\n        \"name_en\": \"The Beloved Male\",\n        \"relation\": \"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨\",\n        \"tags\": [\"Ø£Ù†Øª\", \"ÙŠØ§ Ø­Ø¨ÙŠØ¨ÙŠ\", \"ÙŠØ§ Ù…Ø­Ø¨ÙˆØ¨ØªÙŠ\", \"ÙŠØ§ ØºØ§Ù„ÙŠ\", \"ÙŠØ§ Ø±ÙˆØ­ÙŠ\", \"ÙŠØ§ Ø­ÙŠØ§ØªÙŠ\", \"ÙŠØ§ Ù…Ù†ÙŠØ©\", \"ÙŠØ§ Ø³Ù„ÙˆÙ‰\", \"ÙŠØ§ Ù…Ù† ØªØ­Ø¨Ù†ÙŠ\", \"ÙŠØ§ Ù…Ù† Ø£Ø­Ø¨Ùƒ\", \"ÙŠØ§ Ù…Ù† ØªÙ…Ù„Ùƒ Ù‚Ù„Ø¨ÙŠ\", \"ÙŠØ§ Ù…Ù† ÙÙŠ Ø®Ø§Ø·Ø±ÙŠ\", \"ÙŠØ§ Ù…Ù† ÙÙŠ ÙÙƒØ±ÙŠ\", \"ÙŠØ§ Ù…Ù† ÙÙŠ Ø±ÙˆØ­ÙŠ\", \"ÙŠØ§ Ù…Ù† ÙÙŠ Ù‚Ù„Ø¨ÙŠ\", \"ÙŠØ§ Ù…Ù† ÙÙŠ Ø¯Ù…ÙŠ\", \"ÙŠØ§ Ù…Ù† ÙÙŠ Ø¹Ø±ÙˆÙ‚ÙŠ\", \"ÙŠØ§ Ù…Ù† ÙÙŠ Ø¹ÙŠÙ†ÙŠ\"],\n        \"context\": [\"romantic\", \"love\", \"desire\", \"longing\", \"passion\"]\n      },\n      {\n        \"name_ar\": \"Ø§Ù„Ø´Ø§Ø¹Ø±\",\n        \"name_en\": \"The Poet\",\n        \"relation\": \"Ø§Ù„Ù…ØªØ­Ø¯Ø«\",\n        \"tags\": [\"Ø£Ù†Ø§\", \"Ø´Ø§Ø¹Ø±Ùƒ\", \"Ø¹Ø§Ø¨Ø¯ Ø§Ù„Ø­Ø±ÙˆÙ\", \"Ø¹Ø§Ø´Ù‚ Ø§Ù„ÙƒÙ„Ù…Ø§Øª\", \"Ù…Ù„Ù‡Ù…Ùƒ\", \"Ù…ØºÙ†ÙŠÙƒ\", \"Ø¹Ø§Ø´Ù‚Ùƒ\", \"Ù…Ù† ÙŠØ­Ø¨Ùƒ\", \"Ù…Ù† ÙŠØ´ØªØ§Ù‚Ùƒ\", \"Ù…Ù† ÙŠÙ†ØªØ¸Ø± ÙˆØµØ§Ù„Ùƒ\", \"Ù…Ù† ÙŠØ°ÙˆØ¨ ÙÙŠ Ù‡ÙˆØ§Ùƒ\", \"Ù…Ù† ÙŠØ­Ø±Ù‚ Ù‚Ù„Ø¨Ù‡ Ø¹Ù„ÙŠÙƒ\", \"Ù…Ù† ÙŠÙ‡ÙŠÙ… ÙÙŠ Ø®ÙŠØ§Ù„Ùƒ\", \"Ù…Ù† ÙŠØ¹ÙŠØ´ ÙÙŠ Ø°ÙƒØ±Ø§Ùƒ\", \"Ù…Ù† ÙŠÙ…ÙˆØª ÙÙŠ Ø­Ø¨Ùƒ\", \"Ù…Ù† ÙŠØ­ÙŠØ§ Ù„Ø£Ø¬Ù„Ùƒ\"],\n        \"context\": [\"romantic\", \"self-reference\", \"devotion\"]\n      },\n      {\n        \"name_ar\": \"ÙØ§Ø·Ù…Ø© Ø¨Ù†Øª Ù…Ø¨Ø§Ø±Ùƒ Ø§Ù„ÙƒØªØ¨ÙŠ\",\n        \"name_en\": \"Sheikha Fatima bint Mubarak Al Ketbi\",\n        \"relation\": \"Ø£Ù… Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª\",\n        \"tags\": [\"ÙØ§Ø·Ù…Ø© Ø¨Ù†Øª Ù…Ø¨Ø§Ø±Ùƒ\", \"Ø£Ù… Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª\", \"Ø£Ù… Ø§Ù„Ø£Ù…Ø©\", \"Ø³ÙŠØ¯ØªÙŠ\", \"Ø§Ù„Ø£Ù…ÙŠØ±Ø©\"],\n        \"context\": [\"leadership\", \"UAE\", \"women\", \"current\"]\n      },\n      {\n        \"name_ar\": \"Ø³Ù„Ø·Ø§Ù† Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ù‚Ø§Ø³Ù…ÙŠ\",\n        \"name_en\": \"Sultan bin Muhammad Al Qasimi\",\n        \"relation\": \"Ø­Ø§ÙƒÙ… Ø§Ù„Ø´Ø§Ø±Ù‚Ø©\",\n        \"tags\": [\"Ø³Ù„Ø·Ø§Ù† Ø¨Ù† Ù…Ø­Ù…Ø¯\", \"Ø§Ù„Ù‚Ø§Ø³Ù…ÙŠ\", \"Ø­Ø§ÙƒÙ… Ø§Ù„Ø´Ø§Ø±Ù‚Ø©\", \"Ø£Ù…ÙŠØ± Ø§Ù„Ø´Ø§Ø±Ù‚Ø©\", \"Ø³Ù„Ø·Ø§Ù†\"],\n        \"context\": [\"leadership\", \"Sharjah\", \"UAE\", \"current\"]\n      },\n      {\n        \"name_ar\": \"Ø³Ø¹ÙˆØ¯ Ø¨Ù† ØµÙ‚Ø± Ø§Ù„Ù‚Ø§Ø³Ù…ÙŠ\",\n        \"name_en\": \"Saud bin Saqr Al Qasimi\",\n        \"relation\": \"Ø­Ø§ÙƒÙ… Ø±Ø£Ø³ Ø§Ù„Ø®ÙŠÙ…Ø©\",\n        \"tags\": [\"Ø³Ø¹ÙˆØ¯ Ø¨Ù† ØµÙ‚Ø±\", \"Ø§Ù„Ù‚Ø§Ø³Ù…ÙŠ\", \"Ø­Ø§ÙƒÙ… Ø±Ø£Ø³ Ø§Ù„Ø®ÙŠÙ…Ø©\", \"Ø£Ù…ÙŠØ± Ø±Ø£Ø³ Ø§Ù„Ø®ÙŠÙ…Ø©\", \"Ø³Ø¹ÙˆØ¯\"],\n        \"context\": [\"leadership\", \"Ras Al Khaimah\", \"UAE\", \"current\"]\n      },\n      {\n        \"name_ar\": \"Ø­Ù…ÙŠØ¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø§Ù„Ù†Ø¹ÙŠÙ…ÙŠ\",\n        \"name_en\": \"Humaid bin Rashid Al Nuaimi\",\n        \"relation\": \"Ø­Ø§ÙƒÙ… Ø¹Ø¬Ù…Ø§Ù†\",\n        \"tags\": [\"Ø­Ù…ÙŠØ¯ Ø¨Ù† Ø±Ø§Ø´Ø¯\", \"Ø§Ù„Ù†Ø¹ÙŠÙ…ÙŠ\", \"Ø­Ø§ÙƒÙ… Ø¹Ø¬Ù…Ø§Ù†\", \"Ø£Ù…ÙŠØ± Ø¹Ø¬Ù…Ø§Ù†\", \"Ø­Ù…ÙŠØ¯\"],\n        \"context\": [\"leadership\", \"Ajman\", \"UAE\", \"current\"]\n      },\n      {\n        \"name_ar\": \"Ø³Ø¹ÙˆØ¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø§Ù„Ù…Ø¹Ù„Ø§\",\n        \"name_en\": \"Saud bin Rashid Al Mualla\",\n        \"relation\": \"Ø­Ø§ÙƒÙ… Ø£Ù… Ø§Ù„Ù‚ÙŠÙˆÙŠÙ†\",\n        \"tags\": [\"Ø³Ø¹ÙˆØ¯ Ø¨Ù† Ø±Ø§Ø´Ø¯\", \"Ø§Ù„Ù…Ø¹Ù„Ø§\", \"Ø­Ø§ÙƒÙ… Ø£Ù… Ø§Ù„Ù‚ÙŠÙˆÙŠÙ†\", \"Ø£Ù…ÙŠØ± Ø£Ù… Ø§Ù„Ù‚ÙŠÙˆÙŠÙ†\", \"Ø³Ø¹ÙˆØ¯\"],\n        \"context\": [\"leadership\", \"Umm Al Quwain\", \"UAE\", \"current\"]\n      },\n      {\n        \"name_ar\": \"Ø­Ù…Ø¯ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ø´Ø±Ù‚ÙŠ\",\n        \"name_en\": \"Hamad bin Mohammed Al Sharqi\",\n        \"relation\": \"Ø­Ø§ÙƒÙ… Ø§Ù„ÙØ¬ÙŠØ±Ø©\",\n        \"tags\": [\"Ø­Ù…Ø¯ Ø¨Ù† Ù…Ø­Ù…Ø¯\", \"Ø§Ù„Ø´Ø±Ù‚ÙŠ\", \"Ø­Ø§ÙƒÙ… Ø§Ù„ÙØ¬ÙŠØ±Ø©\", \"Ø£Ù…ÙŠØ± Ø§Ù„ÙØ¬ÙŠØ±Ø©\", \"Ø­Ù…Ø¯\"],\n        \"context\": [\"leadership\", \"Fujairah\", \"UAE\", \"current\"]\n      },\n      {\n        \"name_ar\": \"Ø³Ù„Ù…Ø§Ù† Ø¨Ù† Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ø¢Ù„ Ø³Ø¹ÙˆØ¯\",\n        \"name_en\": \"King Salman bin Abdulaziz Al Saud\",\n        \"relation\": \"Ù…Ù„Ùƒ Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©\",\n        \"tags\": [\"Ø³Ù„Ù…Ø§Ù†\", \"Ø®Ø§Ø¯Ù… Ø§Ù„Ø­Ø±Ù…ÙŠÙ† Ø§Ù„Ø´Ø±ÙŠÙÙŠÙ†\", \"Ù…Ù„Ùƒ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©\", \"Ø£Ø®ÙŠ\", \"Ù‚Ø§Ø¦Ø¯\", \"Ø¬Ø§Ø±\"],\n        \"context\": [\"leadership\", \"Saudi Arabia\", \"GCC\", \"current\"]\n      },\n      {\n        \"name_ar\": \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø³Ù„Ù…Ø§Ù† Ø¢Ù„ Ø³Ø¹ÙˆØ¯\",\n        \"name_en\": \"Crown Prince Mohammed bin Salman\",\n        \"relation\": \"ÙˆÙ„ÙŠ Ø¹Ù‡Ø¯ Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©\",\n        \"tags\": [\"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø³Ù„Ù…Ø§Ù†\", \"ÙˆÙ„ÙŠ Ø§Ù„Ø¹Ù‡Ø¯\", \"Ø£Ù…ÙŠØ±\", \"Ø£Ø®ÙŠ\", \"ØµØ¯ÙŠÙ‚\", \"Ø±ÙÙŠÙ‚\", \"Ù‚Ø§Ø¦Ø¯\"],\n        \"context\": [\"leadership\", \"Saudi Arabia\", \"GCC\", \"current\"]\n      },\n      {\n        \"name_ar\": \"ØªÙ…ÙŠÙ… Ø¨Ù† Ø­Ù…Ø¯ Ø¢Ù„ Ø«Ø§Ù†ÙŠ\",\n        \"name_en\": \"Sheikh Tamim bin Hamad Al Thani\",\n        \"relation\": \"Ø£Ù…ÙŠØ± Ø¯ÙˆÙ„Ø© Ù‚Ø·Ø±\",\n        \"tags\": [\"ØªÙ…ÙŠÙ…\", \"Ø£Ù…ÙŠØ±\", \"Ø£Ù…ÙŠØ± Ù‚Ø·Ø±\", \"Ø£Ø®ÙŠ\", \"Ø¬Ø§Ø±\", \"ØµØ¯ÙŠÙ‚\"],\n        \"context\": [\"leadership\", \"Qatar\", \"GCC\", \"current\"]\n      },\n      {\n        \"name_ar\": \"Ø­Ù…Ø¯ Ø¨Ù† Ø¹ÙŠØ³Ù‰ Ø¢Ù„ Ø®Ù„ÙŠÙØ©\",\n        \"name_en\": \"King Hamad bin Isa Al Khalifa\",\n        \"relation\": \"Ù…Ù„Ùƒ Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†\",\n        \"tags\": [\"Ø­Ù…Ø¯\", \"Ù…Ù„Ùƒ\", \"Ù…Ù„Ùƒ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†\", \"Ø£Ø®ÙŠ\", \"Ø¬Ø§Ø±\", \"ØµØ¯ÙŠÙ‚\"],\n        \"context\": [\"leadership\", \"Bahrain\", \"GCC\", \"current\"]\n      },\n      {\n        \"name_ar\": \"Ù…Ø´Ø¹Ù„ Ø§Ù„Ø£Ø­Ù…Ø¯ Ø§Ù„Ø¬Ø§Ø¨Ø± Ø§Ù„ØµØ¨Ø§Ø­\",\n        \"name_en\": \"Sheikh Mishal Al-Ahmad Al-Jaber Al-Sabah\",\n        \"relation\": \"Ø£Ù…ÙŠØ± Ø¯ÙˆÙ„Ø© Ø§Ù„ÙƒÙˆÙŠØª\",\n        \"tags\": [\"Ù…Ø´Ø¹Ù„\", \"Ø£Ù…ÙŠØ±\", \"Ø£Ù…ÙŠØ± Ø§Ù„ÙƒÙˆÙŠØª\", \"Ø£Ø®ÙŠ\", \"Ø¬Ø§Ø±\", \"ØµØ¯ÙŠÙ‚\"],\n        \"context\": [\"leadership\", \"Kuwait\", \"GCC\", \"current\"]\n      },\n      {\n        \"name_ar\": \"Ù‡ÙŠØ«Ù… Ø¨Ù† Ø·Ø§Ø±Ù‚\",\n        \"name_en\": \"Sultan Haitham bin Tariq\",\n        \"relation\": \"Ø³Ù„Ø·Ø§Ù† Ø¹ÙÙ…Ø§Ù†\",\n        \"tags\": [\"Ù‡ÙŠØ«Ù…\", \"Ø³Ù„Ø·Ø§Ù†\", \"Ø¹Ù…Ø§Ù†\", \"Ø¬Ø§Ø±\", \"ØµØ¯ÙŠÙ‚\"],\n        \"context\": [\"leadership\", \"Oman\", \"GCC\", \"current\"]\n      },\n      {\n        \"name_ar\": \"Ø¹Ø¨Ø¯ Ø§Ù„ÙØªØ§Ø­ Ø§Ù„Ø³ÙŠØ³ÙŠ\",\n        \"name_en\": \"Abdel Fattah el-Sisi\",\n        \"relation\": \"Ø±Ø¦ÙŠØ³ Ù…ØµØ±\",\n        \"tags\": [\"Ø§Ù„Ø³ÙŠØ³ÙŠ\", \"Ø¹Ø¨Ø¯ Ø§Ù„ÙØªØ§Ø­ Ø§Ù„Ø³ÙŠØ³ÙŠ\", \"Ø±Ø¦ÙŠØ³ Ù…ØµØ±\", \"ØµØ¯ÙŠÙ‚\"],\n        \"context\": [\"leadership\", \"Egypt\", \"Arab\", \"current\"]\n      }\n    ],\n    \"groups\": {\n      \"martyrs\": [\"Ø´Ù‡Ø¯Ø§Ø¡\", \"Ø§Ù„Ø´Ù‡Ø¯Ø§Ø¡\", \"Ø§Ø¨Ø·Ø§Ù„\", \"Ø´Ù‡Ø¯Ø§Ø¡ Ø§Ù„ÙˆØ·Ù†\", \"Ø´Ù‡Ø¯Ø§Ø¡ Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª\"],\n      \"citizens\": [\"Ù…ÙˆØ§Ø·Ù†ÙŠÙ†\", \"Ø§Ù‡Ù„ Ø§Ù„Ø§Ù…Ø§Ø±Ø§Øª\", \"Ø§Ù„Ø´Ø¹Ø¨\", \"Ø´Ø¹Ø¨ Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª\", \"Ø§Ù‡Ù„ Ø§Ù„ÙˆØ·Ù†\"],\n      \"youth\": [\"Ø´Ø¨Ø§Ø¨\", \"Ø§Ù„Ø´Ø¨Ø§Ø¨\", \"Ø§Ù„Ø¬ÙŠÙ„ Ø§Ù„Ø´Ø§Ø¨\", \"Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„\", \"Ø£Ø¨Ù†Ø§Ø¡ Ø§Ù„ÙˆØ·Ù†\"],\n      \"founding_fathers\": [\"Ø§Ù„Ø§Ø¨Ø§Ø¡ Ø§Ù„Ù…Ø¤Ø³Ø³ÙŠÙ†\", \"Ø§Ù„Ù…Ø¤Ø³Ø³ÙˆÙ†\", \"Ø±ÙˆØ§Ø¯ Ø§Ù„Ø§ØªØ­Ø§Ø¯\", \"Ø£Ø¨Ø·Ø§Ù„ Ø§Ù„ØªØ£Ø³ÙŠØ³\"],\n      \"soldiers\": [\"Ø¬Ù†ÙˆØ¯\", \"Ø¹Ø³ÙƒØ±ÙŠÙŠÙ†\", \"Ø§Ù„Ø¬ÙŠØ´\", \"Ø­Ù…Ø§Ø© Ø§Ù„ÙˆØ·Ù†\", \"ÙØ±Ø³Ø§Ù† Ø§Ù„Ø¬ÙŠØ´\"],\n      \"women\": [\"Ù†Ø³Ø§Ø¡\", \"Ø§Ù„Ù…Ø±Ø£Ø©\", \"Ø§Ù„Ù†Ø³ÙˆØ©\", \"Ù†Ø³Ø§Ø¡ Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª\", \"Ø§Ù„Ù…Ø±Ø£Ø© Ø§Ù„Ø¥Ù…Ø§Ø±Ø§ØªÙŠØ©\"],\n      \"children\": [\"Ø§Ø·ÙØ§Ù„\", \"Ø§Ù„Ø§Ø·ÙØ§Ù„\", \"Ø§Ù„ØµØºØ§Ø±\", \"Ø£Ø·ÙØ§Ù„ Ø§Ù„ÙˆØ·Ù†\", \"Ø¬ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„\"],\n      \"elders\": [\"ÙƒØ¨Ø§Ø± Ø§Ù„Ø³Ù†\", \"Ø§Ù„Ø´ÙŠÙˆØ®\", \"Ø§Ù„Ù…Ø¹Ù…Ø±ÙŠÙ†\", \"Ø­ÙƒØ§Ù… Ø§Ù„Ø´ÙŠÙˆØ®\", \"Ø£ØµØ­Ø§Ø¨ Ø§Ù„Ø®Ø¨Ø±Ø©\"],\n      \"poets\": [\"Ø´Ø¹Ø±Ø§Ø¡\", \"Ø§Ù„Ø§Ø¯Ø¨Ø§Ø¡\", \"Ø§Ù„ÙƒØªØ§Ø¨\", \"Ø£ØµØ­Ø§Ø¨ Ø§Ù„Ù‚ÙˆØ§ÙÙŠ\", \"Ù…Ù‡Ù†Ø¯Ø³Ùˆ Ø§Ù„ÙƒÙ„Ù…Ø©\"],\n      \"artists\": [\"ÙÙ†Ø§Ù†ÙŠÙ†\", \"Ø§Ù„ÙÙ†Ø§Ù†ÙˆÙ†\", \"Ø§Ù„Ù…Ø¨Ø¯Ø¹ÙŠÙ†\", \"ØµÙ†Ø§Ø¹ Ø§Ù„Ø¬Ù…Ø§Ù„\", \"Ø£ØµØ­Ø§Ø¨ Ø§Ù„ÙÙ†ÙˆÙ†\"]\n    },\n    \"locations\": {\n      \"UAE\": [\"Ø§Ù„Ø§Ù…Ø§Ø±Ø§Øª\", \"Ø¯ÙˆÙ„Ù‡ Ø§Ù„Ø§Ù…Ø§Ø±Ø§Øª\", \"Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©\", \"ÙˆØ·Ù† Ø§Ù„ØªØ³Ø§Ù…Ø­\"],\n      \"Dubai\": [\"Ø¯Ø¨ÙŠ\", \"Ø§Ù…Ø§Ø±Ù‡ Ø¯Ø¨ÙŠ\", \"Ù…Ø¯ÙŠÙ†Ù‡ Ø¯Ø¨ÙŠ\", \"Ø¹Ø±ÙˆØ³ Ø§Ù„Ø®Ù„ÙŠØ¬\", \"Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„\"],\n      \"Abu_Dhabi\": [\"Ø§Ø¨ÙˆØ¸Ø¨ÙŠ\", \"Ø§Ù„Ø¹Ø§ØµÙ…Ù‡\", \"Ø§Ù…Ø§Ø±Ù‡ Ø§Ø¨ÙˆØ¸Ø¨ÙŠ\", \"Ù‚Ù„Ø¨ Ø§Ù„ÙˆØ·Ù†\", \"Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø«Ù‚Ø§ÙØ©\"],\n      \"Sharjah\": [\"Ø§Ù„Ø´Ø§Ø±Ù‚Ù‡\", \"Ø¥Ù…Ø§Ø±Ø© Ø§Ù„Ø´Ø§Ø±Ù‚Ø©\", \"Ø¹Ø§ØµÙ…Ø© Ø§Ù„Ø«Ù‚Ø§ÙØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©\", \"Ø§Ù„Ø´Ø§Ø±Ù‚Ø© Ø§Ù„Ø­Ø¶Ø§Ø±ÙŠØ©\"],\n      \"Ajman\": [\"Ø¹Ø¬Ù…Ø§Ù†\", \"Ø¥Ù…Ø§Ø±Ø© Ø¹Ø¬Ù…Ø§Ù†\", \"Ø¹Ø¬Ù…Ø§Ù† Ø§Ù„Ø³Ø§Ø­Ù„ÙŠØ©\", \"Ø¹Ø¬Ù…Ø§Ù† Ø§Ù„Ù‡Ø§Ø¯Ø¦Ø©\"],\n      \"Umm_Al_Quwain\": [\"Ø§Ù… Ø§Ù„Ù‚ÙŠÙˆÙŠÙ†\", \"Ø¥Ù…Ø§Ø±Ø© Ø£Ù… Ø§Ù„Ù‚ÙŠÙˆÙŠÙ†\", \"Ø£Ù… Ø§Ù„Ù‚ÙŠÙˆÙŠÙ† Ø§Ù„Ø³Ø§Ø­Ù„ÙŠØ©\", \"Ø£Ù… Ø§Ù„Ù‚ÙŠÙˆÙŠÙ† Ø§Ù„Ù‡Ø§Ø¯Ø¦Ø©\"],\n      \"Fujairah\": [\"Ø§Ù„ÙØ¬ÙŠØ±Ù‡\", \"Ø¥Ù…Ø§Ø±Ø© Ø§Ù„ÙØ¬ÙŠØ±Ø©\", \"Ø§Ù„ÙØ¬ÙŠØ±Ø© Ø§Ù„Ø´Ø±Ù‚ÙŠØ©\", \"Ø§Ù„ÙØ¬ÙŠØ±Ø© Ø§Ù„Ø¬Ø¨Ù„ÙŠØ©\"],\n      \"Ras_Al_Khaimah\": [\"Ø±Ø§Ø³ Ø§Ù„Ø®ÙŠÙ…Ù‡\", \"Ø¥Ù…Ø§Ø±Ø© Ø±Ø£Ø³ Ø§Ù„Ø®ÙŠÙ…Ø©\", \"Ø±Ø£Ø³ Ø§Ù„Ø®ÙŠÙ…Ø© Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©\", \"Ø±Ø£Ø³ Ø§Ù„Ø®ÙŠÙ…Ø© Ø§Ù„Ø¬Ø¨Ù„ÙŠØ©\"],\n      \"Arabian_Gulf\": [\"Ø§Ù„Ø®Ù„ÙŠØ¬ Ø§Ù„Ø¹Ø±Ø¨ÙŠ\", \"Ø®Ù„ÙŠØ¬Ù†Ø§ Ø§Ù„Ø¹Ø±Ø¨ÙŠ\", \"Ø¨Ø­Ø±Ù†Ø§ Ø§Ù„Ø¹Ø±Ø¨ÙŠ\", \"Ø§Ù„Ø®Ù„ÙŠØ¬\"],\n      \"Burj_Khalifa\": [\"Ø¨Ø±Ø¬ Ø®Ù„ÙŠÙÙ‡\", \"Ø§Ø·ÙˆÙ„ Ø¨Ø±Ø¬\", \"Ø¨Ø±Ø¬ Ø®Ù„ÙŠÙØ© Ø§Ù„Ø´Ø§Ù‡Ù‚\", \"Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø¯Ø¨ÙŠ\"],\n      \"Palm_Jumeirah\": [\"Ù†Ø®Ù„Ù‡ Ø¬Ù…ÙŠØ±Ø§\", \"Ø¬Ø²ÙŠØ±Ù‡ Ù†Ø®Ù„Ù‡\", \"Ù†Ø®Ù„Ø© Ø¬Ù…ÙŠØ±Ø§ Ø§Ù„Ø³Ø§Ø­Ø±Ø©\", \"Ø¬Ø²ÙŠØ±Ø© Ø§Ù„Ù†Ø®Ù„Ø©\"],\n      \"Louvre_Abu_Dhabi\": [\"Ù„ÙˆÙØ± Ø§Ø¨ÙˆØ¸Ø¨ÙŠ\", \"Ù…ØªØ­Ù Ù„ÙˆÙØ±\", \"Ù„ÙˆÙØ± Ø£Ø¨ÙˆØ¸Ø¨ÙŠ Ø§Ù„Ø«Ù‚Ø§ÙÙŠ\", \"Ù…ØªØ­Ù Ø§Ù„Ø­Ø¶Ø§Ø±Ø§Øª\"],\n      \"Sheikh_Zayed_Mosque\": [\"Ù…Ø³Ø¬Ø¯ Ø§Ù„Ø´ÙŠØ® Ø²Ø§ÙŠØ¯\", \"Ø¬Ø§Ù…Ø¹ Ø²Ø§ÙŠØ¯\", \"Ù…Ø³Ø¬Ø¯ Ø§Ù„Ø´ÙŠØ® Ø²Ø§ÙŠØ¯ Ø§Ù„ÙƒØ¨ÙŠØ±\", \"ØªØ­ÙØ© Ù…Ø¹Ù…Ø§Ø±ÙŠØ©\"],\n      \"Burj_Al_Arab\": [\"Ø¨Ø±Ø¬ Ø§Ù„Ø¹Ø±Ø¨\", \"ÙÙ†Ø¯Ù‚ Ø¨Ø±Ø¬\", \"Ø¨Ø±Ø¬ Ø§Ù„Ø¹Ø±Ø¨ Ø§Ù„ÙØ§Ø±Ù‡ÙŠ\", \"Ø±Ù…Ø² Ø§Ù„ÙØ®Ø§Ù…Ø©\"],\n      \"Dubai_Mall\": [\"Ø¯Ø¨ÙŠ Ù…ÙˆÙ„\", \"Ù…ÙˆÙ„ Ø¯Ø¨ÙŠ\", \"Ø¯Ø¨ÙŠ Ù…ÙˆÙ„ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ\", \"Ù…Ø±ÙƒØ² Ø§Ù„ØªØ³ÙˆÙ‚\"],\n      \"Yas_Island\": [\"Ø¬Ø²ÙŠØ±Ù‡ ÙŠØ§Ø³\", \"ÙŠØ§Ø³ Ø§ÙŠØ³Ù„Ø§Ù†Ø¯\", \"Ø¬Ø²ÙŠØ±Ø© ÙŠØ§Ø³ Ø§Ù„ØªØ±ÙÙŠÙ‡ÙŠØ©\", \"ÙŠØ§Ø³ Ù„Ù„Ø£Ù„Ø¹Ø§Ø¨\"],\n      \"Al_Ain\": [\"Ø§Ù„Ø¹ÙŠÙ†\", \"Ù…Ø¯ÙŠÙ†Ù‡ Ø§Ù„Ø¹ÙŠÙ†\", \"Ø§Ù„Ø¹ÙŠÙ† Ø§Ù„Ø®Ø¶Ø±Ø§Ø¡\", \"Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ø­Ø¯Ø§Ø¦Ù‚\"],\n      \"Liwa_Oasis\": [\"ÙˆØ§Ø­Ù‡ Ù„ÙŠÙˆØ§\", \"Ù„ÙŠÙˆØ§\", \"ÙˆØ§Ø­Ø© Ù„ÙŠÙˆØ§ Ø§Ù„ØµØ­Ø±Ø§ÙˆÙŠØ©\", \"Ù„ÙŠÙˆØ§ Ø§Ù„Ø³Ø§Ø­Ø±Ø©\"],\n      \"Jebel_Hafeet\": [\"Ø¬Ø¨Ù„ Ø­ÙÙŠØª\", \"Ø¬Ø¨Ù„ Ø­ÙÙŠØª Ø§Ù„Ø´Ø§Ù‡Ù‚\", \"Ø¬Ø¨Ù„ Ø­ÙÙŠØª Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠ\", \"Ø­ÙÙŠØª Ø§Ù„Ø¹ÙŠÙ†\"],\n      \"Saudi_Arabia\": [\"Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠÙ‡\", \"Ø§Ù„Ù…Ù…Ù„ÙƒÙ‡ Ø§Ù„Ø¹Ø±Ø¨ÙŠÙ‡ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠÙ‡\", \"Ø§Ù„Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©\", \"Ø£Ø±Ø¶ Ø§Ù„Ø­Ø±Ù…ÙŠÙ†\"],\n      \"Qatar\": [\"Ù‚Ø·Ø±\", \"Ø¯ÙˆÙ„Ù‡ Ù‚Ø·Ø±\", \"Ø¯ÙˆÙ„Ø© Ù‚Ø·Ø±\", \"Ù‚Ø·Ø± Ø§Ù„ØºÙ†ÙŠØ©\"],\n      \"Bahrain\": [\"Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†\", \"Ù…Ù…Ù„ÙƒÙ‡ Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†\", \"Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†\", \"Ø§Ù„Ø¨Ø­Ø±ÙŠÙ† Ø§Ù„ØªØ§Ø±ÙŠØ®ÙŠØ©\"],\n      \"Kuwait\": [\"Ø§Ù„ÙƒÙˆÙŠØª\", \"Ø¯ÙˆÙ„Ù‡ Ø§Ù„ÙƒÙˆÙŠØª\", \"Ø¯ÙˆÙ„Ø© Ø§Ù„ÙƒÙˆÙŠØª\", \"ÙƒÙˆÙŠØª Ø§Ù„Ø®Ù„ÙŠØ¬\"],\n      \"Oman\": [\"Ø¹Ù…Ø§Ù†\", \"Ø³Ù„Ø·Ù†Ù‡ Ø¹Ù…Ø§Ù†\", \"Ø³Ù„Ø·Ù†Ø© Ø¹Ù…Ø§Ù†\", \"Ø¹ÙÙ…Ø§Ù† Ø§Ù„Ø¬Ù…ÙŠÙ„Ø©\"],\n      \"Mecca\": [\"Ù…ÙƒÙ‡\", \"Ù…ÙƒÙ‡ Ø§Ù„Ù…ÙƒØ±Ù…Ù‡\", \"Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©\", \"Ø£Ø±Ø¶ Ø§Ù„Ø­Ø±Ù…\"],\n      \"Medina\": [\"Ø§Ù„Ù…Ø¯ÙŠÙ†Ù‡\", \"Ø§Ù„Ù…Ø¯ÙŠÙ†Ù‡ Ø§Ù„Ù…Ù†ÙˆØ±Ù‡\", \"Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©\", \"Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù†Ø¨ÙŠ\"],\n      \"Cairo\": [\"Ø§Ù„Ù‚Ø§Ù‡Ø±Ù‡\", \"Ø¹Ø§ØµÙ…Ù‡ Ù…ØµØ±\", \"Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© Ø§Ù„Ø¹Ø±ÙŠÙ‚Ø©\", \"Ø£Ù… Ø§Ù„Ø¯Ù†ÙŠØ§\"],\n      \"GCC\": [\"Ù…Ø¬Ù„Ø³ Ø§Ù„ØªØ¹Ø§ÙˆÙ† Ø§Ù„Ø®Ù„ÙŠØ¬ÙŠ\", \"Ø§Ù„ØªØ¹Ø§ÙˆÙ† Ø§Ù„Ø®Ù„ÙŠØ¬ÙŠ\", \"Ø¯ÙˆÙ„ Ù…Ø¬Ù„Ø³ Ø§Ù„ØªØ¹Ø§ÙˆÙ†\", \"Ø§Ù„Ø®Ù„ÙŠØ¬ Ø§Ù„Ø¹Ø±Ø¨ÙŠ\"],\n      \"Arab_League\": [\"Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©\", \"Ø§Ù„Ø¯ÙˆÙ„ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©\", \"Ø§Ù„Ø¹Ø§Ù„Ù… Ø§Ù„Ø¹Ø±Ø¨ÙŠ\", \"Ø§Ù„Ø£Ù…Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©\"]\n    },\n    \"religious_entities\": {\n      \"Allah\": [\"Ø§Ù„Ù„Ù‡\", \"Ø±Ø¨\", \"Ø®Ø§Ù„Ù‚\", \"Ø±Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠÙ†\", \"Ø§Ù„Ø±Ø­Ù…Ù†\", \"Ø§Ù„Ø±Ø­ÙŠÙ…\", \"Ø§Ù„Ù„Ù‡ Ø³Ø¨Ø­Ø§Ù†Ù‡\", \"Ø¥Ù„Ù‡ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠÙ†\"],\n      \"Prophet\": [\"Ù…Ø­Ù…Ø¯\", \"Ø±Ø³ÙˆÙ„ Ø§Ù„Ù„Ù‡\", \"Ø§Ù„Ù†Ø¨ÙŠ\", \"Ø®Ø§ØªÙ… Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡\", \"Ø³ÙŠØ¯Ù†Ø§ Ù…Ø­Ù…Ø¯\", \"Ø­Ø¨ÙŠØ¨ÙŠ Ù…Ø­Ù…Ø¯\"],\n      \"Holy_Texts\": [\"Ø§Ù„Ù‚Ø±Ø¢Ù†\", \"Ø§Ù„Ø³Ù†Ø©\", \"Ø§Ù„Ø°ÙƒØ± Ø§Ù„Ø­ÙƒÙŠÙ…\", \"ÙƒØªØ§Ø¨ Ø§Ù„Ù„Ù‡\", \"Ø³Ù†Ø© Ø§Ù„Ù†Ø¨ÙŠ\"]\n    }\n  }\n}\n```\n\n#### **2. CRITICAL ENTITY RESOLUTION RULES (ENHANCED - NO DROPPED RULES)**\n\n**UAE LEADERSHIP RESOLUTION (RESTORED AND ENHANCED):**\n- **\"Ø¨Ùˆ Ø®Ø§Ù„Ø¯\" resolution**: When you encounter \"Ø¨Ùˆ Ø®Ø§Ù„Ø¯\" â†’ **ALWAYS** resolve to \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\" (RESTORED)\n- **\"Ø£Ø¨Ùˆ Ø®Ø§Ù„Ø¯\" resolution**: When you encounter \"Ø£Ø¨Ùˆ Ø®Ø§Ù„Ø¯\" â†’ **ALWAYS** resolve to \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\" (RESTORED)\n- **\"ÙŠØ§Ø¨ÙˆØ±Ø§Ø´Ø¯\" resolution**: When you encounter \"ÙŠØ§Ø¨ÙˆØ±Ø§Ø´d\" â†’ **ALWAYS** resolve to \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\" (RESTORED)\n- **\"Ø£Ø¨Ùˆ Ø±Ø§Ø´Ø¯\" resolution**: When you encounter \"Ø£Ø¨Ùˆ Ø±Ø§Ø´d\" â†’ **ALWAYS** resolve to \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´d Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\" (RESTORED)\n- **\"Ø²Ø§ÙŠØ¯ Ø§Ù„Ø®ÙŠØ±\" resolution**: When you encounter \"Ø²Ø§ÙŠØ¯ Ø§Ù„Ø®ÙŠØ±\" â†’ **ALWAYS** resolve to \"Ø²Ø§ÙŠØ¯ Ø¨Ù† Ø³Ù„Ø·Ø§Ù† Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\" (RESTORED)\n- **\"Ø§Ù„Ø´ÙŠØ® Ø²Ø§ÙŠØ¯\" resolution**: When you encounter \"Ø§Ù„Ø´ÙŠØ® Ø²Ø§ÙŠØ¯\" â†’ **ALWAYS** resolve to \"Ø²Ø§ÙŠØ¯ Ø¨Ù† Ø³Ù„Ø·Ø§Ù† Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\" (RESTORED)\n- **\"Ø£Ø¨Ùˆ Ø§Ù„Ø£Ù…Ø©\" resolution**: When you encounter \"Ø£Ø¨Ùˆ Ø§Ù„Ø£Ù…Ø©\" â†’ **ALWAYS** resolve to \"Ø²Ø§ÙŠØ¯ Ø¨Ù† Ø³Ù„Ø·Ø§Ù† Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\" (RESTORED)\n- **\"ÙØ²Ø§Ø¹\" resolution**: When you encounter \"ÙØ²Ø§Ø¹\" â†’ **ALWAYS** resolve to \"Ø­Ù…Ø¯Ø§Ù† Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\" (RESTORED)\n- **\"Ø®Ù„ÙŠÙØ©\" resolution**: When you encounter \"Ø®Ù„ÙŠÙØ©\" in UAE context â†’ **ALWAYS** resolve to \"Ø®Ù„ÙŠÙÙ‡ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\" (RESTORED)\n\n**ROMANTIC PRONOUN RESOLUTION (CRITICAL FIX - PREVIOUSLY MISSING):**\n- **\"Ø£Ù†Øª\" resolution**: In romantic poetry, \"Ø£Ù†Øª\" â†’ **ALWAYS** resolve to \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" (female) or \"Ø§Ù„Ø­Ø¨ÙŠØ¨\" (male) based on context\n- **\"Ù„Ùƒ\" resolution**: In romantic context, \"Ù„Ùƒ\" â†’ **ALWAYS** resolve to \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" or \"Ø§Ù„Ø­Ø¨ÙŠØ¨\"\n- **\"Ø¹ÙŠÙ†ÙŠÙƒ\" resolution**: **ALWAYS** resolve to both \"Ø§Ù„Ø¹ÙŠÙ†\" (relation: \"Ø¹Ø¶Ùˆ\") AND \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" or \"Ø§Ù„Ø­Ø¨ÙŠØ¨\" (owner)\n- **\"Ù‚Ù„Ø¨Ùƒ\" resolution**: **ALWAYS** resolve to both \"Ø§Ù„Ù‚Ù„Ø¨\" (relation: \"Ø¹Ø¶Ùˆ\") AND \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" or \"Ø§Ù„Ø­Ø¨ÙŠØ¨\" (owner)\n- **\"ÙŠØ§ Ø±ÙˆØ­ÙŠ\" resolution**: **ALWAYS** resolve to \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" or \"Ø§Ù„Ø­Ø¨ÙŠØ¨\" as \"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨\"/\"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨Ø©\"\n- **\"ÙˆØµÙ„Ùƒ\" resolution**: **ALWAYS** resolve to \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" or \"Ø§Ù„Ø­Ø¨ÙŠØ¨\" as \"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨\"/\"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨Ø©\"\n- **\"Ù‡ÙˆØ§Ùƒ\" resolution**: **ALWAYS** resolve to \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" or \"Ø§Ù„Ø­Ø¨ÙŠØ¨\" as \"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨\"/\"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨Ø©\"\n- **\"ÙŠØ§ Ù…Ù†...\" resolution**: **ALWAYS** resolve to \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" or \"Ø§Ù„Ø­Ø¨ÙŠØ¨\" based on context\n- **\"ÙˆÙŠÙ†Ùƒ\" resolution**: **ALWAYS** resolve to \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" or \"Ø§Ù„Ø­Ø¨ÙŠØ¨\" as \"Ø§Ù„Ù…Ø®Ø§Ø·Ø¨\"\n- **\"Ù„Ù‚ÙŠØ§Ùƒ\" resolution**: **ALWAYS** resolve to \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" or \"Ø§Ù„Ø­Ø¨ÙŠØ¨\" as \"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨\"/\"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨Ø©\"\n\n**RELIGIOUS PRONOUN RESOLUTION (RESTORED):**\n- **\"Ø±Ø¨Ùƒ\" resolution**: **ALWAYS** resolve to \"Ø§Ù„Ù„Ù‡\"\n- **\"Ù†Ø¨ÙŠÙƒ\" resolution**: **ALWAYS** resolve to \"Ø§Ù„Ù†Ø¨ÙŠ Ù…Ø­Ù…Ø¯\"\n- **\"Ø±Ø³ÙˆÙ„ Ø§Ù„Ù„Ù‡\" resolution**: **ALWAYS** resolve to \"Ø§Ù„Ù†Ø¨ÙŠ Ù…Ø­Ù…Ø¯\"\n- **\"Ø®Ø§Ù„Ù‚ Ø§Ù„Ø³Ù…Ø§ÙˆØ§Øª\" resolution**: **ALWAYS** resolve to \"Ø§Ù„Ù„Ù‡\"\n- **\"Ø°Ùˆ Ø§Ù„Ø¬Ù„Ø§Ù„\" resolution**: **ALWAYS** resolve to \"Ø§Ù„Ù„Ù‡\"\n- **\"Ø±Ø¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠÙ†\" resolution**: **ALWAYS** resolve to \"Ø§Ù„Ù„Ù‡\"\n\n#### **3. COREFERENCE RESOLUTION FRAMEWORK (ENHANCED FOR ROMANTIC & UAE CONTEXTS)**\n\n**PRONOUN RESOLUTION CHAIN PROTOCOL:**\n1. **Scan entire poem FIRST** for explicit entity mentions before processing individual lines\n2. **Build comprehensive resolution chain** mapping all pronouns to explicit entities\n3. **Apply context priority hierarchy**: UAE leadership > Religious figures > Romantic entities > Family roles > Generic roles\n4. **Validate every resolution** against entity dictionary before output\n5. **Document all resolutions** in processing_notes for audit trail\n\n**RESOLUTION TABLE (MANDATORY - COMPLETE RESTORATION):**\n\n| Pronoun/Reference | Resolution Rule | Example Context | Required Output |\n|-------------------|-----------------|-----------------|-----------------|\n| \"Ù‡Ùˆ\" after UAE leader mention | Resolve to most recent UAE leader | \"Ù‚Ø§Ù„ Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯... Ù‡Ùˆ ÙŠÙ‚ÙˆØ¯\" â†’ \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\" | {\"name\": \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\", \"relation\": \"Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\"} |\n| \"Ø£Ù†Øª\" in UAE leadership context | Resolve to addressed leader | \"ÙŠØ§ Ø¨Ùˆ Ø®Ø§Ù„Ø¯... Ø£Ù†Øª Ø§Ù„Ù‚Ø§Ø¦Ø¯\" â†’ \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\" | {\"name\": \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\", \"relation\": \"Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\"} |\n| \"Ø£Ù†Øª\" in romantic context | Resolve to lover | \"ÙŠØ§ Ø­Ø¨ÙŠØ¨ØªÙŠ... Ø£Ù†Øª Ø­ÙŠØ§ØªÙŠ\" â†’ \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" | {\"name\": \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\", \"relation\": \"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨Ø©\"} |\n| \"Ø§Ù„Ù…Ø®Ø§Ø·Ø¨\" in praise context | Resolve to leader being praised | \"Ø§Ù„Ù…Ø®Ø§Ø·Ø¨ Ù‡Ùˆ Ø³ÙŠØ¯ Ø§Ù„Ù…Ø¬Ø¯\" â†’ \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\" | {\"name\": \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\", \"relation\": \"Ø§Ù„Ø£Ø¨\"} |\n| \"Ø§Ù„Ù‚Ø§Ø¦Ø¯\" with UAE context | Resolve to most relevant UAE leader | \"Ø§Ù„Ù‚Ø§Ø¦Ø¯ Ø§Ù„Ø°ÙŠ Ø¨Ù†Ù‰ Ø¯Ø¨ÙŠ\" â†’ \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´d Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\" | {\"name\": \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´d Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\", \"relation\": \"Ø§Ù„Ø£Ø¨\"} |\n| \"Ø§Ù„Ø±Ø¦ÙŠØ³\" in UAE context | Resolve to Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ | \"Ø§Ù„Ø±Ø¦ÙŠØ³ Ø§Ù„Ø°ÙŠ ÙˆØ­Ø¯ Ø§Ù„ØµÙÙˆÙ\" â†’ \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\" | {\"name\": \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\", \"relation\": \"Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\"} |\n| \"Ø¹ÙŠÙ†ÙŠÙƒ\" in romantic context | Resolve to body part + owner | \"ÙŠØ§ Ù†ÙˆØ± Ø¹ÙŠÙ†ÙŠÙƒ\" â†’ \"Ø§Ù„Ø¹ÙŠÙ†\" + \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" | [{\"name\": \"Ø§Ù„Ø¹ÙŠÙ†\", \"relation\": \"Ø¹Ø¶Ùˆ\"}, {\"name\": \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\", \"relation\": \"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨Ø©\"}] |\n| \"Ù‚Ù„Ø¨Ùƒ\" in romantic context | Resolve to body part + owner | \"Ù‚Ù„Ø¨Ùƒ ÙŠØ³ÙƒÙ† ØµdØ±ÙŠ\" â†’ \"Ø§Ù„Ù‚Ù„Ø¨\" + \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" | [{\"name\": \"Ø§Ù„Ù‚Ù„Ø¨\", \"relation\": \"Ø¹Ø¶Ùˆ\"}, {\"name\": \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\", \"relation\": \"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨Ø©\"}] |\n| \"Ø±Ø¨Ùƒ\" in religious context | Always resolve to \"Ø§Ù„Ù„Ù‡\" | \"rbÙƒ ÙŠØ­Ù…ÙŠÙƒ\" â†’ \"Ø§Ù„Ù„Ù‡\" | {\"name\": \"Ø§Ù„Ù„Ù‡\", \"relation\": \"Ø±Ø¨\"} |\n| \"Ù†Ø¨ÙŠÙƒ\" in religious context | Always resolve to \"Ø§Ù„Ù†Ø¨ÙŠ Ù…Ø­Ù…Ø¯\" | \"Ù†Ø¨ÙŠÙƒ ÙŠÙ‡Ø¯ÙŠÙƒ\" â†’ \"Ø§Ù„Ù†Ø¨ÙŠ Ù…Ø­Ù…Ø¯\" | {\"name\": \"Ø§Ù„Ù†Ø¨ÙŠ Ù…Ø­Ù…Ø¯\", \"relation\": \"Ø±Ø³ÙˆÙ„ Ø§Ù„Ù„Ù‡\"} |\n| \"ÙŠØ§ Ø³ÙŠØ¯ÙŠ\" in UAE context | Resolve to highest UAE leader | \"ÙŠØ§ Ø³ÙŠØ¯ÙŠ Ù‚Ø§Ø¦Ø¯ Ø§Ù„Ù…Ø³ÙŠØ±Ø©\" â†’ \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\" | {\"name\": \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\", \"relation\": \"Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\"} |\n| \"ÙŠØ§ Ø³ÙŠØ¯ Ø§Ù„Ù…Ø¬Ø¯\" in UAE context | Resolve to Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´d | \"ÙŠØ§ Ø³ÙŠØ¯ Ø§Ù„Ù…Ø¬Ø¯\" â†’ \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´d Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\" | {\"name\": \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´d Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\", \"relation\": \"Ø§Ù„Ø£Ø¨\"} |\n| \"Ø£Ø¨Ùˆ Ø§Ù„Ø£Ù…Ø©\" in historical context | Always resolve to \"Ø²Ø§ÙŠØ¯ Ø¨Ù† Ø³Ù„Ø·Ø§Ù†\" | \"Ø£Ø¨Ùˆ Ø§Ù„Ø£Ù…Ø© Ø¨Ø§Ù†ÙŠ Ø§Ù„Ø§ØªØ­Ø§Ø¯\" â†’ \"Ø²Ø§ÙŠØ¯ Ø¨Ù† Ø³Ù„Ø·Ø§Ù† Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\" | {\"name\": \"Ø²Ø§ÙŠØ¯ Ø¨Ù† Ø³Ù„Ø·Ø§Ù† Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\", \"relation\": \"Ø§Ù„Ù…Ø¤Ø³Ø³\"} |\n| \"ÙØ²Ø§Ø¹\" in Dubai context | Always resolve to \"Ø­Ù…Ø¯Ø§Ù† Ø¨Ù† Ù…Ø­Ù…Ø¯\" | \"ÙØ²Ø§Ø¹ Ø§Ù„Ù…Ø¬Ø¯\" â†’ \"Ø­Ù…Ø¯Ø§Ù† Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´d Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\" | {\"name\": \"Ø­Ù…Ø¯Ø§Ù† Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´d Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\", \"relation\": \"Ø§Ù„Ø°Ø§Øª\"} |\n\n#### **4. CONTEXTUAL ANALYSIS PROTOCOL (CRITICAL - DO NOT SKIP)**\n\n**STEP 1: POEM CONTEXT DETECTION (MANDATORY)**\nBefore processing individual lines, **ANALYZE THE ENTIRE POEM** to determine:\n- **Genre classification**: UAE leadership poetry, Religious poetry, Romantic poetry (ØºØ²Ù„), National poetry (ÙˆØ·Ù†ÙŠ), Philosophical (ÙÙ„Ø³ÙÙŠ)\n- **Gender indicators**: Feminine pronouns (Ù€Ùƒ, Ù€ØªÙŠ, Ù€ÙŠÙ‡Ø§) vs masculine pronouns (Ù€Ùƒ, Ù€Ù‡, Ù€Ù‡Ù…Ø§)\n- **Dominant themes**: Leadership, Love, Longing, Separation, Joy, Pain, Beauty, Faith\n- **Temporal context**: Historical, Contemporary, Classical\n- **Geographical context**: UAE-specific, Gulf-wide, Arab-wide, International\n\n**STEP 2: UAE LEADERSHIP FLAGGING (ENHANCED)**\nIf poem contains **ANY** of the following, flag as **UAE LEADERSHIP POETRY**:\n- âœ“ UAE leadership names: Ø²Ø§ÙŠØ¯, Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´d, Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯, Ø­Ù…Ø¯Ø§Ù†, Ø®Ù„ÙŠÙØ©\n- âœ“ UAE leadership titles: Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©, Ø­Ø§ÙƒÙ… Ø¯Ø¨ÙŠ, ÙˆÙ„ÙŠ Ø§Ù„Ø¹Ù‡Ø¯, Ø§Ù„Ø£Ø¨ Ø§Ù„Ù…Ø¤Ø³Ø³\n- âœ“ UAE leadership nicknames: Ø¨Ùˆ Ø®Ø§Ù„d, ÙŠØ§Ø¨ÙˆØ±Ø§Ø´d, ÙØ²Ø§Ø¹, Ø²Ø§ÙŠØ¯ Ø§Ù„Ø®ÙŠØ±\n- âœ“ UAE-specific locations: Ø¯Ø¨ÙŠ, Ø£Ø¨ÙˆØ¸Ø¨ÙŠ, Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª, Ø§Ù„Ø§ØªØ­Ø§Ø¯\n- âœ“ UAE-specific events: ÙŠÙˆÙ… Ø§Ù„Ø§ØªØ­Ø§Ø¯, ÙŠÙˆÙ… Ø§Ù„Ø´Ù‡ÙŠØ¯, Ø§Ù„ÙŠÙˆÙ… Ø§Ù„ÙˆØ·Ù†ÙŠ, ÙŠÙˆÙ… Ø§Ù„Ø¹Ù„Ù…\n\n**STEP 3: ROMANTIC POETRY FLAGGING (CRITICAL FIX)**\nIf poem contains **ANY** of the following, flag as **ROMANTIC POETRY**:\n- âœ“ Romantic keywords: Ø­Ø¨, Ø´ÙˆÙ‚, Ù‡ÙˆÙ‰, ØºØ±Ø§Ù…, ÙˆØµØ§Ù„, ÙØ±Ø§Ù‚, Ù„Ù‚ÙŠØ§, Ø¹ÙŠÙˆÙ†, Ø®Ø¯ÙˆØ¯, Ø´ÙØ§Ù‡, Ù†ÙˆØ±, Ù‡ÙŠÙØ§Ø¡\n- âœ“ Pronouns: Ø£Ù†Øª, Ù„Ùƒ, Ù…Ø¹Ùƒ, ÙÙŠÙƒ, Ø¹Ù†Ø¯Ùƒ, Ù„Ø¹ÙŠÙ†ÙŠÙƒ, Ù„Ù‚Ù„Ø¨Ùƒ, Ù„Ùƒ\n- âœ“ Address terms: ÙŠØ§ Ø­Ø¨ÙŠØ¨ÙŠ, ÙŠØ§ Ø­Ø¨ÙŠØ¨ØªÙŠ, ÙŠØ§ Ø±ÙˆØ­ÙŠ, ÙŠØ§ Ø­ÙŠØ§ØªÙŠ, ÙŠØ§ Ù…Ù†ÙŠØ©, ÙŠØ§ Ø³Ù„ÙˆÙ‰\n- âœ“ Romantic actions: ÙŠØ´ÙˆÙ‚Ù†ÙŠ, ÙŠØºÙŠØ¨ Ø¹Ù†ÙŠ, ÙŠØ­Ø±Ù‚ Ù‚Ù„Ø¨ÙŠ, ÙŠØ³ÙƒÙ† ØµdØ±ÙŠ, ÙŠÙ‡ÙŠÙ… ÙÙŠ Ø®ÙŠØ§Ù„Ùƒ\n- âœ“ Body parts: Ø¹ÙŠÙˆÙ†Ùƒ, Ø®Ø¯ÙŠÙƒ, Ø´ÙØªÙŠÙƒ, Ù‚Ù„Ø¨Ùƒ, ÙŠØ¯ÙŠÙƒ, Ø±Ø¬Ù„ÙŠÙƒ\n\n**STEP 4: GENDER DETECTION ALGORITHM (ROMANTIC CONTEXT)**\nApply **gender detection rules** to determine if addressing male or female:\n- **Female indicator words**: Ø­Ø¨ÙŠØ¨Ø©, Ù…Ø­Ø¨ÙˆØ¨Ø©, ØºØ§Ù„ÙŠØ©, Ø¬Ù…ÙŠÙ„Ø©, Ù†Ø§Ø¹Ù…Ø©, Ù„Ø·ÙŠÙØ©, Ø±Ù‚ÙŠÙ‚Ø©, ÙØ§ØªÙ†Ø©, Ø­Ø³Ù†Ø§Ø¡\n- **Male indicator words**: Ø­Ø¨ÙŠØ¨, Ù…Ø­Ø¨ÙˆØ¨, ØºØ§Ù„ÙŠ, Ø¬Ù…ÙŠÙ„, ÙˆØ³ÙŠÙ…, ÙØ§Ø±Ø³, Ù‚ÙˆÙŠ, Ø´Ø¬Ø§Ø¹, Ø­Ù„ÙŠÙ…\n- **Possessive suffixes**: Ù€Ùƒ (neutral), Ù€ÙƒÙ (feminine), Ù€ÙƒÙ (masculine)\n- **Verb conjugations**: Past tense verbs ending with Ù€Øª (feminine) vs Ù€ (masculine)\n- **Noun endings**: Feminine nouns typically end with Ù€Ø© vs masculine without\n\n**STEP 5: COREFERENCE CHAIN CONSTRUCTION (COMPLETE)**\nBuild a **complete reference map** for the entire poem:\n```\nPronoun/Reference â†’ Resolved Entity â†’ Example Context\n\"Ù‡Ùˆ\" â†’ \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\" â†’ \"Ù‚Ø§Ù„ Ø¨Ùˆ Ø®Ø§Ù„d... Ù‡Ùˆ ÙŠÙ‚ÙˆØ¯\"\n\"Ø£Ù†Øª\" â†’ \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" â†’ \"ÙŠØ§ Ø­Ø¨ÙŠØ¨ØªÙŠ... Ø£Ù†Øª Ø­ÙŠØ§ØªÙŠ\"\n\"Ø¹ÙŠÙ†ÙŠÙƒ\" â†’ \"Ø§Ù„Ø¹ÙŠÙ†\" + \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" â†’ \"ÙŠØ§ Ù†ÙˆØ± Ø¹ÙŠÙ†ÙŠÙƒ\"\n\"Ù‚Ù„Ø¨Ùƒ\" â†’ \"Ø§Ù„Ù‚Ù„Ø¨\" + \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" â†’ \"Ù‚Ù„Ø¨Ùƒ ÙŠØ³ÙƒÙ† ØµdØ±ÙŠ\"\n\"ÙˆØµÙ„Ùƒ\" â†’ \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" â†’ \"ÙˆØµÙ„Ùƒ ÙŠØ´ÙÙŠ Ø¬Ø±Ø§Ø­ÙŠ\"\n\"Ø±Ø¨Ùƒ\" â†’ \"Ø§Ù„Ù„Ù‡\" â†’ \"rbÙƒ ÙŠØ­Ù…ÙŠÙƒ\"\n\"ÙŠØ§Ø¨ÙˆØ±Ø§Ø´d\" â†’ \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´d Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\" â†’ \"ÙŠØ§Ø¨ÙˆØ±Ø§Ø´d Ø­Ø¶ÙˆØ±Ùƒ Ù†ÙˆØ±\"\n\"Ø¨Ùˆ Ø®Ø§Ù„d\" â†’ \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\" â†’ \"ÙŠØ§Ø¨Ùˆ Ø®Ø§Ù„d Ø­ÙØ¸Ùƒ Ø§Ù„Ù„Ù‡\"\n```\n\n#### **5. MANDATORY RULES (NON-NEGOTIABLE)**\n\n**RULE 1: NO EMPTY PERSON FIELD IN UAE LEADERSHIP OR ROMANTIC POETRY**\n- **In UAE leadership poetry**: The \"person\" field **CANNOT** be empty for any line\n- **In romantic poetry**: The \"person\" field **CANNOT** be empty for any line\n- **If no explicit entity mentioned**: Resolve from contextual pronouns using coreference chain\n- **If still no entity**: Default to most relevant entity based on poem context\n- **Example failure correction**: If input has \"Ø£Ù†ØªÙ\" and output has \"person\": [] â†’ **REJECT** and reprocess\n\n**RULE 2: UAE LEADERSHIP PRIORITY ENFORCEMENT**\n- If UAE leadership context is detected â†’ **ALL** leadership pronouns resolve to UAE leaders\n- \"Ø³ÙŠØ¯ÙŠ\" in UAE context â†’ **ALWAYS** resolve to highest UAE leader mentioned\n- \"Ù‚Ø§Ø¦Ø¯\" in UAE context â†’ **ALWAYS** resolve to most relevant UAE leader\n- \"Ø±Ø¦ÙŠØ³\" in UAE context â†’ **ALWAYS** resolve to Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\n- UAE leadership entities take priority over ALL other entity types\n\n**RULE 3: ROMANTIC ENTITY ENFORCEMENT**\n- **\"Ø£Ù†Øª\" in romantic context**: **NEVER** leave unresolved â†’ **ALWAYS** resolve to \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" or \"Ø§Ù„Ø­Ø¨ÙŠØ¨\"\n- **Body part metaphors**: **ALWAYS** resolve to both body part AND owner entity\n- **Address terms**: **ALWAYS** resolve to specific romantic entities\n- **Implicit entities**: **ALWAYS** detect from contextual clues\n- **Romantic pronouns**: **NEVER** output generic pronouns - always resolve to specific entities\n\n**RULE 4: MINIMUM CONFIDENCE ENFORCEMENT**\n- **Minimum threshold**: All entity resolutions must be accurate\n- **Low confidence protocol**: If entity cannot be resolved with certainty â†’ Exclude tag rather than guess\n- **No forced extraction**: If entity cannot be resolved â†’ Skip rather than guess\n\n**RULE 5: ROW_ID PRESERVATION ENFORCEMENT**\n- **Exact preservation**: Row_ID values **MUST** match EXACT input values\n- **No \"unknown\" values**: **NEVER** output \"unknown\" for Row_ID\n- **Format preservation**: Preserve original Row_ID format exactly as provided\n- **Validation protocol**: Verify Row_ID mapping before output generation\n\n#### **6. VALIDATION CHECKLIST (ENHANCED - COMPLETE RESTORATION)**\n\n**MUST PASS ALL THESE CHECKS:**\nâœ“ **UAE leadership flag** applied when poem contains UAE leadership keywords\nâœ“ **Romantic poetry flag** applied when poem contains romantic keywords\nâœ“ **Gender detection** performed before entity resolution in romantic poetry\nâœ“ **Coreference chain** built for entire poem before line processing\nâœ“ **No empty person fields** in UAE leadership or romantic poetry\nâœ“ **All pronouns** resolved to specific entities from dictionary (no generic \"Ø£Ù†Øª\", \"Ù‡Ùˆ\", \"Ù‡ÙŠ\")\nâœ“ **Body part metaphors** resolved to both body part AND owner entity\nâœ“ **Address terms** resolved to proper specific entities\nâœ“ **Implicit entities** detected from contextual clues\nâœ“ **Row_ID values** match EXACT input values (no \"unknown\")\nâœ“ **Entity relations** match dictionary values exactly\nâœ“ **Processing notes** document all resolutions and merges\nâœ“ **Maximum 5 tags** per category maintained\nâœ“ **No tag duplication** across categories\nâœ“ **Dictionary compliance** 100% - no invented entities or tags\n\n**UAE LEADERSHIP SPECIFIC VALIDATIONS:**\nâœ“ \"Ø¨Ùˆ Ø®Ø§Ù„d\" â†’ \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\" (relation: \"Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø©\")\nâœ“ \"ÙŠØ§Ø¨ÙˆØ±Ø§Ø´d\" â†’ \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´d Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\" (relation: \"Ø§Ù„Ø£Ø¨\")\nâœ“ \"ÙØ²Ø§Ø¹\" â†’ \"Ø­Ù…Ø¯Ø§Ù† Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´d Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\" (relation: \"Ø§Ù„Ø°Ø§Øª\")\nâœ“ \"Ø²Ø§ÙŠØ¯ Ø§Ù„Ø®ÙŠØ±\" â†’ \"Ø²Ø§ÙŠØ¯ Ø¨Ù† Ø³Ù„Ø·Ø§Ù† Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\" (relation: \"Ø§Ù„Ù…Ø¤Ø³Ø³\")\nâœ“ \"Ø®Ù„ÙŠÙØ©\" â†’ \"Ø®Ù„ÙŠÙÙ‡ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\" (relation: \"Ø±Ø¦ÙŠØ³ Ø§Ù„Ø¯ÙˆÙ„Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚\")\nâœ“ \"Ø³ÙŠØ¯ÙŠ\" in UAE context â†’ Highest UAE leader mentioned\nâœ“ UAE leadership priority applied over all other entity types\n\n**ROMANTIC POETRY SPECIFIC VALIDATIONS:**\nâœ“ \"Ø£Ù†Øª\" in romantic context â†’ \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" or \"Ø§Ù„Ø­Ø¨ÙŠØ¨\" (never generic)\nâœ“ \"Ø¹ÙŠÙ†ÙŠÙƒ\" â†’ Both \"Ø§Ù„Ø¹ÙŠÙ†\" (relation: \"Ø¹Ø¶Ùˆ\") AND \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\"/\"Ø§Ù„Ø­Ø¨ÙŠØ¨\" (owner)\nâœ“ \"Ù‚Ù„Ø¨Ùƒ\" â†’ Both \"Ø§Ù„Ù‚Ù„Ø¨\" (relation: \"Ø¹Ø¶Ùˆ\") AND \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\"/\"Ø§Ù„Ø­Ø¨ÙŠØ¨\" (owner)\nâœ“ \"ÙˆØµÙ„Ùƒ\" â†’ \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" or \"Ø§Ù„Ø­Ø¨ÙŠØ¨\" as \"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨\"/\"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨Ø©\"\nâœ“ \"ÙŠØ§ Ø±ÙˆØ­ÙŠ\" â†’ \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" or \"Ø§Ù„Ø­Ø¨ÙŠØ¨\" as \"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨\"/\"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨Ø©\"\nâœ“ At least 80% of lines in romantic poetry have non-empty person field\nâœ“ Gender consistency maintained throughout romantic poem\nâœ“ No contradictory relations within same romantic poem\n\n#### **7. ERROR PREVENTION PROTOCOLS (ENHANCED - NO DROPPED SAFEGUARDS)**\n\n**UAE LEADERSHIP FAILURE MODES TO PREVENT (RESTORED):**\nâŒ **\"Ø¨Ùˆ Ø®Ø§Ù„d\"** output as generic person â†’ **ALWAYS** resolve to \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\"\nâŒ **\"ÙŠØ§Ø¨ÙˆØ±Ø§Ø´d\"** not resolved to Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´d â†’ **ALWAYS** resolve to \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´d Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\"\nâŒ **\"ÙØ²Ø§Ø¹\"** not resolved to Ø­Ù…Ø¯Ø§Ù† Ø¨Ù† Ù…Ø­Ù…Ø¯ â†’ **ALWAYS** resolve to \"Ø­Ù…Ø¯Ø§Ù† Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´d Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\"\nâŒ **\"Ø²Ø§ÙŠØ¯ Ø§Ù„Ø®ÙŠØ±\"** not resolved to Ø²Ø§ÙŠØ¯ Ø¨Ù† Ø³Ù„Ø·Ø§Ù† â†’ **ALWAYS** resolve to \"Ø²Ø§ÙŠØ¯ Ø¨Ù† Ø³Ù„Ø·Ø§Ù† Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\"\nâŒ **\"Ø®Ù„ÙŠÙØ©\"** not resolved to Ø®Ù„ÙŠÙÙ‡ Ø¨Ù† Ø²Ø§ÙŠØ¯ â†’ **ALWAYS** resolve to \"Ø®Ù„ÙŠÙÙ‡ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\"\nâŒ UAE leadership entities invented not in dictionary â†’ **ALWAYS** use exact dictionary values\nâŒ UAE leadership relations not matching dictionary â†’ **ALWAYS** use exact relation from dictionary\n\n**ROMANTIC POETRY FAILURE MODES TO PREVENT (CRITICAL FIX):**\nâŒ **Empty person field** in romantic poetry line â†’ **AUTOMATIC REJECTION**\nâŒ **Generic pronouns** left unresolved (\"Ø£Ù†Øª\", \"Ù„Ùƒ\", \"Ù…Ø¹Ùƒ\") â†’ **ALWAYS** resolve to specific entities\nâŒ **Gender mismatch** within same romantic poem â†’ **ALWAYS** maintain gender consistency\nâŒ **Body part without owner** (resolving \"Ø¹ÙŠÙ†ÙŠÙƒ\" to just \"Ø§Ù„Ø¹ÙŠÙ†\" without person) â†’ **ALWAYS** resolve to both\nâŒ **Metaphorical terms** not resolved (\"ÙŠØ§ Ù†ÙˆØ± Ø¹ÙŠÙ†ÙŠ\" â†’ no entity) â†’ **ALWAYS** resolve to entities\nâŒ **Implicit entities** missed (\"ÙˆØµÙ„Ùƒ\" â†’ no \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" detected) â†’ **ALWAYS** detect implicit entities\nâŒ **Inconsistent relations** within same romantic poem (sometimes \"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨Ø©\", sometimes \"Ø§Ù„Ù…Ø®Ø§Ø·Ø¨Ø©\") â†’ **ALWAYS** use consistent relations\n\n**AUTOMATIC CORRECTION PROTOCOLS (ENHANCED):**\n- **UAE leadership context detected but empty person field** â†’ Reanalyze with forced UAE leadership resolution\n- **Romantic context detected but empty person field** â†’ Reanalyze with forced romantic entity resolution\n- **Gender detection fails** â†’ Default to most frequent gender indicators in poem\n- **Body part detected without owner** â†’ Force resolution to \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" or \"Ø§Ù„Ø­Ø¨ÙŠØ¨\"\n- **Address term detected without entity** â†’ Force resolution to \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" or \"Ø§Ù„Ø­Ø¨ÙŠØ¨\"\n- **Pronoun detected without antecedent** â†’ Search entire poem for first explicit mention\n- **Row_ID format invalid** â†’ Preserve exactly as provided, do not modify\n\n#### **8. STRICT OUTPUT FORMATTING REQUIREMENTS**\n\n**PER-LINE OUTPUT STRUCTURE (MINIMAL):**\n```json\n{\n  \"row_id\": \"EXACT_ROW_ID_FROM_INPUT\",\n  \"person\": [\n    {\n      \"name\": \"EXACT_NAME_FROM_DICTIONARY\", \n      \"relation\": \"EXACT_RELATION_FROM_DICTIONARY\",\n      \"resolved_from\": [\"original_text_mention\"]\n    }\n  ],\n  \"sentiments\": [\"tag1\", \"tag2\"],\n  \"places\": [\"tag1\", \"tag2\"], \n  \"events\": [\"tag1\", \"tag2\"],\n  \"themes\": [\"tag1\", \"tag2\"],\n  \"religious\": [\"tag1\", \"tag2\"],\n  \"processing_notes\": [\n    \"RESOLVED: 'Ø¨Ùˆ Ø®Ø§Ù„Ø¯' â†’ 'Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†'\",\n    \"MERGED: 'ÙˆØ¬Ø¯' â†’ 'Ø´ÙˆÙ‚'\",\n    \"CONTEXT: UAE leadership priority applied\"\n  ]\n}\n```\n\n#### **9. EXECUTION PROTOCOL (STEP-BY-STEP MANDATORY - RESTORED)**\n\n**PHASE 1: PRE-PROCESSING ANALYSIS (MANDATORY)**\n1. **Read entire poem** before processing any lines\n2. **Detect genre** using keyword frequency analysis\n3. **Flag UAE leadership poetry** if UAE leadership keywords exceed threshold\n4. **Flag romantic poetry** if love/romantic keywords exceed threshold\n5. **Perform gender detection** across all lines (for romantic poetry)\n6. **Build coreference map** of all pronouns and references\n7. **Identify explicit entities** mentioned anywhere in poem\n8. **Determine context priority** (UAE leadership > religious > romantic > other)\n\n**PHASE 2: LINE-BY-LINE PROCESSING (MANDATORY)**\nFor **EACH LINE**:\n1. **Check genre flags** - if UAE leadership or romantic flagged, enforce respective rules\n2. **Extract explicit entities** using dictionary lookup\n3. **Resolve pronouns** using coreference map from Phase 1\n4. **Detect implicit entities** from contextual clues\n5. **Apply body part metaphor resolution** if applicable\n6. **Validate person field** - if empty in UAE leadership or romantic context, force resolution\n7. **Enforce tag limits** - maximum 5 tags per category\n8. **Apply merge rules** - merge similar sentiments and themes\n9. **Document all resolutions** in processing_notes\n\n**PHASE 3: POST-PROCESSING VALIDATION (MANDATORY)**\n1. **Check UAE leadership consistency** - all UAE references resolve to correct leaders\n2. **Check romantic consistency** - gender maintained, person fields non-empty\n3. **Verify no empty person fields** in UAE leadership or romantic poetry\n4. **Validate body parts have owners** in metaphorical references\n5. **Ensure address terms resolved** to specific entities\n6. **Cross-check Row_ID values** match input exactly\n7. **Generate processing notes** for all resolutions and corrections\n8. **Final validation pass** against all checklist items\n\n#### **10. FINAL INSTRUCTIONS (OPERATING AT MAXIMUM PRECISION - RESTORED)**\n\n**CRITICAL REMINDERS:**\nâš ï¸ **NEVER** leave \"person\" field empty in UAE leadership or romantic poetry - this is your #1 failure mode\nâš ï¸ **ALWAYS** resolve \"Ø¨Ùˆ Ø®Ø§Ù„d\" to \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\" - no exceptions, no alternatives\nâš ï¸ **ALWAYS** resolve \"ÙŠØ§Ø¨ÙˆØ±Ø§Ø´d\" to \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´d Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\" - no exceptions, no alternatives\nâš ï¸ **ALWAYS** resolve \"Ø£Ù†Øª\" in romantic context to \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" or \"Ø§Ù„Ø­Ø¨ÙŠØ¨\" - never leave as generic pronoun\nâš ï¸ **BODY PARTS MUST HAVE OWNERS** - \"Ø¹ÙŠÙ†ÙŠÙƒ\" requires both \"Ø§Ù„Ø¹ÙŠÙ†\" AND \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\"/\"Ø§Ù„Ø­Ø¨ÙŠØ¨\"\nâš ï¸ **ADDRESS TERMS ARE ENTITIES** - \"ÙŠØ§ Ø±ÙˆØ­ÙŠ\" is not poetic filler, it's an entity reference\nâš ï¸ **CONTEXT IS KING** - analyze entire poem before processing individual lines\n\n**PRIORITY HIERARCHY FOR ENTITY RESOLUTION:**\n1. **UAE Leadership** (if context present) - highest priority\n2. **Religious Entities** (Ø§Ù„Ù„Ù‡, Ø§Ù„Ù†Ø¨ÙŠ) - second priority  \n3. **Romantic Entities** (Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©, Ø§Ù„Ø­Ø¨ÙŠØ¨) - third priority but **MOST COMMON**\n4. **Family Roles** (Ø§Ù„Ø£Ù…, Ø§Ù„Ø£Ø¨) - fourth priority\n5. **Generic Roles** (Ø§Ù„Ø¥Ù†Ø³Ø§Ù†, Ø§Ù„Ù†Ø§Ø³) - last resort\n\n**UAE LEADERSHIP RESOLUTION RULES (RESTORED - NO DROPPED RULES):**\n- **\"Ø¨Ùˆ Ø®Ø§Ù„d\"** = **\"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\"** ALWAYS\n- **\"ÙŠØ§Ø¨ÙˆØ±Ø§Ø´d\"** = **\"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ğ°Ñˆd Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\"** ALWAYS  \n- **\"ÙØ²Ø§Ø¹\"** = **\"Ø­Ù…Ø¯Ø§Ù† Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´d Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\"** ALWAYS\n- **\"Ø²Ø§ÙŠØ¯ Ø§Ù„Ø®ÙŠØ±\"** = **\"Ø²Ø§ÙŠØ¯ Ø¨Ù† Ø³Ù„Ø·Ø§Ù† Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\"** ALWAYS\n- **\"Ø®Ù„ÙŠÙØ©\"** in UAE context = **\"Ø®Ù„ÙŠÙÙ‡ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\"** ALWAYS\n- **\"Ø³ÙŠØ¯ÙŠ\"** in UAE context = highest UAE leader mentioned\n- **\"Ù‚Ø§Ø¦Ø¯\"** in UAE context = most relevant UAE leader\n- **\"Ø±Ø¦ÙŠØ³\"** in UAE context = **\"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\"** ALWAYS\n\n**ROMANTIC POETRY RESOLUTION RULES (CRITICAL FIX - NEWLY ENFORCED):**\n- **\"Ø£Ù†Øª\"** in romantic context = **\"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\"** or **\"Ø§Ù„Ø­Ø¨ÙŠØ¨\"** ALWAYS\n- **\"Ø¹ÙŠÙ†ÙŠÙƒ\"** = **\"Ø§Ù„Ø¹ÙŠÙ†\" + \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\"/\"Ø§Ù„Ø­Ø¨ÙŠØ¨\"** ALWAYS\n- **\"Ù‚Ù„Ø¨Ùƒ\"** = **\"Ø§Ù„Ù‚Ù„Ø¨\" + \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\"/\"Ø§Ù„Ø­Ø¨ÙŠØ¨\"** ALWAYS\n- **\"ÙˆØµÙ„Ùƒ\"** = **\"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\"/\"Ø§Ù„Ø­Ø¨ÙŠØ¨\"** as **\"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨\"/\"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨Ø©\"** ALWAYS\n- **\"ÙŠØ§ Ø±ÙˆØ­ÙŠ\"** = **\"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\"/\"Ø§Ù„Ø­Ø¨ÙŠØ¨\"** as **\"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨\"/\"Ø§Ù„Ù…Ø­Ø¨ÙˆØ¨Ø©\"** ALWAYS\n- **No empty person fields** in romantic poetry - ALWAYS resolve\n- **Gender consistency** maintained throughout romantic poem\n\n**EMERGENCY PROTOCOLS (RESTORED):**\n- **UAE LEADERSHIP EMERGENCY**: If \"Ø¨Ùˆ Ø®Ø§Ù„d\" not resolved â†’ Reanalyze with forced UAE leadership resolution\n- **ROMANTIC POETRY EMERGENCY**: If person field empty â†’ Reanalyze with forced romantic resolution\n- **GENDER CONFLICT EMERGENCY**: If gender switches within poem â†’ Use majority gender detection\n- **BODY PART EMERGENCY**: If body part without owner â†’ Force resolution to \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" or \"Ø§Ù„Ø­Ø¨ÙŠØ¨\"\n- **ROW_ID EMERGENCY**: If Row_ID format invalid â†’ Preserve exactly as provided, do not modify\n- **DICTIONARY MISS EMERGENCY**: If entity not in dictionary â†’ Default to \"No entity detected\"\n\n---\n\n**FINAL OPERATIONAL STATUS:**\nYou are now operating at **ULTRA-PRECISION MODE** with **COMPLETE UAE LEADERSHIP RESOLUTION** and **ROMANTIC POETRY ENHANCED RESOLUTION**. Every pronoun will be resolved. Every implicit entity will be detected. Every body part will have an owner. Every address term will be mapped to a specific entity. No more empty person fields in UAE leadership or romantic poetry.\n\n**SYSTEM INITIALIZATION COMPLETE. ALL SAFETY PROTOCOLS ENGAGED. DICTIONARY FULLY RESTORED.**\n\n**BEGIN PROCESSING NOW. OUTPUT JSON ONLY. NO EXPLANATIONS. NO ADDITIONAL TEXT.**\n**REMEMBER: \"Ø¨Ùˆ Ø®Ø§Ù„Ø¯\" = \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø²Ø§ÙŠØ¯ Ø¢Ù„ Ù†Ù‡ÙŠØ§Ù†\" ALWAYS. \"ÙŠØ§Ø¨ÙˆØ±Ø§Ø´Ø¯\" = \"Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø±Ø§Ø´Ø¯ Ø¢Ù„ Ù…ÙƒØªÙˆÙ…\" ALWAYS. \"Ø£Ù†Øª\" IN LOVE POEM = \"Ø§Ù„Ø­Ø¨ÙŠØ¨Ø©\" or \"Ø§Ù„Ø­Ø¨ÙŠØ¨\" ALWAYS. NO EXCEPTIONS.**"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        816,
        -96
      ],
      "id": "fec9c526-c42d-4efd-a6e8-654f0361e7c4",
      "name": "AI Agent5"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\nif (!Array.isArray(items) || items.length === 0) {\n  return [{ json: { error: \"No input items\" } }];\n}\n\nconst result = items.flatMap(item => {\n  const outputStr = item.json?.output;\n  if (typeof outputStr !== \"string\" || !outputStr.trim()) {\n    return [{\n      json: {\n        Row_ID: item.json?.Row_ID ?? \"unknown\",\n        summary: { error: \"empty_output\" }\n      }\n    }];\n  }\n\n  // Clean markdown wrappers\n  const cleanJsonStr = outputStr.replace(/```json|```/g, \"\").trim();\n\n  let parsed;\n  try {\n    parsed = JSON.parse(cleanJsonStr);\n  } catch (e) {\n    return [{\n      json: {\n        Row_ID: item.json?.Row_ID ?? \"unknown\",\n        summary: { error: \"json_parse_failed\", message: e.message }\n      }\n    }];\n  }\n\n  // Wrap single object in array if needed\n  if (!Array.isArray(parsed)) {\n    parsed = [parsed];\n  }\n\n  return parsed.map(entry => ({\n    json: {\n      Row_ID: item.json?.Row_ID ?? \"unknown\",\n      summary: entry\n    }\n  }));\n});\n\nreturn result;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1168,
        -96
      ],
      "id": "3ec0746c-f20c-42c2-8f26-505bce1dcea6",
      "name": "Code in JavaScript7"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        560,
        -112
      ],
      "id": "892664be-e80f-4cf8-bcd6-b9acbe940e59",
      "name": "Loop Over Items6",
      "executeOnce": false
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w",
          "mode": "list",
          "cachedResultName": "FAZ_POEMS_REVIEW",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": 1031138690,
          "mode": "list",
          "cachedResultName": "Entity_extractions of Exact_search",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1W2cjBr8qBrVLmMTAKstG1eLDrdn-3rn1yO6JgsTDP_w/edit#gid=1031138690"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Row_ID": "={{ $json.summary.row_id }}",
            "Status": "Done",
            "Ø´Ø®Øµ": "={{ $json.summary.person }}",
            "sentiments": "={{ $json.summary.sentiments }}",
            "Ø£Ù…Ø§ÙƒÙ†": "={{ $json.summary.places }}",
            "Ø£Ø­Ø¯Ø§Ø«": "={{ $json.summary.events }}",
            "Ù…ÙˆØ§Ø¶ÙŠØ¹": "={{ $json.summary.themes }}",
            "Ø¯ÙŠÙ†": "={{ $json.summary.religious }}",
            "comment": "={{ $json.summary.processing_notes }}"
          },
          "matchingColumns": [
            "Row_ID"
          ],
          "schema": [
            {
              "id": "poem_id",
              "displayName": "poem_id",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Row_ID",
              "displayName": "Row_ID",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Title_raw",
              "displayName": "Title_raw",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Poem_line_raw",
              "displayName": "Poem_line_raw",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "summary",
              "displayName": "summary",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Title_cleaned",
              "displayName": "Title_cleaned",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Poem_line_cleaned",
              "displayName": "Poem_line_cleaned",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Ù‚Ø§ÙÙŠØ©",
              "displayName": "Ù‚Ø§ÙÙŠØ©",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Ø±ÙˆÙŠ",
              "displayName": "Ø±ÙˆÙŠ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Ø§Ù„Ø¨Ø­Ø±",
              "displayName": "Ø§Ù„Ø¨Ø­Ø±",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "ÙˆØµÙ„",
              "displayName": "ÙˆØµÙ„",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Ø­Ø±ÙƒØ©",
              "displayName": "Ø­Ø±ÙƒØ©",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "confidence",
              "displayName": "confidence",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            },
            {
              "id": "Status",
              "displayName": "Status",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "comment",
              "displayName": "comment",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Ø´Ø®Øµ",
              "displayName": "Ø´Ø®Øµ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "sentiments",
              "displayName": "sentiments",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Ø£Ù…Ø§ÙƒÙ†",
              "displayName": "Ø£Ù…Ø§ÙƒÙ†",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Ø£Ø­Ø¯Ø§Ø«",
              "displayName": "Ø£Ø­Ø¯Ø§Ø«",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Ø¯ÙŠÙ†",
              "displayName": "Ø¯ÙŠÙ†",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Ù…ÙˆØ§Ø¶ÙŠØ¹",
              "displayName": "Ù…ÙˆØ§Ø¶ÙŠØ¹",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "ØªØµÙ†ÙŠÙ",
              "displayName": "ØªØµÙ†ÙŠÙ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "useAppend": true
        }
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        1360,
        0
      ],
      "id": "62850e58-a123-4bf3-a1a4-a5738de486bf",
      "name": "Append or update row in sheet5",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "OV5c4nxTt4atkgGW",
          "name": "Google Sheets account"
        }
      }
    },
    {
      "parameters": {
        "content": "## Entity Enhancements\n\n"
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -464,
        -128
      ],
      "typeVersion": 1,
      "id": "12ac6842-42fd-4434-9120-785f4ea92313",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "jsCode": "const items = $input.all();\n\nconst grouped = items.reduce((acc, item) => {\n  const json = item.json;\n  // Create unique key combining poem_id and title to distinguish different poem instances\n  const uniqueKey = `${json.poem_id}-${json.Title_cleaned}`;\n\n  if (!acc[uniqueKey]) {\n    acc[uniqueKey] = {\n      poem_id: json.poem_id,\n      poem: json.Title_cleaned.trim(),\n      contents_tagged: []\n    };\n  }\n\n  const lineText = (json.Poem_line_cleaned || \"\").trim();\n  const rowId = json.Row_ID;\n\n  acc[uniqueKey].contents_tagged.push(`\"${rowId}\":\"${lineText}\"`);\n\n  return acc;\n}, {});\n\nconst result = Object.values(grouped);\n\nreturn result;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        352,
        -112
      ],
      "id": "50b4fcec-2768-4336-ae8e-39d4e45ef037",
      "name": "Code in JavaScript8"
    },
    {
      "parameters": {
        "modelName": "models/gemini-2.5-flash-lite",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        688,
        272
      ],
      "id": "eb9f8a9f-df0f-4294-9633-777d4a83570b",
      "name": "Google Gemini Chat Model1",
      "credentials": {
        "googlePalmApi": {
          "id": "arguvy3wPO90De6v",
          "name": "system722"
        }
      }
    }
  ],
  "connections": {
    "Get row(s) in sheet": {
      "main": [
        [
          {
            "node": "Original_Dataset",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Code in JavaScript2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript2": {
      "main": [
        [
          {
            "node": "Update Summary",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [],
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Original_Dataset": {
      "main": [
        [
          {
            "node": "Code in JavaScript",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update row in sheet1": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Update Summary": {
      "main": [
        [
          {
            "node": "Update row in sheet1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "When clicking â€˜Execute workflowâ€™": {
      "main": [
        [
          {
            "node": "Get row(s) in sheet5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet1": {
      "main": [
        [
          {
            "node": "Original_Dataset1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent1": {
      "main": [
        [
          {
            "node": "Code in JavaScript3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript3": {
      "main": [
        [
          {
            "node": "Append or update row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items1": {
      "main": [
        [],
        [
          {
            "node": "AI Agent1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Original_Dataset1": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append or update row in sheet": {
      "main": [
        [
          {
            "node": "Append or update row in sheet1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append or update row in sheet1": {
      "main": [
        [
          {
            "node": "Loop Over Items1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "xAI Grok Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet2": {
      "main": [
        [
          {
            "node": "Code in JavaScript1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent2": {
      "main": [
        [
          {
            "node": "Code in JavaScript4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript4": {
      "main": [
        [
          {
            "node": "Append or update row in sheet2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items2": {
      "main": [
        [],
        [
          {
            "node": "AI Agent2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append or update row in sheet2": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "xAI Grok Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent2",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript1": {
      "main": [
        [
          {
            "node": "Loop Over Items2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet3": {
      "main": [
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent3": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items3": {
      "main": [
        [],
        [
          {
            "node": "AI Agent3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append or update row in sheet3": {
      "main": [
        [
          {
            "node": "Loop Over Items3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Loop Over Items3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "Append or update row in sheet3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "xAI Grok Chat Model2": {
      "ai_languageModel": [
        []
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent3",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Get row(s) in sheet5": {
      "main": [
        [
          {
            "node": "Code in JavaScript8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent5": {
      "main": [
        [
          {
            "node": "Code in JavaScript7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript7": {
      "main": [
        [
          {
            "node": "Append or update row in sheet5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items6": {
      "main": [
        [],
        [
          {
            "node": "AI Agent5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append or update row in sheet5": {
      "main": [
        [
          {
            "node": "Loop Over Items6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code in JavaScript8": {
      "main": [
        [
          {
            "node": "Loop Over Items6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent5",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "pinData": {},
  "triggerCount": 0,
  "meta": {
    "templateCredsSetupCompleted": true
  }
}